/*! For license information please see main.js.LICENSE.txt */
(()=>{var t={198:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>G,firebase:()=>z});var r=function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.create,Object.create;var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};Object.create,Object.create;function o(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=o(t[n],e[n]));return t}var a=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function s(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}var u=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,c.prototype.create),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Error),c=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?l(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",c=new u(i,s,r);return c},t}();function l(t,e){return t.replace(h,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var h=/\{\$([^}]+)}/g;function d(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function f(t,e){var n=new p(t,e);return n.subscribe.bind(n)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782),i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295,h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i;this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();var p=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=v),void 0===r.error&&(r.error=v),void 0===r.complete&&(r.complete=v);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function v(){}var g=function(){return(g=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function m(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function y(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}Object.create,Object.create;var _,b=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),w="[DEFAULT]",I=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=w);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=g({identifier:w,optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService({instanceIdentifier:i});if(!o){if(r)return null;throw Error("Service "+this.name+" is not available")}return o}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:w})}catch(t){}try{for(var r=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=m(i.value,2),a=o[0],s=o[1],u=this.normalizeInstanceIdentifier(a);try{var c=this.getOrInitializeService({instanceIdentifier:u});s.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=w),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return t=this,e=void 0,r=function(){var t;return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(y(y([],m(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),m(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))},new((n=void 0)||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}));var t,e,n,r},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=w),this.instances.has(t)},t.prototype.initialize=function(t){void 0===t&&(t={});var e=t.instanceIdentifier,n=void 0===e?w:e,r=t.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(n);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");return this.getOrInitializeService({instanceIdentifier:o,options:i})},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);return!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===w?void 0:e),options:i}),this.instances.set(n,o)),o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:w:t},t}(),E=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new I(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();function T(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var S,C=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(S||(S={}));var k,N={debug:S.DEBUG,verbose:S.VERBOSE,info:S.INFO,warn:S.WARN,error:S.ERROR,silent:S.SILENT},P=S.INFO,A=((_={})[S.DEBUG]="log",_[S.VERBOSE]="log",_[S.INFO]="info",_[S.WARN]="warn",_[S.ERROR]="error",_),x=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=A[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,T(["["+i+"]  "+t.name+":"],n))}},R=function(){function t(t){this.name=t,this._logLevel=P,this._logHandler=x,this._userLogHandler=null,C.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in S))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?N[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,T([this,S.DEBUG],t)),this._logHandler.apply(this,T([this,S.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,T([this,S.VERBOSE],t)),this._logHandler.apply(this,T([this,S.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,T([this,S.INFO],t)),this._logHandler.apply(this,T([this,S.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,T([this,S.WARN],t)),this._logHandler.apply(this,T([this,S.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,T([this,S.ERROR],t)),this._logHandler.apply(this,T([this,S.ERROR],t))},t}();function O(t){C.forEach((function(e){e.setLogLevel(t)}))}var D,L=((k={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",k["bad-app-name"]="Illegal App name: '{$appName}",k["duplicate-app"]="Firebase App named '{$appName}' already exists",k["app-deleted"]="Firebase App named '{$appName}' already deleted",k["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",k["invalid-log-argument"]="First argument to `onLog` must be null or a function.",k),j=new c("app","Firebase",L),M="@firebase/app",F="[DEFAULT]",q=((D={})[M]="fire-core",D["@firebase/analytics"]="fire-analytics",D["@firebase/auth"]="fire-auth",D["@firebase/database"]="fire-rtdb",D["@firebase/functions"]="fire-fn",D["@firebase/installations"]="fire-iid",D["@firebase/messaging"]="fire-fcm",D["@firebase/performance"]="fire-perf",D["@firebase/remote-config"]="fire-rc",D["@firebase/storage"]="fire-gcs",D["@firebase/firestore"]="fire-fst",D["fire-js"]="fire-js",D["firebase-wrapper"]="fire-js-all",D),U=new R("@firebase/app"),V=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=o(void 0,t),this.container=new E(e.name),this._addComponent(new b("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=F),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=F),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){U.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw j.create("app-deleted",{appName:this.name_})},t}();V.prototype.name&&V.prototype.options||V.prototype.delete||console.log("dc");var W=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=F);var a=o.name;if("string"!=typeof a||!a)throw j.create("bad-app-name",{appName:String(a)});if(d(e,a))throw j.create("duplicate-app",{appName:a});var s=new t(n,o,r);return e[a]=s,s},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=q[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void U.warn(u.join(" "))}a(new b(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:O,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw j.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=N[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:S[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=C;r<i.length;r++)n(i[r])}(t,e)},apps:null,SDK_VERSION:"8.3.2",INTERNAL:{registerComponent:a,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!d(e,t=t||F))throw j.create("no-app",{appName:t});return e[t]}function a(a){var s=a.name;if(n.has(s))return U.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===a.type?r[s]:null;if(n.set(s,a),"PUBLIC"===a.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[s])throw j.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==a.serviceProps&&o(u,a.serviceProps),r[s]=u,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,s).apply(this,a.multipleInstances?t:[])}}for(var c=0,l=Object.keys(e);c<l.length;c++){var h=l[c];e[h]._addComponent(a)}return"PUBLIC"===a.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(V);return e.INTERNAL=r(r({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){o(e,t)},createSubscribe:f,ErrorFactory:c,deepExtend:o}),e}(),B=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if("object"==typeof self&&self.self===self&&void 0!==self.firebase){U.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var H=self.firebase.SDK_VERSION;H&&H.indexOf("LITE")>=0&&U.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var K=W.initializeApp;W.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return s()&&U.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),K.apply(void 0,t)};var z=W;!function(t,e){t.INTERNAL.registerComponent(new b("platform-logger",(function(t){return new B(t)}),"PRIVATE")),t.registerVersion(M,"0.6.18",void 0),t.registerVersion("fire-js","")}(z);const G=z},426:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var r=n(645),i=n.n(r)()((function(t){return t[1]}));i.push([t.id,"@import url(https://fonts.googleapis.com/css?family=PT+Serif|Roboto|Open+Sans);"]),i.push([t.id,"@media (max-width: 200px) {\n    /*mobile optimisation to go here*/\n}\n\n:root {\n    line-height: 1.2em;\n    color: #070700;\n    background: #fdfdfd;\n}\n\nsvg {\n    width: 18px;\n    height: 18px;\n}\n\n.icon-hover {\n    filter: brightness(0) saturate(100%) invert(20%) sepia(61%) saturate(297%) hue-rotate(168deg) brightness(94%) contrast(93%);;\n}\n\n.wrapper {\n    margin: auto;\n    max-width: 950px;\n}\n\n.header {\n    border-bottom: 1px solid;\n    margin-bottom: 20px;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: flex-end;\n}\n\n.nav {\n    display: flex;\n    flex-direction: row;\n    justify-content: space-around;\n}\n\n.navlink {\n    cursor: pointer;\n}\n\n.navlink:hover {\n    color: grey;\n}\n\n.navlink {\n    margin: 0px 5px 0px 5px;\n}\n\n.app-view {\n    display: flex;\n    flex-direction: row;\n}\n\n.project-view-header, .task-view-header {\n    display: flex;\n    justify-content: space-between;\n    font-family: \"Roboto\";\n}\n\n.add-button {\n    margin: 5px;\n}\n\n.project-view {\n    margin: 5px 0px 5px 20px;\n    width: 25%;\n}\n\n.task-view {\n    flex: 1;\n    margin: 5px 0px 5px 20px;\n    width: 75%;\n}\n\n.task-form {\n    display: grid;\n    grid-template-columns: 20% 70% 10%;\n}\n\n.task-form-column-left input{\n    width: 100%\n}\n\n.task-form-column-right {\n    display: flex;\n}\n\n.task-form-column-right textarea {\n    box-sizing: border-box;\n    height: 100%;\n    width: 100%;\n}\n\nh3 {\n    margin: 2px 0px 2px 0px;\n    font-weight: 100;\n}\n\n.project-placeholder {\n    padding: 5px 0px 5px 4px;\n    margin: 5px 0px 5px 0px;\n    display: grid;\n    grid-template-columns: 80% 10% 10% 0%;\n    overflow: hidden;\n    transition: all 0.1s;\n    height: auto;\n    color: #444444;\n    cursor: pointer;\n    border: 3px dashed #E8EBF1FF;\n    border-radius: 10px\n}\n\n.task-placeholder {\n    padding: 5px 0px 5px 0px;\n    margin: 5px 5px 5px 5px;\n    display: grid;\n    grid-template-columns: 4% 90% 3% 3% 0%;\n    transition: all 0.1s;\n    overflow: hidden;\n    height: auto;\n}\n\n.project-view-list, .task-view-list {\n    font-family: Roboto;\n}\n\n.project-placeholder:hover {\n    color:black;\n    border: 3px dashed rgb(213, 216, 221);\n    border-radius: 10px\n}\n\n.project-placeholder-active {\n    padding: 5px 0px 5px 4px;\n    margin: 5px 0px 5px 0px;\n    display: grid;\n    grid-template-columns: 80% 10% 10% 0%;\n    overflow: hidden;\n    transition: all 0.1s;\n    height: auto;\n    cursor: pointer;\n    color:black;\n    font-weight: bold;\n    border: 3px dashed rgb(181, 182, 185);\n    border-radius: 10px\n}\n\n.project-placeholder-edit {\n    margin: 10px 0px 10px 0px;\n    display: grid;\n    grid-template-columns: 70% 10% 0% 20%;\n    transition: all 0.1s;\n}\n\n.project-edit, .task-edit {\n    overflow: hidden;\n}\n\n.edit-delete-save {\n    display: flex;\n    flex-direction: row;\n}\n\n.project-due {\n    min-height: 1.2em;\n    max-height: auto;\n    display: flex;\n    flex-direction: row;\n}\n\n.task-placeholder-edit {\n    display: grid;\n    grid-template-columns: 0% 91% 3% 0% 6%;\n    transition: all 0.1s;\n}\n\n.task-name-due-notes {\n    padding: 0px 10px 0px 0px;\n}\n\n.task-name-due {\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n}\n\n.task-notes {\n    max-height: 1.2em;\n    overflow: hidden;\n    font-style: italic;\n    color: #444444;\n    font-size: small;\n}\n\n.task-notes-expanded {\n    max-height: auto;\n    font-family: \"Open Sans\";\n    font-size: small;\n    background-image: url(\"data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' rx='6' ry='6' stroke='%23E8EBF1FF' stroke-width='3' stroke-dasharray='8' stroke-dashoffset='100' stroke-linecap='butt'/%3e%3c/svg%3e\");\n    border-radius: 6px;\n    padding: 7px;\n}\n\n.task-status {\n    overflow: hidden;\n}\n\n.strikethrough {\n    text-decoration: line-through;\n}\n\n.modal {\n    display: none;\n    z-index: 1;\n    position: fixed;\n    z-index: 1;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    overflow: auto;\n    background-color: rgba(0,0,0,0.4);\n}\n\n.about {\n    background-color: #fefefe;\n    margin: 15% auto;\n    padding: 20px;\n    border: 1px solid #888;\n    width: 80%;\n    font-family: Roboto;\n}\n\n.hide {\n    display: none;\n}\n\ninput:focus,\nselect:focus,\ntextarea:focus,\nbutton:focus,\n[contenteditable] {\n    outline: none;\n}\n\ndiv[contenteditable=\"true\"] {\n    background-image: url(\"data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' rx='6' ry='6' stroke='%23E8EBF1FF' stroke-width='3' stroke-dasharray='8' stroke-dashoffset='100' stroke-linecap='butt'/%3e%3c/svg%3e\");\n    border-radius: 6px;\n    width: 100%;\n}\n\n.add-project-form input {\n    width: 100%;\n    margin: 2px 0px 2px 0px;\n}\n\nselect {\n    background-color: #fdfdfd;\n}\n\ninput[type=text], input[type=date], select {\n    padding: 5px 0px 5px 2px\n}\n\ninput, select, textarea {\n    border: none;\n    background-image: url(\"data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' rx='6' ry='6' stroke='%23E8EBF1FF' stroke-width='3' stroke-dasharray='8' stroke-dashoffset='100' stroke-linecap='butt'/%3e%3c/svg%3e\");\nborder-radius: 6px;\n}",""]);const o=i},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<t.length;s++){var u=[].concat(t[s]);r&&i[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),e.push(u))}},e}},562:function(t,e,n){!function(t){"use strict";try{(function(){var e=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(t),n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var i=function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function o(t,e,n,r){return new(n=n||Promise)((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):((e=t.value)instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function a(t,e){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a={next:s(0),throw:s(1),return:s(2)};return"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,(a=i?[2&a[0],i.value]:a)[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=0<(i=o.trys).length&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function s(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&r>=t.length?void 0:t)&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function c(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}function l(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}function h(t){try{return g.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}var d=!1,f="${JSCORE_VERSION}",p=function(t,e){if(!t)throw v(e)},v=function(t){return new Error("Firebase Database ("+f+") INTERNAL ASSERT FAILED: "+t)},g={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=o>>2,l=(o=(3&o)<<4|s>>4,s=(15&s)<<2|(l=u?t[i+2]:0)>>6,63&l);u||(l=64,a||(s=64)),r.push(n[c],n[o],n[s],n[l])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(l(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i,o,a,s=t[n++];s<128?e[r++]=String.fromCharCode(s):191<s&&s<224?(o=t[n++],e[r++]=String.fromCharCode((31&s)<<6|63&o)):239<s&&s<365?(i=((7&s)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536,e[r++]=String.fromCharCode(55296+(i>>10)),e[r++]=String.fromCharCode(56320+(1023&i))):(o=t[n++],a=t[n++],e[r++]=String.fromCharCode((15&s)<<12|(63&o)<<6|63&a))}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();o=o<<2|a>>4,r.push(o),64!==s&&(a=a<<4&240|s>>2,r.push(a),64!==u&&(u|=s<<6&192,r.push(u)))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function m(t){return"__proto__"!==t}var y=(_.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},_);function _(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}function b(){return"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")}function w(){return!0===d}var I,E=(r(T,I=Error),T);function T(t,e,n){return(e=I.call(this,e)||this).code=t,e.customData=n,e.name="FirebaseError",Object.setPrototypeOf(e,T.prototype),Error.captureStackTrace&&Error.captureStackTrace(e,S.prototype.create),e}var S=(C.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r,i=e[0]||{},o=this.service+"/"+t;return t=(t=this.errors[t])?(r=i,t.replace(k,(function(t,e){var n=r[e];return null!=n?String(n):"<"+e+"?>"}))):"Error",t=this.serviceName+": "+t+" ("+o+").",new E(o,t,i)},C);function C(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var k=/\{\$([^}]+)}/g;function N(t){return JSON.parse(t)}function P(t){return JSON.stringify(t)}function A(t){var e={},n={},r={},i="";try{var o=t.split(".");e=N(h(o[0])||""),n=N(h(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}}function x(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function R(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function O(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function D(t,e,n){var r,i={};for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}var L=(j.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},j.prototype.compress_=function(t,e){e=e||0;var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a=this.chain_[0],s=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){var h=r<40?r<20?(o=c^s&(u^c),1518500249):(o=s^u^c,1859775393):r<60?(o=s&u|c&(s|u),2400959708):(o=s^u^c,3395469782);i=(a<<5|a>>>27)+o+l+h+n[r]&4294967295,l=c,c=u,u=4294967295&(s<<30|s>>>2),s=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},j.prototype.update=function(t,e){if(null!=t){for(var n=(e=void 0===e?t.length:e)-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},j.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},j);function j(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}function M(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function F(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return(t+=" failed: ")+r+" argument "}function q(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(F(t,e,r)+"must be a valid function.")}function U(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(F(t,e,r)+"must be a valid context object.")}function V(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e}var W=(B.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},B.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},B.prototype.setServiceProps=function(t){return this.serviceProps=t,this},B);function B(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var H="[DEFAULT]",K=(z.prototype.get=function(t){void 0===t&&(t=H);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new y;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},z.prototype.getImmediate=function(t){var e=i({identifier:H,optional:!1},t),n=(t=e.identifier,e.optional),r=this.normalizeInstanceIdentifier(t);try{var o=this.getOrInitializeService({instanceIdentifier:r});if(o)return o;if(n)return null;throw Error("Service "+this.name+" is not available")}catch(t){if(n)return null;throw t}},z.prototype.getComponent=function(){return this.component},z.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if("EAGER"===(this.component=t).instantiationMode)try{this.getOrInitializeService({instanceIdentifier:H})}catch(t){}try{for(var r=s(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=u(i.value,2),a=o[0],c=o[1],l=this.normalizeInstanceIdentifier(a);try{var h=this.getOrInitializeService({instanceIdentifier:l});c.resolve(h)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},z.prototype.clearInstance=function(t){void 0===t&&(t=H),this.instancesDeferred.delete(t),this.instances.delete(t)},z.prototype.delete=function(){return o(this,void 0,void 0,(function(){var t;return a(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(c(c([],u(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),u(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},z.prototype.isComponentSet=function(){return null!=this.component},z.prototype.isInitialized=function(t){return void 0===t&&(t=H),this.instances.has(t)},z.prototype.initialize=function(t){var e=void 0===(e=(t=void 0===t?{}:t).instanceIdentifier)?H:e;if(t=void 0===(t=t.options)?{}:t,e=this.normalizeInstanceIdentifier(e),this.isInitialized(e))throw Error(this.name+"("+e+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");return this.getOrInitializeService({instanceIdentifier:e,options:t})},z.prototype.getOrInitializeService=function(t){var e=t.instanceIdentifier,n=t.options,r=void 0===n?{}:n;return!(t=this.instances.get(e))&&this.component&&(t=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e)===H?void 0:n,options:r}),this.instances.set(e,t)),t||null},z.prototype.normalizeInstanceIdentifier=function(t){return!this.component||this.component.multipleInstances?t:H},z);function z(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}var G,Q=(Y.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},Y.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},Y.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new K(t,this);return this.providers.set(t,e),e},Y.prototype.getProviders=function(){return Array.from(this.providers.values())},Y);function Y(t){this.name=t,this.providers=new Map}function $(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Z[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,c(["["+i+"]  "+t.name+":"],n))}}(fe=G=G||{})[fe.DEBUG=0]="DEBUG",fe[fe.VERBOSE=1]="VERBOSE",fe[fe.INFO=2]="INFO",fe[fe.WARN=3]="WARN",fe[fe.ERROR=4]="ERROR",fe[fe.SILENT=5]="SILENT";var X={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},J=G.INFO,Z=((ve={})[G.DEBUG]="log",ve[G.VERBOSE]="log",ve[G.INFO]="info",ve[G.WARN]="warn",ve[G.ERROR]="error",ve),tt=(Object.defineProperty(et.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in G))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),et.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?X[t]:t},Object.defineProperty(et.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(et.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),et.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,c([this,G.DEBUG],t)),this._logHandler.apply(this,c([this,G.DEBUG],t))},et.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,c([this,G.VERBOSE],t)),this._logHandler.apply(this,c([this,G.VERBOSE],t))},et.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,c([this,G.INFO],t)),this._logHandler.apply(this,c([this,G.INFO],t))},et.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,c([this,G.WARN],t)),this._logHandler.apply(this,c([this,G.WARN],t))},et.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,c([this,G.ERROR],t)),this._logHandler.apply(this,c([this,G.ERROR],t))},et);function et(t){this.name=t,this._logLevel=J,this._logHandler=$,this._userLogHandler=null}var nt=(rt.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),P(e))},rt.prototype.get=function(t){return null==(t=this.domStorage_.getItem(this.prefixedName_(t)))?null:N(t)},rt.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},rt.prototype.prefixedName_=function(t){return this.prefix_+t},rt.prototype.toString=function(){return this.domStorage_.toString()},rt);function rt(t){this.domStorage_=t,this.prefix_="firebase:"}var it=(ot.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},ot.prototype.get=function(t){return x(this.cache_,t)?this.cache_[t]:null},ot.prototype.remove=function(t){delete this.cache_[t]},ot);function ot(){this.cache_={},this.isInMemoryStorage=!0}function at(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i,o=t.charCodeAt(r);55296<=o&&o<=56319&&(i=o-55296,p(++r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(i<<10)+(t.charCodeAt(r)-56320)),o<128?e[n++]=o:(o<2048?e[n++]=o>>6|192:(o<65536?e[n++]=o>>12|224:(e[n++]=o>>18|240,e[n++]=o>>12&63|128),e[n++]=o>>6&63|128),e[n++]=63&o|128)}return e}(t);return(t=new L).update(e),t=t.digest(),g.encodeByteArray(t)}function st(t,e){p(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(gt.logLevel=G.VERBOSE,_t=gt.log.bind(gt),e&&vt.set("logging_enabled",!0)):"function"==typeof t?_t=t:(_t=null,vt.remove("logging_enabled"))}function ut(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+yt.apply(void 0,c([],u(t)));gt.error(n)}function ct(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)}function lt(t,e){return t===e?0:t<e?-1:1}function ht(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+P(e))}function dt(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)n<i+e?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r}var ft,pt=(Ye=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new nt(e)}}catch(t){}return new it})("localStorage"),vt=Ye("sessionStorage"),gt=new tt("@firebase/database"),mt=(ft=1,function(){return ft++}),yt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=yt.apply(null,i):n+="object"==typeof i?P(i):i,n+=" "}return n},_t=null,bt=!0,wt=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!0===bt&&(bt=!1,null===_t&&!0===vt.get("logging_enabled")&&st(!0)),_t&&(t=yt.apply(null,e),_t(t))},It=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];wt.apply(void 0,c([t],u(e)))}},Et=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+yt.apply(void 0,c([],u(t)));throw gt.error(n),new Error(n)},Tt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+yt.apply(void 0,c([],u(t)));gt.warn(n)},St="[MIN_NAME]",Ct="[MAX_NAME]",kt=function(t,e){if(t===e)return 0;if(t===St||e===Ct)return-1;if(e===St||t===Ct)return 1;var n=Lt(t),r=Lt(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null===r&&t<e?-1:1},Nt=function(t){if("object"!=typeof t||null===t)return P(t);var e,n=[];for(e in t)n.push(e);n.sort();for(var r="{",i=0;i<n.length;i++)0!==i&&(r+=","),r+=P(n[i]),r+=":",r+=Nt(t[n[i]]);return r+"}"};function Pt(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function At(t){var e,n,r,i;p(!ct(t),"Invalid JSON number"),0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,r=(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(t/Math.pow(2,-1074))));for(var o=[],a=52;a;--a)o.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;--a)o.push(n%2?1:0),n=Math.floor(n/2);o.push(e?1:0),o.reverse();var s=o.join(""),u="";for(a=0;a<64;a+=8){var c=parseInt(s.substr(a,8),2).toString(16);u+=c=1===c.length?"0"+c:c}return u.toLowerCase()}function xt(t,e){return"object"==typeof(e=setTimeout(t,e))&&e.unref&&e.unref(),e}var Rt=new RegExp("^-?(0*)\\d{1,10}$"),Ot=-2147483648,Dt=2147483647,Lt=function(t){return Rt.test(t)&&(t=Number(t),Ot<=t&&t<=Dt)?t:null},jt=function(t){try{t()}catch(t){setTimeout((function(){var e=t.stack||"";throw Tt("Exception was thrown by user callback.",e),t}),Math.floor(0))}},Mt=(Ft.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(wt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},Ft.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},Ft.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},Ft.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Tt(t)},Ft);function Ft(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}var qt=(Ut.prototype.getToken=function(t){return Promise.resolve({accessToken:Ut.EMULATOR_AUTH_TOKEN})},Ut.prototype.addTokenChangeListener=function(t){t(Ut.EMULATOR_AUTH_TOKEN)},Ut.prototype.removeTokenChangeListener=function(t){},Ut.prototype.notifyForInvalidToken=function(){},Ut.EMULATOR_AUTH_TOKEN="owner",Ut);function Ut(){}var Vt=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Wt="websocket",Bt="long_polling",Ht=(Kt.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},Kt.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(Kt.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&pt.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),Kt.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},Kt.prototype.toURLString=function(){var t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return t+this.host+"/"+e},Kt);function Kt(t,e,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=pt.get("host:"+t)||this._host}function zt(t,e,n){var r;if(p("string"==typeof e,"typeof type must == string"),p("object"==typeof n,"typeof params must == object"),e===Wt)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==Bt)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}((e=t).host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams)&&(n.ns=t.namespace);var i=[];return Pt(n,(function(t,e){i.push(t+"="+e)})),r+i.join("&")}var Gt=(Qt.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),x(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},Qt.prototype.get=function(){return function(t){return function t(e,n){if(!(n instanceof Object))return n;switch(n.constructor){case Date:return new Date(n.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return n}for(var r in n)n.hasOwnProperty(r)&&m(r)&&(e[r]=t(e[r],n[r]));return e}(void 0,t)}(this.counters_)},Qt);function Qt(){this.counters_={}}var Yt={},$t={};function Xt(t){return t=t.toString(),Yt[t]||(Yt[t]=new Gt),Yt[t]}var Jt=(Zt.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},Zt.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=this;this.pendingResponses[this.currentResponseNum]&&"break"!==function(){var t=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var e=0;e<t.length;++e)!function(e){t[e]&&jt((function(){n.onMessage_(t[e])}))}(e);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++}(););},Zt);function Zt(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var te=(ee.prototype.open=function(t,e){var n,r,i,o=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Jt(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){o.log_("Timed out trying to connect."),o.onClosed_(),o.connectTimeoutTimer_=null}),Math.floor(3e4)),n=function(){var t;o.isClosed_||(o.scriptTagHolder=new ne((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=u(t,5),r=n[0],i=n[1],a=n[2];if(n[3],n[4],o.incrementIncomingBytes_(t),o.scriptTagHolder)if(o.connectTimeoutTimer_&&(clearTimeout(o.connectTimeoutTimer_),o.connectTimeoutTimer_=null),o.everConnected_=!0,"start"===r)o.id=i,o.password=a;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(o.scriptTagHolder.sendNewPolls=!1,o.myPacketOrderer.closeAfter(i,(function(){o.onClosed_()}))):o.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=(r=u(t,2))[0],r=r[1];o.incrementIncomingBytes_(t),o.myPacketOrderer.handleResponse(n,r)}),(function(){o.onClosed_()}),o.urlFn),(t={start:"t"}).ser=Math.floor(1e8*Math.random()),o.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=o.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",o.transportSessionId&&(t.s=o.transportSessionId),o.lastSessionId&&(t.ls=o.lastSessionId),o.applicationId&&(t.p=o.applicationId),"undefined"!=typeof location&&location.hostname&&Vt.test(location.hostname)&&(t.r="f"),t=o.urlFn(t),o.log_("Connecting via long-poll to "+t),o.scriptTagHolder.addTag(t,(function(){})))},"complete"===document.readyState?n():(r=!1,i=function(){document.body?r||(r=!0,n()):setTimeout(i,Math.floor(10))},document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&i()})),window.attachEvent("onload",i)))},ee.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},ee.forceAllow=function(){ee.forceAllow_=!0},ee.forceDisallow=function(){ee.forceDisallow_=!0},ee.isAvailable=function(){return!!ee.forceAllow_||!(ee.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},ee.prototype.markConnectionHealthy=function(){},ee.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},ee.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},ee.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},ee.prototype.send=function(t){t=P(t),this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var e=dt(t=function(t){return t=l(t),g.encodeByteArray(t,!0)}(t),1840),n=0;n<e.length;n++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,e.length,e[n]),this.curSegmentNum++},ee.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},ee.prototype.incrementIncomingBytes_=function(t){t=P(t).length,this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},ee);function ee(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=It(t),this.stats_=Xt(e),this.urlFn=function(t){return zt(e,Bt,t)}}var ne=(re.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||wt("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},re.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},re.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},re.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++,(t={}).id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var t=this.urlFn(t),e="",n=0;0<this.pendingSegs.length&&this.pendingSegs[0].d.length+30+e.length<=1870;){var r=this.pendingSegs.shift();e=e+"&seg"+n+"="+r.seg+"&ts"+n+"="+r.ts+"&d"+n+"="+r.d,n++}return t+=e,this.addLongPollTag_(t,this.currentSerial),!0}return!1},re.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},re.prototype.addLongPollTag_=function(t,e){var n=this;function r(){n.outstandingRequests.delete(e),n.newRequest_()}this.outstandingRequests.add(e);var i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},re.prototype.addTag=function(t,e){var n=this;setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){wt("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(t){}}),Math.floor(1))},re);function re(t,e,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=mt(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=re.createIFrame_(),e="";var i="<html><body>"+(e=this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)?'<script>document.domain="'+document.domain+'";<\/script>':e)+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(t){wt("frame writing exception"),t.stack&&wt(t.stack),wt(t)}}var ie="";function oe(t){ie=t}var ae=null;"undefined"!=typeof MozWebSocket?ae=MozWebSocket:"undefined"!=typeof WebSocket&&(ae=WebSocket);var se=(ue.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.hostname&&Vt.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),zt(t,Wt,r)},ue.prototype.open=function(t,e){var n,r=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,pt.set("previous_websocket_failure",!0);try{w()||(n={headers:{"X-Firebase-GMPID":this.applicationId||""}},this.mySock=new ae(this.connURL,[],n))}catch(e){return this.log_("Error instantiating WebSocket."),(t=e.message||e.data)&&this.log_(t),void this.onClosed_()}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(t){r.handleIncomingFrame(t)},this.mySock.onerror=function(t){r.log_("WebSocket error.  Closing connection."),(t=t.message||t.data)&&r.log_(t),r.onClosed_()}},ue.prototype.start=function(){},ue.forceDisallow=function(){ue.forceDisallow_=!0},ue.isAvailable=function(){var t,e=!1;return"undefined"!=typeof navigator&&navigator.userAgent&&(t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/))&&1<t.length&&parseFloat(t[1])<4.4&&(e=!0),!e&&null!==ae&&!ue.forceDisallow_},ue.previouslyFailed=function(){return pt.isInMemoryStorage||!0===pt.get("previous_websocket_failure")},ue.prototype.markConnectionHealthy=function(){pt.remove("previous_websocket_failure")},ue.prototype.appendFrame_=function(t){this.frames.push(t),this.frames.length===this.totalFrames&&(t=this.frames.join(""),this.frames=null,t=N(t),this.onMessage(t))},ue.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},ue.prototype.extractFrameCount_=function(t){if(p(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},ue.prototype.handleIncomingFrame=function(t){null!==this.mySock&&(t=t.data,this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),(null!==this.frames||null!==(t=this.extractFrameCount_(t)))&&this.appendFrame_(t))},ue.prototype.send=function(t){this.resetKeepAlive(),t=P(t),this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var e=dt(t,16384);1<e.length&&this.sendString_(String(e.length));for(var n=0;n<e.length;n++)this.sendString_(e[n])},ue.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},ue.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},ue.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},ue.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},ue.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},ue.responsesRequiredToBeHealthy=2,ue.healthyTimeout=3e4,ue);function ue(t,e,n,r,i){this.connId=t,this.applicationId=n,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=It(this.connId),this.stats_=Xt(e),this.connURL=ue.connectionURL_(e,r,i),this.nodeAdmin=e.nodeAdmin}var ce=(Object.defineProperty(le,"ALL_TRANSPORTS",{get:function(){return[te,se]},enumerable:!1,configurable:!0}),le.prototype.initTransports_=function(t){var e,n,r=se&&se.isAvailable(),i=r&&!se.previouslyFailed();if(t.webSocketOnly&&(r||Tt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[se];else{var o=this.transports_=[];try{for(var a=s(le.ALL_TRANSPORTS),u=a.next();!u.done;u=a.next()){var c=u.value;c&&c.isAvailable()&&o.push(c)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}}},le.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},le.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},le);function le(t){this.initTransports_(t)}var he=(de.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0)),0<(e=e.healthyTimeout||0)&&(this.healthyTimeout_=xt((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(e)))},de.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},de.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},de.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},de.prototype.sendRequest=function(t){t={t:"d",d:t},this.sendData_(t)},de.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},de.prototype.onSecondaryControl_=function(t){"t"in t&&("a"===(t=t.t)?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_()))},de.prototype.onSecondaryMessageReceived_=function(t){var e=ht("t",t);if(t=ht("d",t),"c"===e)this.onSecondaryControl_(t);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(t)}},de.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},de.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},de.prototype.onPrimaryMessageReceived_=function(t){var e=ht("t",t);t=ht("d",t),"c"===e?this.onControl_(t):"d"===e&&this.onDataMessage_(t)},de.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},de.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},de.prototype.onControl_=function(t){var e=ht("t",t);if("d"in t)if(t=t.d,"h"===e)this.onHandshake_(t);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var n=0;n<this.pendingDataMessages.length;++n)this.onDataMessage_(this.pendingDataMessages[n]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(t):"r"===e?this.onReset_(t):"e"===e?ut("Server Error: "+t):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ut("Unknown control packet command: "+e)},de.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&Tt("Protocol version mismatch detected"),this.tryStartUpgrade_())},de.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},de.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_);t=this.disconnReceiver_(this.secondaryConn_),this.secondaryConn_.open(n,t),xt((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},de.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},de.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):xt((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},de.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},de.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},de.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(pt.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},de.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},de.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},de.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},de.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},de);function de(t,e,n,r,i,o,a,s){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=a,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=It("c:"+this.id+":"),this.transportManager_=new ce(e),this.log_("Connection created"),this.start_()}var fe=(pe.prototype.put=function(t,e,n,r){},pe.prototype.merge=function(t,e,n,r){},pe.prototype.refreshAuthToken=function(t){},pe.prototype.onDisconnectPut=function(t,e,n){},pe.prototype.onDisconnectMerge=function(t,e,n){},pe.prototype.onDisconnectCancel=function(t,e){},pe.prototype.reportStats=function(t){},pe);function pe(){}var ve=(ge.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=c([],u(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},ge.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n}),(t=this.getInitialEvent(t))&&e.apply(n,t)},ge.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},ge.prototype.validateEventType_=function(t){p(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},ge);function ge(t){this.allowedEvents_=t,this.listeners_={},p(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}var me,ye=(r(_e,me=ve),_e.getInstance=function(){return new _e},_e.prototype.getInitialEvent=function(t){return p("online"===t,"Unknown event type: "+t),[this.online_]},_e.prototype.currentlyOnline=function(){return this.online_},_e);function _e(){var t=me.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||b()||(window.addEventListener("online",(function(){t.online_||(t.online_=!0,t.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){t.online_&&(t.online_=!1,t.trigger("online",!1))}),!1)),t}var be=(we.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},we);function we(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}function Ie(){return new be("")}function Ee(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Te(t){return t.pieces_.length-t.pieceNum_}function Se(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new be(t.pieces_,e)}function Ce(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function ke(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function Ne(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new be(e,0)}function Pe(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof be)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)0<i[r].length&&n.push(i[r])}return new be(n,0)}function Ae(t){return t.pieceNum_>=t.pieces_.length}function xe(t,e){var n=Ee(t),r=Ee(e);if(null===n)return e;if(n===r)return xe(Se(t),Se(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Re(t,e){for(var n=ke(t,0),r=ke(e,0),i=0;i<n.length&&i<r.length;i++){var o=kt(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Oe(t,e){if(Te(t)!==Te(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function De(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(Te(t)>Te(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var Le=function(t,e){this.errorPrefix_=e,this.parts_=ke(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=V(this.parts_[n]);je(this)};function je(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Me(t))}function Me(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var Fe,qe=(r(Ue,Fe=ve),Ue.getInstance=function(){return new Ue},Ue.prototype.getInitialEvent=function(t){return p("visible"===t,"Unknown event type: "+t),[this.visible_]},Ue);function Ue(){var t,e,n=Fe.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),n.visible_=!0,e&&document.addEventListener(e,(function(){var e=!document[t];e!==n.visible_&&(n.visible_=e,n.trigger("visible",e))}),!1),n}var Ve,We=1e3,Be=(r(He,Ve=fe),He.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_;e={r,a:t,b:e},this.log_(P(e)),p(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(e),n&&(this.requestCBHash_[r]=n)},He.prototype.get=function(t){var e=this,n=new y,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[o];void 0!==t&&i===t&&(delete e.outstandingGets_[o],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+o+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(o),n.promise},He.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),p(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),p(!this.listens.get(o).has(i),"listen() called twice for same path/queryId."),n={onComplete:r,hashFn:e,query:t,tag:n},this.listens.get(o).set(i,n),this.connected_&&this.sendListen_(n)},He.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},He.prototype.sendListen_=function(t){var e=this,n=t.query,r=n.path.toString(),i=n.queryIdentifier();this.log_("Listen on "+r+" for "+i);var o={p:r};t.tag&&(o.q=n.queryObject(),o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,(function(o){var a=o.d,s=o.s;He.warnOnListenWarnings_(a,n),(e.listens.get(r)&&e.listens.get(r).get(i))===t&&(e.log_("listen response",o),"ok"!==s&&e.removeListen_(r,i),t.onComplete&&t.onComplete(s,a))}))},He.warnOnListenWarnings_=function(t,e){t&&"object"==typeof t&&x(t,"w")&&(t=R(t,"w"),Array.isArray(t)&&~t.indexOf("no_index")&&(t='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',e=e.path.toString(),Tt("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+t+" at "+e+" to your security rules for better performance.")))},He.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},He.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||function(t){return"object"==typeof(t=A(t).claims)&&!0===t.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},He.prototype.tryAuth=function(){var t,e,n,r=this;this.connected_&&this.authToken_&&(e=function(t){return!!(t=A(t).claims)&&"object"==typeof t&&t.hasOwnProperty("iat")}(t=this.authToken_)?"auth":"gauth",n={cred:t},null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(e,n,(function(e){var n=e.s;e=e.d||"error",r.authToken_===t&&("ok"===n?r.invalidAuthTokenCount_=0:r.onAuthRevoked_(n,e))})))},He.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),p(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},He.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e),t={p:t},r&&(t.q=n,t.t=r),this.sendRequest("n",t)},He.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},He.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},He.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},He.prototype.sendOnDisconnect_=function(t,e,n,r){n={p:e,d:n},this.log_("onDisconnect "+t,n),this.sendRequest(t,n,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},He.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},He.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},He.prototype.putInternal=function(t,e,n,r,i){n={p:e,d:n},void 0!==i&&(n.h=i),this.outstandingPuts_.push({action:t,request:n,onComplete:r}),this.outstandingPutCount_++,r=this.outstandingPuts_.length-1,this.connected_?this.sendPut_(r):this.log_("Buffering put: "+e)},He.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},He.prototype.reportStats=function(t){var e=this;this.connected_&&(t={c:t},this.log_("reportStats",t),this.sendRequest("s",t,(function(t){"ok"!==t.s&&(t=t.d,e.log_("reportStats","Error sending stats: "+t))})))},He.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+P(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},He.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):ut("Unrecognized action received from server: "+P(t)+"\nAre you using the latest client?")},He.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},He.prototype.scheduleConnect_=function(t){var e=this;p(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},He.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=We,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},He.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=We,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},He.prototype.onRealtimeDisconnect_=function(){var t;this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()&&(this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=We),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime()),t=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-t),t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)),this.onConnectStatus_(!1)},He.prototype.establishConnection_=function(){var t,e,n,r,i,o,a,s,u,c,l=this;this.shouldReconnect_()&&(this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),e=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+He.nextConnectionId_++,o=(i=this).lastSessionId,a=!1,s=null,u=function(){s?s.close():(a=!0,n())},this.realtime_={close:u,sendRequest:function(t){p(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(t)}},c=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(c).then((function(u){a?wt("getToken() completed but was canceled"):(wt("getToken() completed. Creating connection."),i.authToken_=u&&u.accessToken,s=new he(r,i.repoInfo_,i.applicationId_,t,e,n,(function(t){Tt(t+" ("+i.repoInfo_.toString()+")"),i.interrupt("server_kill")}),o))})).then(null,(function(t){i.log_("Failed to get token: "+t),a||(l.repoInfo_.nodeAdmin&&Tt(t),u())})))},He.prototype.interrupt=function(t){wt("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},He.prototype.resume=function(t){wt("Resuming connection for reason: "+t),delete this.interruptReasons_[t],O(this.interruptReasons_)&&(this.reconnectDelay_=We,this.realtime_||this.scheduleConnect_(0))},He.prototype.handleTimestamp_=function(t){t-=(new Date).getTime(),this.onServerInfoUpdate_({serverTimeOffset:t})},He.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},He.prototype.onListenRevoked_=function(t,e){e=e?e.map((function(t){return Nt(t)})).join("$"):"default",(e=this.removeListen_(t,e))&&e.onComplete&&e.onComplete("permission_denied")},He.prototype.removeListen_=function(t,e){var n,r=new be(t).toString();return this.listens.has(r)?(n=(t=this.listens.get(r)).get(e),t.delete(e),0===t.size&&this.listens.delete(r)):n=void 0,n},He.prototype.onAuthRevoked_=function(t,e){wt("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},He.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},He.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=s(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var u=(n=void 0,s(a.values())),c=u.next();!c.done;c=u.next()){var l=c.value;this.sendListen_(l)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var d=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(d.action,d.pathString,d.data,d.onComplete)}for(h=0;h<this.outstandingGets_.length;h++)this.outstandingGets_[h]&&this.sendGet_(h)},He.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+ie.replace(/\./g,"-")]=1,b()?t["framework.cordova"]=1:"object"==typeof navigator&&"ReactNative"===navigator.product&&(t["framework.reactnative"]=1),this.reportStats(t)},He.prototype.shouldReconnect_=function(){var t=ye.getInstance().currentlyOnline();return O(this.interruptReasons_)&&t},He.nextPersistentConnectionId_=0,He.nextConnectionId_=0,He);function He(t,e,n,r,i,o,a){var s=Ve.call(this)||this;if(s.repoInfo_=t,s.applicationId_=e,s.onDataUpdate_=n,s.onConnectStatus_=r,s.onServerInfoUpdate_=i,s.authTokenProvider_=o,s.authOverride_=a,s.id=He.nextPersistentConnectionId_++,s.log_=It("p:"+s.id+":"),s.interruptReasons_={},s.listens=new Map,s.outstandingPuts_=[],s.outstandingGets_=[],s.outstandingPutCount_=0,s.outstandingGetCount_=0,s.onDisconnectRequestQueue_=[],s.connected_=!1,s.reconnectDelay_=We,s.maxReconnectDelay_=3e5,s.securityDebugCallback_=null,s.lastSessionId=null,s.establishConnectionTimer_=null,s.visible_=!1,s.requestCBHash_={},s.requestNumber_=0,s.realtime_=null,s.authToken_=null,s.forceTokenRefresh_=!1,s.invalidAuthTokenCount_=0,s.firstConnection_=!0,s.lastConnectionAttemptTime_=null,s.lastConnectionEstablishedTime_=null,a&&!w())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return s.scheduleConnect_(0),qe.getInstance().on("visible",s.onVisible_,s),-1===t.host.indexOf("fblocal")&&ye.getInstance().on("online",s.onOnline_,s),s}var Ke=(ze.Wrap=function(t,e){return new ze(t,e)},ze);function ze(t,e){this.name=t,this.node=e}var Ge,Qe,Ye=($e.prototype.getCompare=function(){return this.compare.bind(this)},$e.prototype.indexedValueChanged=function(t,e){return t=new Ke(St,t),e=new Ke(St,e),0!==this.compare(t,e)},$e.prototype.minPost=function(){return Ke.MIN},$e);function $e(){}function Xe(){return null!==Qe&&Qe.apply(this,arguments)||this}var Je=new(r(Xe,Qe=Ye),Object.defineProperty(Xe,"__EMPTY_NODE",{get:function(){return Ge},set:function(t){Ge=t},enumerable:!1,configurable:!0}),Xe.prototype.compare=function(t,e){return kt(t.name,e.name)},Xe.prototype.isDefinedOn=function(t){throw v("KeyIndex.isDefinedOn not expected to be called.")},Xe.prototype.indexedValueChanged=function(t,e){return!1},Xe.prototype.minPost=function(){return Ke.MIN},Xe.prototype.maxPost=function(){return new Ke(Ct,Ge)},Xe.prototype.makePost=function(t,e){return p("string"==typeof t,"KeyIndex indexValue must always be a string."),new Ke(t,Ge)},Xe.prototype.toString=function(){return".key"},tt=Xe),Ze=(tn.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_.pop(),e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value};if(this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},tn.prototype.hasNext=function(){return 0<this.nodeStack_.length},tn.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},tn);function tn(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}var en=(nn.prototype.copy=function(t,e,n,r,i){return new nn(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},nn.prototype.count=function(){return this.left.count()+1+this.right.count()},nn.prototype.isEmpty=function(){return!1},nn.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},nn.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},nn.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},nn.prototype.minKey=function(){return this.min_().key},nn.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},nn.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},nn.prototype.removeMin_=function(){if(this.left.isEmpty())return an.EMPTY_NODE;var t=this;return(t=(t=t.left.isRed_()||t.left.left.isRed_()?t:t.moveRedLeft_()).copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},nn.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r=(r=r.left.isEmpty()||r.left.isRed_()||r.left.left.isRed_()?r:r.moveRedLeft_()).copy(null,null,null,r.left.remove(t,e),null);else{if(0===e(t,(r=(r=r.left.isRed_()?r.rotateRight_():r).right.isEmpty()||r.right.isRed_()||r.right.left.isRed_()?r:r.moveRedRight_()).key)){if(r.right.isEmpty())return an.EMPTY_NODE;n=r.right.min_(),r=r.copy(n.key,n.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp_()},nn.prototype.isRed_=function(){return this.color},nn.prototype.fixUp_=function(){var t=this;return(t=(t=t.right.isRed_()&&!t.left.isRed_()?t.rotateLeft_():t).left.isRed_()&&t.left.left.isRed_()?t.rotateRight_():t).left.isRed_()&&t.right.isRed_()?t.colorFlip_():t},nn.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()?(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_():t},nn.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()?(t=t.rotateRight_()).colorFlip_():t},nn.prototype.rotateLeft_=function(){var t=this.copy(null,null,nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},nn.prototype.rotateRight_=function(){var t=this.copy(null,null,nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},nn.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},nn.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},nn.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},nn.RED=!0,nn.BLACK=!1,nn);function nn(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:nn.RED,this.left=null!=r?r:an.EMPTY_NODE,this.right=null!=i?i:an.EMPTY_NODE}function rn(){}rn.prototype.copy=function(t,e,n,r,i){return this},rn.prototype.insert=function(t,e,n){return new en(t,e,null)},rn.prototype.remove=function(t,e){return this},rn.prototype.count=function(){return 0},rn.prototype.isEmpty=function(){return!0},rn.prototype.inorderTraversal=function(t){return!1},rn.prototype.reverseTraversal=function(t){return!1},rn.prototype.minKey=function(){return null},rn.prototype.maxKey=function(){return null},rn.prototype.check_=function(){return 0},rn.prototype.isRed_=function(){return!1},ve=rn;var on,an=(sn.prototype.insert=function(t,e){return new sn(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,en.BLACK,null,null))},sn.prototype.remove=function(t){return new sn(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,en.BLACK,null,null))},sn.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},sn.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},sn.prototype.isEmpty=function(){return this.root_.isEmpty()},sn.prototype.count=function(){return this.root_.count()},sn.prototype.minKey=function(){return this.root_.minKey()},sn.prototype.maxKey=function(){return this.root_.maxKey()},sn.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},sn.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},sn.prototype.getIterator=function(t){return new Ze(this.root_,null,this.comparator_,!1,t)},sn.prototype.getIteratorFrom=function(t,e){return new Ze(this.root_,t,this.comparator_,!1,e)},sn.prototype.getReverseIteratorFrom=function(t,e){return new Ze(this.root_,t,this.comparator_,!0,e)},sn.prototype.getReverseIterator=function(t){return new Ze(this.root_,null,this.comparator_,!0,t)},sn.EMPTY_NODE=new ve,sn);function sn(t,e){void 0===e&&(e=sn.EMPTY_NODE),this.comparator_=t,this.root_=e}function un(t,e){return kt(t.name,e.name)}function cn(t,e){return kt(t,e)}function ln(t){return"number"==typeof t?"number:"+At(t):"string:"+t}var hn,dn,fn,pn,vn=function(t){var e;t.isLeafNode()?(e=t.val(),p("string"==typeof e||"number"==typeof e||"object"==typeof e&&x(e,".sv"),"Priority must be a string or number.")):p(t===on||t.isEmpty(),"priority of unexpected type."),p(t===on||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},gn=(Object.defineProperty(mn,"__childrenNodeConstructor",{get:function(){return hn},set:function(t){hn=t},enumerable:!1,configurable:!0}),mn.prototype.isLeafNode=function(){return!0},mn.prototype.getPriority=function(){return this.priorityNode_},mn.prototype.updatePriority=function(t){return new mn(this.value_,t)},mn.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:mn.__childrenNodeConstructor.EMPTY_NODE},mn.prototype.getChild=function(t){return Ae(t)?this:".priority"===Ee(t)?this.priorityNode_:mn.__childrenNodeConstructor.EMPTY_NODE},mn.prototype.hasChild=function(){return!1},mn.prototype.getPredecessorChildName=function(t,e){return null},mn.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:mn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},mn.prototype.updateChild=function(t,e){var n=Ee(t);return null===n?e:e.isEmpty()&&".priority"!==n?this:(p(".priority"!==n||1===Te(t),".priority must be the last token in a path"),this.updateImmediateChild(n,mn.__childrenNodeConstructor.EMPTY_NODE.updateChild(Se(t),e)))},mn.prototype.isEmpty=function(){return!1},mn.prototype.numChildren=function(){return 0},mn.prototype.forEachChild=function(t,e){return!1},mn.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},mn.prototype.hash=function(){var t,e;return null===this.lazyHash_&&(t="",this.priorityNode_.isEmpty()||(t+="priority:"+ln(this.priorityNode_.val())+":"),t+=(e=typeof this.value_)+":",t+="number"==e?At(this.value_):this.value_,this.lazyHash_=at(t)),this.lazyHash_},mn.prototype.getValue=function(){return this.value_},mn.prototype.compareTo=function(t){return t===mn.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof mn.__childrenNodeConstructor?-1:(p(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},mn.prototype.compareToLeafNode_=function(t){var e=typeof t.value_,n=typeof this.value_,r=mn.VALUE_TYPE_ORDER.indexOf(e),i=mn.VALUE_TYPE_ORDER.indexOf(n);return p(0<=r,"Unknown leaf type: "+e),p(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},mn.prototype.withIndex=function(){return this},mn.prototype.isIndexed=function(){return!0},mn.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},mn.VALUE_TYPE_ORDER=["object","boolean","number","string"],mn);function mn(t,e){void 0===e&&(e=mn.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,p(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),vn(this.priorityNode_)}function yn(){return null!==pn&&pn.apply(this,arguments)||this}var _n=new(r(yn,pn=Ye),yn.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority();return 0===(r=n.compareTo(r))?kt(t.name,e.name):r},yn.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},yn.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},yn.prototype.minPost=function(){return Ke.MIN},yn.prototype.maxPost=function(){return new Ke(Ct,new gn("[PRIORITY-POST]",fn))},yn.prototype.makePost=function(t,e){return t=dn(t),new Ke(e,new gn("[PRIORITY-POST]",t))},yn.prototype.toString=function(){return".priority"},yn),bn=Math.log(2),wn=(In.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},In);function In(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/bn,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}var En,Tn,Sn=function(t,e,n,r){t.sort(e);var i=function(e,r){if(0==(o=r-e))return null;if(1==o)return a=t[e],s=n?n(a):a,new en(s,a.node,en.BLACK,null,null);var o=parseInt(o/2,10)+e,a=(e=i(e,o),r=i(o+1,r),t[o]),s=n?n(a):a;return new en(s,a.node,en.BLACK,e,r)},o=function(e){for(var r=null,o=null,a=t.length,s=function(e,r){var o=a-e,s=a;a-=e,e=i(1+o,s),s=t[o],o=n?n(s):s,u(new en(o,s.node,r,null,e))},u=function(t){r=r?r.left=t:o=t},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?s(h,en.BLACK):(s(h,en.BLACK),s(h,en.RED))}return o}(new wn(t.length));return new an(r||e,o)},Cn={},kn=(Object.defineProperty(Nn,"Default",{get:function(){return p(_n,"ChildrenNode.ts has not been loaded"),En=En||new Nn({".priority":Cn},{".priority":_n})},enumerable:!1,configurable:!0}),Nn.prototype.get=function(t){var e=R(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof an?e:null},Nn.prototype.hasIndex=function(t){return x(this.indexSet_,t.toString())},Nn.prototype.addIndex=function(t,e){p(t!==Je,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n=[],r=!1,o=e.getIterator(Ke.Wrap),a=o.getNext();a;)r=r||t.isDefinedOn(a.node),n.push(a),a=o.getNext();var s=r?Sn(n,t.getCompare()):Cn,u=t.toString(),c=i({},this.indexSet_);return c[u]=t,(e=i({},this.indexes_))[u]=s,new Nn(e,c)},Nn.prototype.addToIndexes=function(t,e){var n=this;return new Nn(D(this.indexes_,(function(r,i){var o=R(n.indexSet_,i);if(p(o,"Missing index implementation for "+i),r===Cn){if(o.isDefinedOn(t.node)){for(var a=[],s=e.getIterator(Ke.Wrap),u=s.getNext();u;)u.name!==t.name&&a.push(u),u=s.getNext();return a.push(t),Sn(a,o.getCompare())}return Cn}return(r=(o=e.get(t.name))?r.remove(new Ke(t.name,o)):r).insert(t,t.node)})),this.indexSet_)},Nn.prototype.removeFromIndexes=function(t,e){return new Nn(D(this.indexes_,(function(n){if(n===Cn)return n;var r=e.get(t.name);return r?n.remove(new Ke(t.name,r)):n})),this.indexSet_)},Nn);function Nn(t,e){this.indexes_=t,this.indexSet_=e}var Pn,An=(Object.defineProperty(xn,"EMPTY_NODE",{get:function(){return Tn=Tn||new xn(new an(cn),null,kn.Default)},enumerable:!1,configurable:!0}),xn.prototype.isLeafNode=function(){return!1},xn.prototype.getPriority=function(){return this.priorityNode_||Tn},xn.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new xn(this.children_,t,this.indexMap_)},xn.prototype.getImmediateChild=function(t){return".priority"===t?this.getPriority():null===(t=this.children_.get(t))?Tn:t},xn.prototype.getChild=function(t){var e=Ee(t);return null===e?this:this.getImmediateChild(e).getChild(Se(t))},xn.prototype.hasChild=function(t){return null!==this.children_.get(t)},xn.prototype.updateImmediateChild=function(t,e){if(p(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n,r=new Ke(t,e),i=void 0;return n=e.isEmpty()?(i=this.children_.remove(t),this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,e),this.indexMap_.addToIndexes(r,this.children_)),r=i.isEmpty()?Tn:this.priorityNode_,new xn(i,r,n)},xn.prototype.updateChild=function(t,e){var n=Ee(t);return null===n?e:(p(".priority"!==Ee(t)||1===Te(t),".priority must be the last token in a path"),e=this.getImmediateChild(n).updateChild(Se(t),e),this.updateImmediateChild(n,e))},xn.prototype.isEmpty=function(){return this.children_.isEmpty()},xn.prototype.numChildren=function(){return this.children_.count()},xn.prototype.val=function(t){if(this.isEmpty())return null;var e={},n=0,r=0,i=!0;if(this.forEachChild(_n,(function(o,a){e[o]=a.val(t),n++,i&&xn.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1})),!t&&i&&r<2*n){var o,a=[];for(o in e)a[o]=e[o];return a}return t&&!this.getPriority().isEmpty()&&(e[".priority"]=this.getPriority().val()),e},xn.prototype.hash=function(){var t;return null===this.lazyHash_&&(t="",this.getPriority().isEmpty()||(t+="priority:"+ln(this.getPriority().val())+":"),this.forEachChild(_n,(function(e,n){""!==(n=n.hash())&&(t+=":"+e+":"+n)})),this.lazyHash_=""===t?"":at(t)),this.lazyHash_},xn.prototype.getPredecessorChildName=function(t,e,n){return(n=this.resolveIndex_(n))?(e=n.getPredecessorKey(new Ke(t,e)))?e.name:null:this.children_.getPredecessorKey(t)},xn.prototype.getFirstChildName=function(t){return(t=this.resolveIndex_(t))?(t=t.minKey())&&t.name:this.children_.minKey()},xn.prototype.getFirstChild=function(t){return(t=this.getFirstChildName(t))?new Ke(t,this.children_.get(t)):null},xn.prototype.getLastChildName=function(t){return(t=this.resolveIndex_(t))?(t=t.maxKey())&&t.name:this.children_.maxKey()},xn.prototype.getLastChild=function(t){return(t=this.getLastChildName(t))?new Ke(t,this.children_.get(t)):null},xn.prototype.forEachChild=function(t,e){return(t=this.resolveIndex_(t))?t.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},xn.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},xn.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,Ke.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},xn.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},xn.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,Ke.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},xn.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===On?-1:0},xn.prototype.withIndex=function(t){return t===Je||this.indexMap_.hasIndex(t)?this:(t=this.indexMap_.addIndex(t,this.children_),new xn(this.children_,this.priorityNode_,t))},xn.prototype.isIndexed=function(t){return t===Je||this.indexMap_.hasIndex(t)},xn.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()!==t.children_.count())return!1;for(var e=this.getIterator(_n),n=t.getIterator(_n),r=e.getNext(),i=n.getNext();r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1},xn.prototype.resolveIndex_=function(t){return t===Je?null:this.indexMap_.get(t.toString())},xn.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,xn);function xn(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&vn(this.priorityNode_),this.children_.isEmpty()&&p(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function Rn(){return Pn.call(this,new an(cn),An.EMPTY_NODE,kn.Default)||this}var On=new(r(Rn,Pn=An),Rn.prototype.compareTo=function(t){return t===this?0:1},Rn.prototype.equals=function(t){return t===this},Rn.prototype.getPriority=function(){return this},Rn.prototype.getImmediateChild=function(t){return An.EMPTY_NODE},Rn.prototype.isEmpty=function(){return!1},Rn);Object.defineProperties(Ke,{MIN:{value:new Ke(St,An.EMPTY_NODE)},MAX:{value:new Ke(Ct,On)}}),tt.__EMPTY_NODE=An.EMPTY_NODE,gn.__childrenNodeConstructor=An,on=On,fn=On;function Dn(t,e){if(void 0===e&&(e=null),null===t)return An.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),p(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new gn(t,Dn(e));if(t instanceof Array){var n=An.EMPTY_NODE;return Pt(t,(function(e,r){x(t,e)&&"."!==e.substring(0,1)&&(!(r=Dn(r)).isLeafNode()&&r.isEmpty()||(n=n.updateImmediateChild(e,r)))})),n.updatePriority(Dn(e))}var r=[],i=!1;if(Pt(t,(function(t,e){"."!==t.substring(0,1)&&((e=Dn(e)).isEmpty()||(i=i||!e.getPriority().isEmpty(),r.push(new Ke(t,e))))})),0===r.length)return An.EMPTY_NODE;var o=Sn(r,un,(function(t){return t.name}),cn);if(i){var a=Sn(r,_n.getCompare());return new An(o,Dn(e),new kn({".priority":a},{".priority":_n}))}return new An(o,Dn(e),kn.Default)}dn=Dn;var Ln,jn,Mn=(r(Fn,Ln=Ye),Fn.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},Fn.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},Fn.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node);return 0===(r=n.compareTo(r))?kt(t.name,e.name):r},Fn.prototype.makePost=function(t,e){return t=Dn(t),t=An.EMPTY_NODE.updateChild(this.indexPath_,t),new Ke(e,t)},Fn.prototype.maxPost=function(){var t=An.EMPTY_NODE.updateChild(this.indexPath_,On);return new Ke(Ct,t)},Fn.prototype.toString=function(){return ke(this.indexPath_,0).join("/")},Fn);function Fn(t){var e=Ln.call(this)||this;return e.indexPath_=t,p(!Ae(t)&&".priority"!==Ee(t),"Can't create PathIndex with empty path or .priority key"),e}function qn(){return null!==jn&&jn.apply(this,arguments)||this}function Un(t){if(t===""+Dt)return"-";var e=Lt(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;0<=i&&"z"===n[i];)i--;return-1===i?Ct:(e=n[i],e=Kn.charAt(Kn.indexOf(e)+1),n[i]=e,n.slice(0,i+1).join(""))}function Vn(t){if(t===""+Ot)return St;var e=Lt(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?""+Dt:(delete n[n.length-1],n.join("")):(n[n.length-1]=Kn.charAt(Kn.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))}var Wn,Bn,Hn=new(r(qn,jn=Ye),qn.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?kt(t.name,e.name):n},qn.prototype.isDefinedOn=function(t){return!0},qn.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},qn.prototype.minPost=function(){return Ke.MIN},qn.prototype.maxPost=function(){return Ke.MAX},qn.prototype.makePost=function(t,e){return t=Dn(t),new Ke(e,t)},qn.prototype.toString=function(){return".value"},qn),Kn="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",zn=(Wn=0,Bn=[],function(t){var e=t===Wn;Wn=t;for(var n=new Array(8),r=7;0<=r;r--)n[r]=Kn.charAt(t%64),t=Math.floor(t/64);p(0===t,"Cannot push at time == 0");var i=n.join("");if(e){for(r=11;0<=r&&63===Bn[r];r--)Bn[r]=0;Bn[r]++}else for(r=0;r<12;r++)Bn[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)i+=Kn.charAt(Bn[r]);return p(20===i.length,"nextPushId: Length should be 20."),i});function Gn(t){return{type:"value",snapshotNode:t}}function Qn(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Yn(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function $n(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var Xn=(Jn.prototype.updateChild=function(t,e,n,r,i,o){p(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(Yn(e,a)):p(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Qn(e,n)):o.trackChildChange($n(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},Jn.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(_n,(function(t,r){e.hasChild(t)||n.trackChildChange(Yn(t,r))})),e.isLeafNode()||e.forEachChild(_n,(function(e,r){var i;t.hasChild(e)?(i=t.getImmediateChild(e)).equals(r)||n.trackChildChange($n(e,r,i)):n.trackChildChange(Qn(e,r))}))),e.withIndex(this.index_)},Jn.prototype.updatePriority=function(t,e){return t.isEmpty()?An.EMPTY_NODE:t.updatePriority(e)},Jn.prototype.filtersNodes=function(){return!1},Jn.prototype.getIndexedFilter=function(){return this},Jn.prototype.getIndex=function(){return this.index_},Jn);function Jn(t){this.index_=t}var Zn=(tr.prototype.getStartPost=function(){return this.startPost_},tr.prototype.getEndPost=function(){return this.endPost_},tr.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},tr.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Ke(e,n))||(n=An.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},tr.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=An.EMPTY_NODE);var r=(r=e.withIndex(this.index_)).updatePriority(An.EMPTY_NODE),i=this;return e.forEachChild(_n,(function(t,e){i.matches(new Ke(t,e))||(r=r.updateImmediateChild(t,An.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},tr.prototype.updatePriority=function(t,e){return t},tr.prototype.filtersNodes=function(){return!0},tr.prototype.getIndexedFilter=function(){return this.indexedFilter_},tr.prototype.getIndex=function(){return this.index_},tr.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},tr.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},tr);function tr(t){this.indexedFilter_=new Xn(t.getIndex()),this.index_=t.getIndex(),this.startPost_=tr.getStartPost_(t),this.endPost_=tr.getEndPost_(t)}var er=(nr.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Ke(e,n))||(n=An.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},nr.prototype.updateFullNode=function(t,e,n){if(e.isLeafNode()||e.isEmpty())r=An.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){var r=An.EMPTY_NODE.withIndex(this.index_),i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(An.EMPTY_NODE);var s,u=void 0,c=void 0,l=void 0;i=void 0,l=this.reverse_?(i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost(),s=this.index_.getCompare(),function(t,e){return s(e,t)}):(i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),this.index_.getCompare()),o=0;for(var h=!1;i.hasNext();)a=i.getNext(),(h=!h&&l(u,a)<=0||h)&&o<this.limit_&&l(a,c)<=0?o++:r=r.updateImmediateChild(a.name,An.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},nr.prototype.updatePriority=function(t,e){return t},nr.prototype.filtersNodes=function(){return!0},nr.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},nr.prototype.getIndex=function(){return this.index_},nr.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o,a;a=this.reverse_?(o=this.index_.getCompare(),function(t,e){return o(e,t)}):this.index_.getCompare();var s=t;p(s.numChildren()===this.limit_,"");var u=new Ke(e,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(e)){for(var h=s.getImmediateChild(e),d=r.getChildAfterChild(this.index_,c,this.reverse_);null!=d&&(d.name===e||s.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var f=null==d?1:a(d,u);return l&&!n.isEmpty()&&0<=f?(null!=i&&i.trackChildChange($n(e,n,h)),s.updateImmediateChild(e,n)):(null!=i&&i.trackChildChange(Yn(e,h)),h=s.updateImmediateChild(e,An.EMPTY_NODE),null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(Qn(d.name,d.node)),h.updateImmediateChild(d.name,d.node)):h)}return!n.isEmpty()&&l&&0<=a(c,u)?(null!=i&&(i.trackChildChange(Yn(c.name,c.node)),i.trackChildChange(Qn(e,n))),s.updateImmediateChild(e,n).updateImmediateChild(c.name,An.EMPTY_NODE)):t},nr);function nr(t){this.rangedFilter_=new Zn(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}var rr=(ir.prototype.hasStart=function(){return this.startSet_},ir.prototype.hasStartAfter=function(){return this.startAfterSet_},ir.prototype.hasEndBefore=function(){return this.endBeforeSet_},ir.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},ir.prototype.getIndexStartValue=function(){return p(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},ir.prototype.getIndexStartName=function(){return p(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:St},ir.prototype.hasEnd=function(){return this.endSet_},ir.prototype.getIndexEndValue=function(){return p(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},ir.prototype.getIndexEndName=function(){return p(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ct},ir.prototype.hasLimit=function(){return this.limitSet_},ir.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},ir.prototype.getLimit=function(){return p(this.limitSet_,"Only valid if limit has been set"),this.limit_},ir.prototype.getIndex=function(){return this.index_},ir.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},ir.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===_n},ir.prototype.copy=function(){var t=new ir;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},ir);function ir(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=_n}function or(t,e,n){return(t=t.copy()).startSet_=!0,void 0===e&&(e=null),t.indexStartValue_=e,null!=n?(t.startNameSet_=!0,t.indexStartName_=n):(t.startNameSet_=!1,t.indexStartName_=""),t}function ar(t,e,n){return(t=t.copy()).endSet_=!0,void 0===e&&(e=null),t.indexEndValue_=e,void 0!==n?(t.endNameSet_=!0,t.indexEndName_=n):(t.endNameSet_=!1,t.indexEndName_=""),t}function sr(t,e){return(t=t.copy()).index_=e,t}function ur(t){var e,n={};return t.isDefault()||(e=t.index_===_n?"$priority":t.index_===Hn?"$value":t.index_===Je?"$key":(p(t.index_ instanceof Mn,"Unrecognized index type!"),t.index_.toString()),n.orderBy=P(e),t.startSet_&&(n.startAt=P(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+P(t.indexStartName_))),t.endSet_&&(n.endAt=P(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+P(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}var cr,lr=(r(hr,cr=fe),hr.prototype.reportStats=function(t){throw new Error("Method not implemented.")},hr.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(p(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},hr.prototype.listen=function(t,e,n,r){var i=this,o=t.path.toString();this.log_("Listen called for "+o+" "+t.queryIdentifier());var a=hr.getListenId_(t,n),s={};this.listens_[a]=s,t=ur(t.getQueryParams()),this.restRequest_(o+".json",t,(function(t,e){null===(t=404===t?e=null:t)&&i.onDataUpdate_(o,e,!1,n),R(i.listens_,a)===s&&r(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},hr.prototype.unlisten=function(t,e){e=hr.getListenId_(t,e),delete this.listens_[e]},hr.prototype.get=function(t){var e=this,n=ur(t.getQueryParams()),r=t.path.toString(),i=new y;return this.restRequest_(r+".json",n,(function(t,n){null===(t=404===t?n=null:t)?(e.onDataUpdate_(r,n,!1,null),i.resolve(n)):i.reject(new Error(n))})),i.promise},hr.prototype.refreshAuthToken=function(t){},hr.prototype.restRequest_=function(t,e,n){var r=this;(e=void 0===e?{}:e).format="export",this.authTokenProvider_.getToken(!1).then((function(i){(i=i&&i.accessToken)&&(e.auth=i);var o=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+function(t){for(var e=[],n=0,r=Object.entries(t);n<r.length;n++){var i=r[n];!function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}(i[0],i[1])}return e.length?"&"+e.join("&"):""}(e);r.log_("Sending REST request for "+o);var a=new XMLHttpRequest;a.onreadystatechange=function(){if(n&&4===a.readyState){r.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);var t=null;if(200<=a.status&&a.status<300){try{t=N(a.responseText)}catch(t){Tt("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,t)}else 401!==a.status&&404!==a.status&&Tt("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()}))},hr);function hr(t,e,n){var r=cr.call(this)||this;return r.repoInfo_=t,r.onDataUpdate_=e,r.authTokenProvider_=n,r.log_=It("p:rest:"),r.listens_={},r}var dr=(fr.prototype.getNode=function(t){return this.rootNode_.getChild(t)},fr.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},fr);function fr(){this.rootNode_=An.EMPTY_NODE}function pr(){return{value:null,children:new Map}}function vr(t,e,n){var r;Ae(e)?(t.value=n,t.children.clear()):null!==t.value?t.value=t.value.updateChild(e,n):(r=Ee(e),t.children.has(r)||t.children.set(r,pr()),vr(t.children.get(r),e=Se(e),n))}function gr(t,e,n){var r;null!==t.value?n(e,t.value):(r=function(t,r){gr(r,new be(e.toString()+"/"+t),n)},t.children.forEach((function(t,e){r(e,t)})))}var mr=(yr.prototype.get=function(){var t=this.collection_.get(),e=i({},t);return this.last_&&Pt(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},yr);function yr(t){this.collection_=t,this.last_=null}var _r,br=(wr.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;Pt(e,(function(e,i){0<i&&x(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),xt(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},wr);function wr(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new mr(t),t=1e4+2e4*Math.random(),xt(this.reportStats_.bind(this),Math.floor(t))}function Ir(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}(fe=_r=_r||{})[fe.OVERWRITE=0]="OVERWRITE",fe[fe.MERGE=1]="MERGE",fe[fe.ACK_USER_WRITE=2]="ACK_USER_WRITE",fe[fe.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var Er=(Tr.prototype.operationForChild=function(t){if(Ae(this.path)){if(null!=this.affectedTree.value)return p(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new be(t));return new Tr(Ie(),e,this.revert)}return p(Ee(this.path)===t,"operationForChild called for unrelated child."),new Tr(Se(this.path),this.affectedTree,this.revert)},Tr);function Tr(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=_r.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}var Sr=(Cr.prototype.operationForChild=function(t){return Ae(this.path)?new Cr(this.source,Ie()):new Cr(this.source,Se(this.path))},Cr);function Cr(t,e){this.source=t,this.path=e,this.type=_r.LISTEN_COMPLETE}var kr=(Nr.prototype.operationForChild=function(t){return Ae(this.path)?new Nr(this.source,Ie(),this.snap.getImmediateChild(t)):new Nr(this.source,Se(this.path),this.snap)},Nr);function Nr(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=_r.OVERWRITE}var Pr=(Ar.prototype.operationForChild=function(t){if(Ae(this.path)){var e=this.children.subtree(new be(t));return e.isEmpty()?null:e.value?new kr(this.source,Ie(),e.value):new Ar(this.source,Ie(),e)}return p(Ee(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Ar(this.source,Se(this.path),this.children)},Ar.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},Ar);function Ar(t,e,n){this.source=t,this.path=e,this.children=n,this.type=_r.MERGE}var xr=(Rr.prototype.isFullyInitialized=function(){return this.fullyInitialized_},Rr.prototype.isFiltered=function(){return this.filtered_},Rr.prototype.isCompleteForPath=function(t){return Ae(t)?this.isFullyInitialized()&&!this.filtered_:(t=Ee(t),this.isCompleteForChild(t))},Rr.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},Rr.prototype.getNode=function(){return this.node_},Rr);function Rr(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}var Or,Dr=function(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()};function Lr(t,e,n,r,i,o){(r=r.filter((function(t){return t.type===n}))).sort((function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw v("Should only compare child_ events.");return e=new Ke(e.childName,e.snapshotNode),n=new Ke(n.childName,n.snapshotNode),t.index_.compare(e,n)}(t,e,n)})),r.forEach((function(n){var r,a,s,u=(r=t,s=o,"value"===(a=n).type||"child_removed"===a.type||(a.prevName=s.getPredecessorChildName(a.childName,a.snapshotNode,r.index_)),a);i.forEach((function(r){r.respondsTo(n.type)&&e.push(r.createEvent(u,t.query_))}))}))}function jr(t,e){return{eventCache:t,serverCache:e}}function Mr(t,e,n,r){return jr(new xr(e,n,r),t.serverCache)}function Fr(t,e,n,r){return jr(t.eventCache,new xr(e,n,r))}function qr(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ur(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Vr=(Wr.fromObject=function(t){var e=new Wr(null);return Pt(t,(function(t,n){e=e.set(new be(t),n)})),e},Wr.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},Wr.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Ie(),value:this.value};if(Ae(t))return null;var n=Ee(t),r=this.children.get(n);return null===r||null==(e=r.findRootMostMatchingPathAndValue(Se(t),e))?null:{path:Pe(new be(n),e.path),value:e.value}},Wr.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},Wr.prototype.subtree=function(t){if(Ae(t))return this;var e=Ee(t);return null!==(e=this.children.get(e))?e.subtree(Se(t)):new Wr(null)},Wr.prototype.set=function(t,e){if(Ae(t))return new Wr(e,this.children);var n=Ee(t);return e=(this.children.get(n)||new Wr(null)).set(Se(t),e),e=this.children.insert(n,e),new Wr(this.value,e)},Wr.prototype.remove=function(t){if(Ae(t))return this.children.isEmpty()?new Wr(null):new Wr(null,this.children);var e=Ee(t),n=this.children.get(e);return n?(n=n.remove(Se(t)),t=void 0,t=n.isEmpty()?this.children.remove(e):this.children.insert(e,n),null===this.value&&t.isEmpty()?new Wr(null):new Wr(this.value,t)):this},Wr.prototype.get=function(t){if(Ae(t))return this.value;var e=Ee(t);return(e=this.children.get(e))?e.get(Se(t)):null},Wr.prototype.setTree=function(t,e){if(Ae(t))return e;var n=Ee(t);return t=(this.children.get(n)||new Wr(null)).setTree(Se(t),e),e=void 0,e=t.isEmpty()?this.children.remove(n):this.children.insert(n,t),new Wr(this.value,e)},Wr.prototype.fold=function(t){return this.fold_(Ie(),t)},Wr.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(Pe(t,r),e)})),e(t,this.value,n)},Wr.prototype.findOnPath=function(t,e){return this.findOnPath_(t,Ie(),e)},Wr.prototype.findOnPath_=function(t,e,n){if(r=!!this.value&&n(e,this.value))return r;if(Ae(t))return null;var r,i=Ee(t);return(r=this.children.get(i))?r.findOnPath_(Se(t),Pe(e,i),n):null},Wr.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,Ie(),e)},Wr.prototype.foreachOnPath_=function(t,e,n){if(Ae(t))return this;this.value&&n(e,this.value);var r=Ee(t),i=this.children.get(r);return i?i.foreachOnPath_(Se(t),Pe(e,r),n):new Wr(null)},Wr.prototype.foreach=function(t){this.foreach_(Ie(),t)},Wr.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(Pe(t,n),e)})),this.value&&e(t,this.value)},Wr.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},Wr);function Wr(t,e){void 0===e&&(e=Or=Or||new an(lt)),this.value=t,this.children=e}var Br=(Hr.empty=function(){return new Hr(new Vr(null))},Hr);function Hr(t){this.writeTree_=t}function Kr(t,e,n){if(Ae(e))return new Br(new Vr(n));if(null!=(o=t.writeTree_.findRootMostValueAndPath(e))){var r=o.path,i=o.value,o=xe(r,e);return i=i.updateChild(o,n),new Br(t.writeTree_.set(r,i))}return n=new Vr(n),n=t.writeTree_.setTree(e,n),new Br(n)}function zr(t,e,n){var r=t;return Pt(n,(function(t,n){r=Kr(r,Pe(e,t),n)})),r}function Gr(t,e){return Ae(e)?Br.empty():(e=t.writeTree_.setTree(e,new Vr(null)),new Br(e))}function Qr(t,e){return null!=Yr(t,e)}function Yr(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(xe(n.path,e)):null}function $r(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(_n,(function(t,n){e.push(new Ke(t,n))})):t.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new Ke(t,n.value))})),e}function Xr(t,e){if(Ae(e))return t;var n=Yr(t,e);return new Br(null!=n?new Vr(n):t.writeTree_.subtree(e))}function Jr(t){return t.writeTree_.isEmpty()}function Zr(t,e){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal((function(n,o){".priority"===n?(p(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=t(Pe(e,n),o,r)})),r=r.getChild(e).isEmpty()||null===i?r:r.updateChild(Pe(e,".priority"),i)}(Ie(),t.writeTree_,e)}function ti(t,e){return li(e,t)}function ei(t){return t.visible}function ni(t,e,n){for(var r=Br.empty(),i=0;i<t.length;++i){var o=t[i];if(e(o)){var a=o.path,s=void 0;if(o.snap)De(n,a)?r=Kr(r,s=xe(n,a),o.snap):De(a,n)&&(s=xe(a,n),r=Kr(r,Ie(),o.snap.getChild(s)));else{if(!o.children)throw v("WriteRecord should have .snap or .children");De(n,a)?r=zr(r,s=xe(n,a),o.children):De(a,n)&&(Ae(s=xe(a,n))?r=zr(r,Ie(),o.children):(o=R(o.children,Ee(s)))&&(s=o.getChild(Se(s)),r=Kr(r,Ie(),s)))}}}return r}function ri(t,e,n,r,i){if(r||i){var o=Xr(t.visibleWrites,e);return!i&&Jr(o)?n:i||null!=n||Qr(o,Ie())?Zr(ni(t.allWrites,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(De(t.path,e)||De(e,t.path))}),e),n||An.EMPTY_NODE):null}return null!=(o=Yr(t.visibleWrites,e))?o:Jr(t=Xr(t.visibleWrites,e))?n:null!=n||Qr(t,Ie())?Zr(t,n||An.EMPTY_NODE):null}function ii(t,e,n,r){return ri(t.writeTree,t.treePath,e,n,r)}function oi(t,e){return function(t,e,n){var r=An.EMPTY_NODE,i=Yr(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(_n,(function(t,e){r=r.updateImmediateChild(t,e)})),r;if(n){var o=Xr(t.visibleWrites,e);return n.forEachChild(_n,(function(t,e){e=Zr(Xr(o,new be(t)),e),r=r.updateImmediateChild(t,e)})),$r(o).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}return $r(Xr(t.visibleWrites,e)).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}(t.writeTree,t.treePath,e)}function ai(t,e,n,r){return i=t.writeTree,t=t.treePath,e=e,r=r,p(n||r,"Either existingEventSnap or existingServerSnap must exist"),t=Pe(t,e),Qr(i.visibleWrites,t)?null:Jr(t=Xr(i.visibleWrites,t))?r.getChild(e):Zr(t,r.getChild(e));var i}function si(t,e){return n=t.writeTree,e=Pe(t.treePath,e),Yr(n.visibleWrites,e);var n}function ui(t,e,n){return r=t.writeTree,i=t.treePath,t=n,e=Pe(i,n=e),null!=(i=Yr(r.visibleWrites,e))?i:t.isCompleteForChild(n)?Zr(Xr(r.visibleWrites,e),t.getNode().getImmediateChild(n)):null;var r,i}function ci(t,e){return li(Pe(t.treePath,e),t.writeTree)}function li(t,e){return{treePath:t,writeTree:e}}var hi=(di.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;p("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),p(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,$n(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,Yn(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,Qn(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw v("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,$n(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},di.prototype.getChanges=function(){return Array.from(this.changeMap.values())},di);function di(){this.changeMap=new Map}function fi(){}var pi=new(fi.prototype.getCompleteChild=function(t){return null},fi.prototype.getChildAfterChild=function(t,e,n){return null},fi),vi=(gi.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;return e.isCompleteForChild(t)?e.getNode().getImmediateChild(t):(e=null!=this.optCompleteServerCache_?new xr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache,ui(this.writes_,t,e))},gi.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ur(this.viewCache_);return 0===(t=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,a){var s;if(null!=(e=Yr(t=Xr(t.visibleWrites,e),Ie())))s=e;else{if(null==n)return[];s=Zr(t,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var u=[],c=a.getCompare(),l=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),h=l.getNext();h&&u.length<i;)0!==c(h,r)&&u.push(h),h=l.getNext();return u}(t.writeTree,t.treePath,e,n,r,i,o)}(this.writes_,r,e,1,n,t)).length?null:t[0]},gi);function gi(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}function mi(t,e,n,r,i,o){var a=e.eventCache;if(null!=si(r,n))return e;var s,u,c,l,h,d=void 0;return h=Ae(n)?(p(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()?(s=oi(r,(s=Ur(e))instanceof An?s:An.EMPTY_NODE),t.filter.updateFullNode(e.eventCache.getNode(),s,o)):(u=ii(r,Ur(e)),t.filter.updateFullNode(e.eventCache.getNode(),u,o))):".priority"===(u=Ee(n))?(p(1===Te(n),"Can't have a priority with additional path components"),null!=(l=ai(r,n,c=a.getNode(),d=e.serverCache.getNode()))?t.filter.updatePriority(c,l):a.getNode()):(c=Se(n),l=void 0,null!=(l=a.isCompleteForChild(u)?(d=e.serverCache.getNode(),null!=(d=ai(r,n,a.getNode(),d))?a.getNode().getImmediateChild(u).updateChild(c,d):a.getNode().getImmediateChild(u)):ui(r,u,e.serverCache))?t.filter.updateChild(a.getNode(),u,l,c,i,o):a.getNode()),Mr(e,h,a.isFullyInitialized()||Ae(n),t.filter.filtersNodes())}function yi(t,e,n,r,i,o,a,s){var u=e.serverCache,c=a?t.filter:t.filter.getIndexedFilter();if(Ae(n))h=c.updateFullNode(u.getNode(),r,null);else if(c.filtersNodes()&&!u.isFiltered())var l=u.getNode().updateChild(n,r),h=c.updateFullNode(u.getNode(),l,null);else{if(a=Ee(n),!u.isCompleteForPath(n)&&1<Te(n))return e;l=Se(n),r=u.getNode().getImmediateChild(a).updateChild(l,r),h=".priority"===a?c.updatePriority(u.getNode(),r):c.updateChild(u.getNode(),a,r,l,pi,null)}return mi(t,c=Fr(e,h,u.isFullyInitialized()||Ae(n),c.filtersNodes()),n,i,new vi(i,c,o),s)}function _i(t,e,n,r,i,o,a){var s,u,c=e.eventCache,l=new vi(i,e,o);return Ae(n)?(u=t.filter.updateFullNode(e.eventCache.getNode(),r,a),Mr(e,u,!0,t.filter.filtersNodes())):".priority"===(s=Ee(n))?(u=t.filter.updatePriority(e.eventCache.getNode(),r),Mr(e,u,c.isFullyInitialized(),c.isFiltered())):(i=Se(n),o=c.getNode().getImmediateChild(s),u=void 0,u=Ae(i)?r:null!=(n=l.getCompleteChild(s))?".priority"===Ce(i)&&n.getChild(Ne(i)).isEmpty()?n:n.updateChild(i,r):An.EMPTY_NODE,o.equals(u)?e:Mr(e,t.filter.updateChild(c.getNode(),s,u,i,l,a),c.isFullyInitialized(),t.filter.filtersNodes()))}function bi(t,e){return t.eventCache.isCompleteForChild(e)}function wi(t,e,n){return n.foreach((function(t,n){e=e.updateChild(t,n)})),e}function Ii(t,e,n,r,i,o,a,s){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u=e,c=(r=Ae(n)?r:new Vr(null).setTree(n,r),e.serverCache.getNode());return r.children.inorderTraversal((function(n,r){c.hasChild(n)&&(r=wi(0,e.serverCache.getNode().getImmediateChild(n),r),u=yi(t,u,new be(n),r,i,o,a,s))})),r.children.inorderTraversal((function(n,r){var l=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;c.hasChild(n)||l||(r=wi(0,e.serverCache.getNode().getImmediateChild(n),r),u=yi(t,u,new be(n),r,i,o,a,s))})),u}var Ei,Ti=(Object.defineProperty(Si.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),Si);function Si(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new Xn(n.getIndex()),i=(o=n).loadsAllData()?new Xn(o.getIndex()):new(o.hasLimit()?er:Zn)(o);this.processor_={filter:i},t=e.serverCache,n=e.eventCache;var o=r.updateFullNode(An.EMPTY_NODE,t.getNode(),null);e=i.updateFullNode(An.EMPTY_NODE,n.getNode(),null),r=new xr(o,t.isFullyInitialized(),r.filtersNodes()),i=new xr(e,n.isFullyInitialized(),i.filtersNodes()),this.viewCache_=jr(i,r),this.eventGenerator_=new Dr(this.query_)}function Ci(t){return 0===t.eventRegistrations_.length}function ki(t,e,n){var r,i=[];if(n&&(p(null==e,"A cancel should cancel all event registrations."),r=t.query.path,t.eventRegistrations_.forEach((function(t){(t=t.createCancelEvent(n,r))&&i.push(t)}))),e){for(var o=[],a=0;a<t.eventRegistrations_.length;++a){var s=t.eventRegistrations_[a];if(s.matches(e)){if(e.hasAnyCallback()){o=o.concat(t.eventRegistrations_.slice(a+1));break}}else o.push(s)}t.eventRegistrations_=o}else t.eventRegistrations_=[];return i}function Ni(t,e,n,r){e.type===_r.MERGE&&null!==e.source.queryId&&(p(Ur(t.viewCache_),"We should always have a full cache before handling merges"),p(qr(t.viewCache_),"Missing event cache, even though we have a server cache"));var i=t.viewCache_;return e=function(t,e,n,r,i){var o,a,s,u,c,l,h,d,f=new hi;if(n.type===_r.OVERWRITE)var g=n,m=g.source.fromUser?_i(t,e,g.path,g.snap,r,i,f):(p(g.source.fromServer,"Unknown source."),o=g.source.tagged||e.serverCache.isFiltered()&&!Ae(g.path),yi(t,e,g.path,g.snap,r,i,o,f));else if(n.type===_r.MERGE){var y=n;m=y.source.fromUser?(a=t,s=e,u=y.path,g=y.children,c=r,l=i,h=f,d=s,g.foreach((function(t,e){t=Pe(u,t),bi(s,Ee(t))&&(d=_i(a,d,t,e,c,l,h))})),g.foreach((function(t,e){t=Pe(u,t),bi(s,Ee(t))||(d=_i(a,d,t,e,c,l,h))})),d):(p(y.source.fromServer,"Unknown source."),o=y.source.tagged||e.serverCache.isFiltered(),Ii(t,e,y.path,y.children,r,i,o,f))}else if(n.type===_r.ACK_USER_WRITE){var _=n;m=_.revert?function(t,e,n,r,i,o){var a;if(null!=si(r,n))return e;var s,u,c=new vi(r,e,i),l=e.eventCache.getNode();return i=void 0,Ae(n)||".priority"===Ee(n)?(u=void 0,u=e.serverCache.isFullyInitialized()?ii(r,Ur(e)):(s=e.serverCache.getNode(),p(s instanceof An,"serverChildren would be complete if leaf node"),oi(r,s)),i=t.filter.updateFullNode(l,u,o)):(null==(u=ui(r,s=Ee(n),e.serverCache))&&e.serverCache.isCompleteForChild(s)&&(u=l.getImmediateChild(s)),(i=null!=u?t.filter.updateChild(l,s,u,Se(n),c,o):e.eventCache.getNode().hasChild(s)?t.filter.updateChild(l,s,An.EMPTY_NODE,Se(n),c,o):l).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=ii(r,Ur(e))).isLeafNode()&&(i=t.filter.updateFullNode(i,a,o))),a=e.serverCache.isFullyInitialized()||null!=si(r,Ie()),Mr(e,i,a,t.filter.filtersNodes())}(t,e,_.path,r,i,f):function(t,e,n,r,i,o,a){if(null!=si(i,n))return e;var s=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(Ae(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return yi(t,e,n,u.getNode().getChild(n),i,o,s,a);if(Ae(n)){var c=new Vr(null);return u.getNode().forEachChild(Je,(function(t,e){c=c.set(new be(t),e)})),Ii(t,e,n,c,i,o,s,a)}return e}var l=new Vr(null);return r.foreach((function(t,e){var r=Pe(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))})),Ii(t,e,n,l,i,o,s,a)}(t,e,_.path,_.affectedTree,r,i,f)}else{if(n.type!==_r.LISTEN_COMPLETE)throw v("Unknown operation type: "+n.type);o=t,_=e,i=n.path,t=r,n=f,m=mi(o,r=Fr(_,(r=_.serverCache).getNode(),r.isFullyInitialized()||Ae(i),r.isFiltered()),i,t,pi,n)}return function(t,e,n){var r,i,o=e.eventCache;o.isFullyInitialized()&&(r=o.getNode().isLeafNode()||o.getNode().isEmpty(),i=qr(t),(0<n.length||!t.eventCache.isFullyInitialized()||r&&!o.getNode().equals(i)||!o.getNode().getPriority().equals(i.getPriority()))&&n.push(Gn(qr(e))))}(e,m,f=f.getChanges()),{viewCache:m,changes:f}}(t.processor_,i,e,n,r),n=t.processor_,r=e.viewCache,p(r.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),p(r.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed"),p(e.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=e.viewCache,Pi(t,e.changes,e.viewCache.eventCache.getNode(),null)}function Pi(t,e,n,r){return r=r?[r]:t.eventRegistrations_,function(t,e,n,r){var i=[],o=[];return e.forEach((function(e){var n;"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push((n=e.childName,{type:"child_moved",snapshotNode:e.snapshotNode,childName:n}))})),Lr(t,i,"child_removed",e,r,n),Lr(t,i,"child_added",e,r,n),Lr(t,i,"child_moved",o,r,n),Lr(t,i,"child_changed",e,r,n),Lr(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r)}var Ai=function(){this.views=new Map};function xi(t,e,n,r){var i,o,a=e.source.queryId;if(null!==a){var u=t.views.get(a);return p(null!=u,"SyncTree gave us an op for an invalid query."),Ni(u,e,n,r)}var c=[];try{for(var l=s(t.views.values()),h=l.next();!h.done;h=l.next())u=h.value,c=c.concat(Ni(u,e,n,r))}catch(t){i={error:t}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return c}function Ri(t,e,n,r,i){var o=e.queryIdentifier();return(t=t.views.get(o))?t:(t=!1,t=!!(o=ii(n,i?r:null))||(o=r instanceof An?oi(n,r):An.EMPTY_NODE,!1),i=jr(new xr(o,t,!1),new xr(r,i,!1)),new Ti(e,i))}function Oi(t){var e,n,r=[];try{for(var i=s(t.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query.getQueryParams().loadsAllData()||r.push(a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Di(t,e){var n,r,i,o,a=null;try{for(var u=s(t.views.values()),c=u.next();!c.done;c=u.next()){var l=c.value;a=a||(i=e,o=void 0,(o=Ur((l=l).viewCache_))&&(l.query.getQueryParams().loadsAllData()||!Ae(i)&&!o.getImmediateChild(Ee(i)).isEmpty())?o.getChild(i):null)}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return a}function Li(t,e){return e.getQueryParams().loadsAllData()?Fi(t):(e=e.queryIdentifier(),t.views.get(e))}function ji(t,e){return null!=Li(t,e)}function Mi(t){return null!=Fi(t)}function Fi(t){var e,n;try{for(var r=s(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query.getQueryParams().loadsAllData())return o}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var qi=1,Ui=function(t){this.listenProvider_=t,this.syncPointTree_=new Vr(null),this.pendingWriteTree_={visibleWrites:Br.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function Vi(t,e,n,r,i){var o,a,s,u;return o=t.pendingWriteTree_,a=e,s=n,u=i,p((r=r)>o.lastWriteId,"Stacking an older write on top of newer ones"),void 0===u&&(u=!0),o.allWrites.push({path:a,snap:s,writeId:r,visible:u}),u&&(o.visibleWrites=Kr(o.visibleWrites,a,s)),o.lastWriteId=r,i?Qi(t,new kr({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Wi(t,e,n,r){var i,o,a;return i=t.pendingWriteTree_,o=e,a=n,p((r=r)>i.lastWriteId,"Stacking an older merge on top of newer ones"),i.allWrites.push({path:o,children:a,writeId:r,visible:!0}),i.visibleWrites=zr(i.visibleWrites,o,a),i.lastWriteId=r,n=Vr.fromObject(n),Qi(t,new Pr({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n))}function Bi(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex((function(t){return t.writeId===e}));p(0<=n,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i,o=r.visible,a=!1,s=t.allWrites.length-1;o&&0<=s;){var u=t.allWrites[s];u.visible&&(n<=s&&function(t,e){if(t.snap)return De(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&De(Pe(t.path,n),e))return!0;return!1}(u,r.path)?o=!1:De(r.path,u.path)&&(a=!0)),s--}return!!o&&(a?((i=t).visibleWrites=ni(i.allWrites,ei,Ie()),0<i.allWrites.length?i.lastWriteId=i.allWrites[i.allWrites.length-1].writeId:i.lastWriteId=-1):r.snap?t.visibleWrites=Gr(t.visibleWrites,r.path):Pt(r.children,(function(e){t.visibleWrites=Gr(t.visibleWrites,Pe(r.path,e))})),!0)}(t.pendingWriteTree_,e)){var i=new Vr(null);return null!=r.snap?i=i.set(Ie(),!0):Pt(r.children,(function(t){i=i.set(new be(t),!0)})),Qi(t,new Er(r.path,i,n))}return[]}function Hi(t,e,n){return Qi(t,new kr({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Ki(t,e,n,r){var i=e.path,o=t.syncPointTree_.get(i),a=[];if(o&&("default"===e.queryIdentifier()||ji(o,e))){var c=function(t,e,n,r){var i,o,a=e.queryIdentifier(),c=[],l=[],h=Mi(t);if("default"===a)try{for(var d=s(t.views.entries()),f=d.next();!f.done;f=d.next()){var v=u(f.value,2),g=v[0],m=v[1];l=l.concat(ki(m,n,r)),Ci(m)&&(t.views.delete(g),m.query.getQueryParams().loadsAllData()||c.push(m.query))}}catch(t){i={error:t}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}else(m=t.views.get(a))&&(l=l.concat(ki(m,n,r)),Ci(m)&&(t.views.delete(a),m.query.getQueryParams().loadsAllData()||c.push(m.query)));return h&&!Mi(t)&&c.push((p(Ei,"Reference.ts has not been loaded"),new Ei(e.database,e.path))),{removed:c,events:l}}(o,e,n,r);if(0===o.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(i)),n=c.removed,a=c.events,o=-1!==n.findIndex((function(t){return t.getQueryParams().loadsAllData()})),c=t.syncPointTree_.findOnPath(i,(function(t,e){return Mi(e)})),o&&!c&&!(i=t.syncPointTree_.subtree(i)).isEmpty())for(var l=i.fold((function(t,e,n){if(e&&Mi(e))return[Fi(e)];var r=[];return e&&(r=Oi(e)),Pt(n,(function(t,e){r=r.concat(e)})),r})),h=0;h<l.length;++h){var d=(f=l[h]).query,f=$i(t,f);t.listenProvider_.startListening(no(d),Xi(t,d),f.hashFn,f.onComplete)}!c&&0<n.length&&!r&&(o?t.listenProvider_.stopListening(no(e),null):n.forEach((function(e){var n=t.queryToTagMap.get(Ji(e));t.listenProvider_.stopListening(no(e),n)}))),function(t,e){for(var n=0;n<e.length;++n){var r,i=e[n];i.getQueryParams().loadsAllData()||(r=Ji(i),i=t.queryToTagMap.get(r),t.queryToTagMap.delete(r),t.tagToQueryMap.delete(i))}}(t,n)}return a}function zi(t,e,n){var r=e.path,i=null,o=!1;t.syncPointTree_.foreachOnPath(r,(function(t,e){t=xe(t,r),i=i||Di(e,t),o=o||Mi(e)}));var a=t.syncPointTree_.get(r);a?(o=o||Mi(a),i=i||Di(a,Ie())):(a=new Ai,t.syncPointTree_=t.syncPointTree_.set(r,a)),null!=i?l=!0:(l=!1,i=An.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((function(t,e){(e=Di(e,Ie()))&&(i=i.updateImmediateChild(t,e))})));var s,u,c=ji(a,e);c||e.getQueryParams().loadsAllData()||(s=Ji(e),p(!t.queryToTagMap.has(s),"View does not exist, but we have a tag"),u=qi++,t.queryToTagMap.set(s,u),t.tagToQueryMap.set(u,s));var l=function(t,e,n,r,i,o){var a;return o=Ri(t,e,r,i,o),t.views.has(e.queryIdentifier())||t.views.set(e.queryIdentifier(),o),e=n,o.eventRegistrations_.push(e),e=n,o=(n=o).viewCache_.eventCache,a=[],o.getNode().isLeafNode()||o.getNode().forEachChild(_n,(function(t,e){a.push(Qn(t,e))})),o.isFullyInitialized()&&a.push(Gn(o.getNode())),Pi(n,a,o.getNode(),e)}(a,e,n,ti(t.pendingWriteTree_,r),i,l);return c||o||(a=Li(a,e),l=l.concat(function(t,e,n){var r=e.path,i=Xi(t,e);if(n=$i(t,n),n=t.listenProvider_.startListening(no(e),i,n.hashFn,n.onComplete),r=t.syncPointTree_.subtree(r),i)p(!Mi(r.value),"If we're adding a query, it shouldn't be shadowed");else for(var o=r.fold((function(t,e,n){if(!Ae(t)&&e&&Mi(e))return[Fi(e).query];var r=[];return e&&(r=r.concat(Oi(e).map((function(t){return t.query})))),Pt(n,(function(t,e){r=r.concat(e)})),r})),a=0;a<o.length;++a){var s=o[a];t.listenProvider_.stopListening(no(s),Xi(t,s))}return n}(t,e,a))),l}function Gi(t,e,n){var r=t.pendingWriteTree_;return t=t.syncPointTree_.findOnPath(e,(function(t,n){if(t=Di(n,xe(t,e)))return t})),ri(r,e,t,n,!0)}function Qi(t,e){return function t(e,n,r,i){if(Ae(e.path))return Yi(e,n,r,i);var o=n.get(Ie());null==r&&null!=o&&(r=Di(o,Ie()));var a=[],s=Ee(e.path),u=e.operationForChild(s),c=n.children.get(s);return c&&u&&(n=r?r.getImmediateChild(s):null,s=ci(i,s),a=a.concat(t(u,c,n,s))),o?a.concat(xi(o,e,i,r)):a}(e,t.syncPointTree_,null,ti(t.pendingWriteTree_,Ie()))}function Yi(t,e,n,r){var i=e.get(Ie());null==n&&null!=i&&(n=Di(i,Ie()));var o=[];return e.children.inorderTraversal((function(e,i){var a=n?n.getImmediateChild(e):null,s=ci(r,e);(e=t.operationForChild(e))&&(o=o.concat(Yi(e,i,a,s)))})),o=i?o.concat(xi(i,t,r,n)):o}function $i(t,e){var n=e.query,r=Xi(t,n);return{hashFn:function(){return(e.viewCache_.serverCache.getNode()||An.EMPTY_NODE).hash()},onComplete:function(e){return"ok"===e?r?function(t,e,n){var r=Zi(t,n);return r?(r=(n=to(r)).path,n=n.queryId,e=xe(r,e),eo(t,r,new Sr(Ir(n),e))):[]}(t,n.path,r):(i=t,o=n.path,Qi(i,new Sr({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},o))):(e=function(t,e){var n="Unknown Error";return"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable"),(n=new Error(t+" at "+e.path.toString()+": "+n)).code=t.toUpperCase(),n}(e,n),Ki(t,n,null,e));var i,o}}}function Xi(t,e){return e=Ji(e),t.queryToTagMap.get(e)}function Ji(t){return t.path.toString()+"$"+t.queryIdentifier()}function Zi(t,e){return t.tagToQueryMap.get(e)}function to(t){var e=t.indexOf("$");return p(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new be(t.substr(0,e))}}function eo(t,e,n){var r=t.syncPointTree_.get(e);return p(r,"Missing sync point for query tag that we're tracking"),xi(r,n,ti(t.pendingWriteTree_,e),null)}function no(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t}var ro=(io.prototype.getImmediateChild=function(t){return new io(this.node_.getImmediateChild(t))},io.prototype.node=function(){return this.node_},io);function io(t){this.node_=t}var oo=(ao.prototype.getImmediateChild=function(t){return t=Pe(this.path_,t),new ao(this.syncTree_,t)},ao.prototype.node=function(){return Gi(this.syncTree_,this.path_)},ao);function ao(t,e){this.syncTree_=t,this.path_=e}var so=function(t,e,n){return t&&"object"==typeof t?(p(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?uo(t[".sv"],e,n):"object"==typeof t[".sv"]?co(t[".sv"],e):void p(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},uo=function(t,e,n){if("timestamp"===t)return n.timestamp;p(!1,"Unexpected server value: "+t)},co=function(t,e,n){return t.hasOwnProperty("increment")||p(!1,"Unexpected server value: "+JSON.stringify(t,null,2)),"number"!=typeof(t=t.increment)&&p(!1,"Unexpected increment value: "+t),e=e.node(),p(null!=e,"Expected ChildrenNode.EMPTY_NODE for nulls"),e.isLeafNode()?"number"!=typeof(e=e.getValue())?t:e+t:t},lo=function(t,e,n,r){return fo(e,new oo(n,t),r)},ho=function(t,e,n){return fo(t,new ro(e),n)};function fo(t,e,n){var r=t.getPriority().val(),i=so(r,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var o=t;return(r=so(o.getValue(),e,n))!==o.getValue()||i!==o.getPriority().val()?new gn(r,Dn(i)):t}var a=t=t;return i!==t.getPriority().val()&&(a=a.updatePriority(new gn(i))),t.forEachChild(_n,(function(t,r){var i=fo(r,e.getImmediateChild(t),n);i!==r&&(a=a.updateImmediateChild(t,i))})),a}var po=function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n};function vo(t,e){for(var n=e instanceof be?e:new be(e),r=t,i=Ee(n);null!==i;){var o=R(r.node.children,i)||{children:{},childCount:0};r=new po(i,r,o),i=Ee(n=Se(n))}return r}function go(t){return t.node.value}function mo(t,e){t.node.value=e,wo(t)}function yo(t){return 0<t.node.childCount}function _o(t,e){Pt(t.node.children,(function(n,r){e(new po(n,t,r))}))}function bo(t){return new be(null===t.parent?t.name:bo(t.parent)+"/"+t.name)}function wo(t){var e,n,r,i;null!==t.parent&&(e=t.parent,n=t.name,i=function(t){return void 0===go(t)&&!yo(t)}(r=t),t=x(e.node.children,n),i&&t?(delete e.node.children[n],e.node.childCount--,wo(e)):i||t||(e.node.children[n]=r.node,e.node.childCount++,wo(e)))}function Io(t){return"string"==typeof t&&0!==t.length&&!Ro.test(t)}function Eo(t){return"string"==typeof t&&0!==t.length&&!Oo.test(t)}function To(t){return null===t||"string"==typeof t||"number"==typeof t&&!ct(t)||t&&"object"==typeof t&&x(t,".sv")}function So(t,e,n,r,i){i&&void 0===n||Lo(F(t,e,i),n,r)}function Co(t,e,n,r,i){if(!i||void 0!==n){var o=F(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var a=[];Pt(n,(function(t,e){if(t=new be(t),Lo(o,e,Pe(r,t)),".priority"===Ce(t)&&!To(e))throw new Error(o+"contains an invalid value for '"+t.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(t)})),function(t,e){for(var n=0;n<e.length;n++)for(var r,i=ke(r=e[n]),o=0;o<i.length;o++)if((".priority"!==i[o]||o!==i.length-1)&&!Io(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Re);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&De(a,r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(o,a)}}function ko(t,e,n,r){if(!r||void 0!==n){if(ct(n))throw new Error(F(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!To(n))throw new Error(F(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function No(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(F(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function Po(t,e,n,r){if(!(r&&void 0===n||Io(n)))throw new Error(F(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function Ao(t,e,n,r){if(!(r&&void 0===n||Eo(n)))throw new Error(F(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function xo(t,e){if(".info"===Ee(e))throw new Error(t+" failed = Can't modify data under /.info/")}var Ro=/[\[\].#$\/\u0000-\u001F\u007F]/,Oo=/[\[\].#$\u0000-\u001F\u007F]/,Do=10485760,Lo=function(t,e,n){var r=n instanceof be?new Le(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+Me(r));if("function"==typeof e)throw new Error(t+"contains a function "+Me(r)+" with contents = "+e.toString());if(ct(e))throw new Error(t+"contains "+e.toString()+" "+Me(r));if("string"==typeof e&&e.length>Do/3&&V(e)>Do)throw new Error(t+"contains a string greater than "+Do+" utf8 bytes "+Me(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,o=!1;if(Pt(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!Io(e)))throw new Error(t+" contains an invalid key ("+e+") "+Me(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a;a=e,0<(e=r).parts_.length&&(e.byteLength_+=1),e.parts_.push(a),e.byteLength_+=V(a),je(e),Lo(t,n,r),n=(e=r).parts_.pop(),e.byteLength_-=V(n),0<e.parts_.length&&--e.byteLength_})),i&&o)throw new Error(t+' contains ".value" child '+Me(r)+" in addition to actual children.")}},jo=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Io(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!Eo(r=(r=r)&&r.replace(/^\/*\.info(\/|$)/,"/")))throw new Error(F(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Mo=function(){this.eventLists_=[],this.recursionDepth_=0};function Fo(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Oe(o,n.path)||(t.eventLists_.push(n),n=null),(n=null===n?{events:[],path:o}:n).events.push(i)}n&&t.eventLists_.push(n)}function qo(t,e,n){Fo(t,n),Vo(t,(function(t){return Oe(t,e)}))}function Uo(t,e,n){Fo(t,n),Vo(t,(function(t){return De(t,e)||De(e,t)}))}function Vo(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(function(t){for(var e=0;e<t.events.length;e++){var n,r=t.events[e];null!==r&&(t.events[e]=null,n=r.getEventRunner(),_t&&wt("event: "+r.toString()),jt(n))}}(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}var Wo="repo_interrupt",Bo=(Ho.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},Ho);function Ho(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Mo,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=pr(),this.transactionQueueTree_=new po,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}function Ko(t){return t=t.infoData_.getNode(new be(".info/serverTimeOffset")).val()||0,(new Date).getTime()+t}function zo(t){return function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t}({timestamp:Ko(t)})}function Go(t,e,n,r,i){t.dataUpdateCount++;var o=new be(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a,s,u,c,l=o;0<(c=i?r?(a=D(n,(function(t){return Dn(t)})),function(t,e,n,r){var i=Zi(t,r);return i?(i=(r=to(i)).path,r=r.queryId,e=xe(i,e),n=Vr.fromObject(n),eo(t,i,new Pr(Ir(r),e,n))):[]}(t.serverSyncTree_,o,a,i)):(e=Dn(n),a=t.serverSyncTree_,s=o,u=e,null==(i=Zi(a,e=i))?[]:(e=to(i),i=e.path,e=e.queryId,s=xe(i,s),eo(a,i,new kr(Ir(e),s,u)))):r?(s=D(n,(function(t){return Dn(t)})),u=t.serverSyncTree_,r=o,s=s,s=Vr.fromObject(s),Qi(u,new Pr({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},r,s))):(n=Dn(n),Hi(t.serverSyncTree_,o,n))).length&&(l=aa(t,o)),Uo(t.eventQueue_,l,c)}function Qo(t,e){Yo(t,"connected",e),!1===e&&function(t){na(t,"onDisconnectEvents");var e=zo(t),n=pr();gr(t.onDisconnect_,Ie(),(function(r,i){i=lo(r,i,t.serverSyncTree_,e),vr(n,r,i)}));var r=[];gr(n,Ie(),(function(e,n){r=r.concat(Hi(t.serverSyncTree_,e,n)),e=la(t,e),aa(t,e)})),t.onDisconnect_=pr(),Uo(t.eventQueue_,Ie(),r)}(t)}function Yo(t,e,n){e=new be("/.info/"+e),n=Dn(n),t.infoData_.updateSnapshot(e,n),n=Hi(t.infoSyncTree_,e,n),Uo(t.eventQueue_,e,n)}function $o(t){return t.nextWriteId_++}function Xo(t,e,n,r,i){na(t,"set",{path:e.toString(),value:n,priority:r});var o=zo(t),a=(n=Dn(n,r),r=Gi(t.serverSyncTree_,e),o=ho(n,r,o),$o(t));o=Vi(t.serverSyncTree_,e,o,a,!0),Fo(t.eventQueue_,o),t.server_.put(e.toString(),n.val(!0),(function(n,r){var o="ok"===n;o||Tt("set at "+e+" failed: "+n),o=Bi(t.serverSyncTree_,a,!o),Uo(t.eventQueue_,e,o),ra(0,i,n,r)})),n=la(t,e),aa(t,n),Uo(t.eventQueue_,n,[])}function Jo(t,e,n){t.server_.onDisconnectCancel(e.toString(),(function(r,i){"ok"===r&&function t(e,n){if(Ae(n))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var r=e.value;return e.value=null,r.forEachChild(_n,(function(t,n){vr(e,new be(t),n)})),t(e,n)}return!(0<e.children.size)||(r=Ee(n),n=Se(n),e.children.has(r)&&t(e.children.get(r),n)&&e.children.delete(r),0===e.children.size)}(t.onDisconnect_,e),ra(0,n,r,i)}))}function Zo(t,e,n,r){var i=Dn(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(function(n,o){"ok"===n&&vr(t.onDisconnect_,e,i),ra(0,r,n,o)}))}function ta(t,e,n){n=".info"===Ee(e.path)?zi(t.infoSyncTree_,e,n):zi(t.serverSyncTree_,e,n),qo(t.eventQueue_,e.path,n)}function ea(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Wo)}function na(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),wt.apply(void 0,c([r],u(e)))}function ra(t,e,n,r){e&&jt((function(){var t,i;"ok"===n?e(null):(i=t=(n||"error").toUpperCase(),r&&(i+=": "+r),(i=new Error(i)).code=t,e(i))}))}function ia(t,e,n){return Gi(t.serverSyncTree_,e,n)||An.EMPTY_NODE}function oa(t,e){var n;(e=void 0===e?t.transactionQueueTree_:e)||ca(t,e),go(e)?(n=ua(t,e),p(0<n.length,"Sending zero length transaction queue"),n.every((function(t){return 0===t.status}))&&function(t,e,n){for(var r=n.map((function(t){return t.currentWriteId})),i=u=ia(t,e,r),o=(r=u.hash(),0);o<n.length;o++){var a=n[o];p(0===a.status,"tryToSendTransactionQueue_: items in queue should all be run."),a.status=1,a.retryCount++;var s=xe(e,a.path);i=i.updateChild(s,a.currentOutputSnapshotRaw)}var u=i.val(!0),c=e;t.server_.put(c.toString(),u,(function(r){na(t,"transaction put response",{path:c.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=0;a<n.length;a++)!function(e){n[e].status=2,i=i.concat(Bi(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push((function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)})),n[e].unwatcher()}(a);for(ca(t,vo(t.transactionQueueTree_,e)),oa(t,t.transactionQueueTree_),Uo(t.eventQueue_,e,i),a=0;a<o.length;a++)jt(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)3===n[a].status?n[a].status=4:n[a].status=0;else for(Tt("transaction at "+c.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;aa(t,e)}}),r)}(t,bo(e),n)):yo(e)&&_o(e,(function(e){oa(t,e)}))}function aa(t,e){var n=sa(t,e);return e=bo(n),function(t,e,n){if(0!==e.length){for(var r=[],i=[],o=e.filter((function(t){return 0===t.status})).map((function(t){return t.currentWriteId})),a=0;a<e.length;a++)!function(a){var s,u,c,l,h=e[a],d=xe(n,h.path),f=!1;p(null!==d,"rerunTransactionsUnderNode_: relativePath should not be null."),4===h.status?(f=!0,s=h.abortReason,i=i.concat(Bi(t.serverSyncTree_,h.currentWriteId,!0))):0===h.status&&(i=h.retryCount>=25?(f=!0,s="maxretry",i.concat(Bi(t.serverSyncTree_,h.currentWriteId,!0))):(u=ia(t,h.path,o),h.currentInputSnapshot=u,void 0!==(l=e[a].update(u.val()))?(Lo("transaction failed: Data returned ",l,h.path),c=Dn(l),"object"==typeof l&&null!=l&&x(l,".priority")||(c=c.updatePriority(u.getPriority())),d=h.currentWriteId,l=zo(t),l=ho(c,u,l),h.currentOutputSnapshotRaw=c,h.currentOutputSnapshotResolved=l,h.currentWriteId=$o(t),o.splice(o.indexOf(d),1),(i=i.concat(Vi(t.serverSyncTree_,h.path,l,h.currentWriteId,h.applyLocally))).concat(Bi(t.serverSyncTree_,d,!0))):(f=!0,s="nodata",i.concat(Bi(t.serverSyncTree_,h.currentWriteId,!0))))),Uo(t.eventQueue_,n,i),i=[],f&&(e[a].status=2,f=e[a].unwatcher,setTimeout(f,Math.floor(0)),e[a].onComplete&&("nodata"===s?r.push((function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)})):r.push((function(){return e[a].onComplete(new Error(s),!1,null)}))))}(a);for(ca(t,t.transactionQueueTree_),a=0;a<r.length;a++)jt(r[a]);oa(t,t.transactionQueueTree_)}}(t,ua(t,n),e),e}function sa(t,e){for(var n=t.transactionQueueTree_,r=Ee(e);null!==r&&void 0===go(n);)n=vo(n,r),r=Ee(e=Se(e));return n}function ua(t,e){var n=[];return function t(e,n,r){var i=go(n);if(i)for(var o=0;o<i.length;o++)r.push(i[o]);_o(n,(function(n){t(e,n,r)}))}(t,e,n),n.sort((function(t,e){return t.order-e.order})),n}function ca(t,e){var n=go(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,mo(e,0<n.length?n:void 0)}_o(e,(function(e){ca(t,e)}))}function la(t,e){var n=bo(sa(t,e));return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return;r=r.parent}}(e=vo(t.transactionQueueTree_,e),(function(e){ha(t,e)})),ha(t,e),function t(e,n,r,i){r&&!i&&n(e),_o(e,(function(e){t(e,n,!0,i)})),r&&i&&n(e)}(e,(function(e){ha(t,e)})),n}function ha(t,e){var n=go(e);if(n){for(var r=[],i=[],o=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(p(o===a-1,"All SENT items should be at beginning of queue."),n[o=a].status=3,n[a].abortReason="set"):(p(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(Bi(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===o?mo(e,void 0):n.length=o+1,Uo(t.eventQueue_,bo(e),i),a=0;a<r.length;a++)jt(r[a])}}var da=function(t,e){var n=fa(t),r=n.namespace;return"firebase.com"===n.domain&&Et(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Et("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Tt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),t="ws"===n.scheme||"wss"===n.scheme,{repoInfo:new Ht(n.host,n.secure,r,e,t,"",r!==n.subdomain),path:new be(n.pathString)}},fa=function(t){var e,n,r,i="",o="",a="",u="",c="",l=!0,h="https",d=443;return"string"==typeof t&&(0<=(r=t.indexOf("//"))&&(h=t.substring(0,r-1),t=t.substring(r+2)),-1===(e=t.indexOf("/"))&&(e=t.length),-1===(n=t.indexOf("?"))&&(n=t.length),i=t.substring(0,Math.min(e,n)),e<n&&(u=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(e,n))),n=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=s(t.split("&")),o=i.next();!o.done;o=i.next()){var a,u=o.value;0!==u.length&&(2===(a=u.split("=")).length?r[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Tt("Invalid query segment '"+u+"' in query '"+t+"'"))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,n))),0<=(r=i.indexOf(":"))?(l="https"===h||"wss"===h,d=parseInt(i.substring(r+1),10)):r=i.length,"localhost"===(r=i.slice(0,r)).toLowerCase()?o="localhost":r.split(".").length<=2?o=r:(r=i.indexOf("."),a=i.substring(0,r).toLowerCase(),o=i.substring(r+1),c=a),"ns"in n&&(c=n.ns)),{host:i,port:d,domain:o,subdomain:a,secure:l,scheme:h,pathString:u,namespace:c}},pa=(va.prototype.val=function(){return M("DataSnapshot.val",0,0,arguments.length),this.node_.val()},va.prototype.exportVal=function(){return M("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},va.prototype.toJSON=function(){return M("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},va.prototype.exists=function(){return M("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},va.prototype.child=function(t){M("DataSnapshot.child",0,1,arguments.length),Ao("DataSnapshot.child",1,t=String(t),!1);var e=new be(t);return t=this.ref_.child(e),new va(this.node_.getChild(e),t,_n)},va.prototype.hasChild=function(t){return M("DataSnapshot.hasChild",1,1,arguments.length),Ao("DataSnapshot.hasChild",1,t,!1),t=new be(t),!this.node_.getChild(t).isEmpty()},va.prototype.getPriority=function(){return M("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},va.prototype.forEach=function(t){var e=this;return M("DataSnapshot.forEach",1,1,arguments.length),q("DataSnapshot.forEach",1,t,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,(function(n,r){return t(new va(r,e.ref_.child(n),_n))}))},va.prototype.hasChildren=function(){return M("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(va.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),va.prototype.numChildren=function(){return M("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},va.prototype.getRef=function(){return M("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(va.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),va);function va(t,e,n){this.node_=t,this.ref_=e,this.index_=n}var ga=(ma.prototype.cancel=function(t){M("OnDisconnect.cancel",0,1,arguments.length),q("OnDisconnect.cancel",1,t,!0);var e=new y;return Jo(this.repo_,this.path_,e.wrapCallback(t)),e.promise},ma.prototype.remove=function(t){M("OnDisconnect.remove",0,1,arguments.length),xo("OnDisconnect.remove",this.path_),q("OnDisconnect.remove",1,t,!0);var e=new y;return Zo(this.repo_,this.path_,null,e.wrapCallback(t)),e.promise},ma.prototype.set=function(t,e){M("OnDisconnect.set",1,2,arguments.length),xo("OnDisconnect.set",this.path_),So("OnDisconnect.set",1,t,this.path_,!1),q("OnDisconnect.set",2,e,!0);var n=new y;return Zo(this.repo_,this.path_,t,n.wrapCallback(e)),n.promise},ma.prototype.setWithPriority=function(t,e,n){M("OnDisconnect.setWithPriority",2,3,arguments.length),xo("OnDisconnect.setWithPriority",this.path_),So("OnDisconnect.setWithPriority",1,t,this.path_,!1),ko("OnDisconnect.setWithPriority",2,e,!1),q("OnDisconnect.setWithPriority",3,n,!0);var r,i,o,a,s=new y;return r=this.repo_,i=this.path_,t=t,e=e,o=s.wrapCallback(n),a=Dn(t,e),r.server_.onDisconnectPut(i.toString(),a.val(!0),(function(t,e){"ok"===t&&vr(r.onDisconnect_,i,a),ra(0,o,t,e)})),s.promise},ma.prototype.update=function(t,e){if(M("OnDisconnect.update",1,2,arguments.length),xo("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Tt("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Co("OnDisconnect.update",1,t,this.path_,!1),q("OnDisconnect.update",2,e,!0);var i=new y;return function(t,e,n,r){if(O(n))return wt("onDisconnect().update() called with empty data.  Don't do anything."),ra(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,(function(i,o){"ok"===i&&Pt(n,(function(n,r){r=Dn(r),vr(t.onDisconnect_,Pe(e,n),r)})),ra(0,r,i,o)}))}(this.repo_,this.path_,t,i.wrapCallback(e)),i.promise},ma);function ma(t,e){this.repo_=t,this.path_=e}var ya=(_a.prototype.getPath=function(){var t=this.snapshot.getRef();return("value"===this.eventType?t:t.getParent()).path},_a.prototype.getEventType=function(){return this.eventType},_a.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},_a.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+P(this.snapshot.exportVal())},_a);function _a(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}var ba=(wa.prototype.getPath=function(){return this.path},wa.prototype.getEventType=function(){return"cancel"},wa.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},wa.prototype.toString=function(){return this.path.toString()+":cancel"},wa);function wa(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}var Ia=(Ea.prototype.respondsTo=function(t){return"value"===t},Ea.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new ya("value",this,new pa(t.snapshotNode,e.getRef(),n))},Ea.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){p(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},Ea.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new ba(this,t,e):null},Ea.prototype.matches=function(t){return t instanceof Ea&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},Ea.prototype.hasAnyCallback=function(){return null!==this.callback_},Ea);function Ea(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}var Ta,Sa=(Ca.prototype.respondsTo=function(t){return t="children_removed"===(t="children_added"===t?"child_added":t)?"child_removed":t,x(this.callbacks_,t)},Ca.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new ba(this,t,e):null},Ca.prototype.createEvent=function(t,e){p(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName);return e=e.getQueryParams().getIndex(),new ya(t.type,this,new pa(t.snapshotNode,n,e),t.prevName)},Ca.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){p(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},Ca.prototype.matches=function(t){var e=this;if(t instanceof Ca){if(!this.callbacks_||!t.callbacks_)return!0;if(this.context_===t.context_){var n=Object.keys(t.callbacks_),r=Object.keys(this.callbacks_),i=n.length;if(i===r.length)return 1!==i?r.every((function(n){return t.callbacks_[n]===e.callbacks_[n]})):(n=n[0],!((r=r[0])!==n||t.callbacks_[n]&&this.callbacks_[r]&&t.callbacks_[n]!==this.callbacks_[r]))}}return!1},Ca.prototype.hasAnyCallback=function(){return null!==this.callbacks_},Ca);function Ca(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}var ka=(Object.defineProperty(Na,"__referenceConstructor",{get:function(){return p(Ta,"Reference.ts has not been loaded"),Ta},set:function(t){Ta=t},enumerable:!1,configurable:!0}),Na.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Je){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==St)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Ct)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===_n){if(null!=e&&!To(e)||null!=n&&!To(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(p(t.getIndex()instanceof Mn||t.getIndex()===Hn,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},Na.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},Na.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},Na.prototype.getQueryParams=function(){return this.queryParams_},Na.prototype.getRef=function(){return M("Query.ref",0,0,arguments.length),new Na.__referenceConstructor(this.database,this.path)},Na.prototype.on=function(t,e,n,r){return M("Query.on",2,4,arguments.length),No("Query.on",1,t,!1),q("Query.on",2,e,!1),n=Na.getCancelAndContextArgs_("Query.on",n,r),"value"===t?this.onValueEvent(e,n.cancel,n.context):((r={})[t]=e,this.onChildEvent(r,n.cancel,n.context)),e},Na.prototype.onValueEvent=function(t,e,n){n=new Ia(t,e||null,n||null),ta(this.repo,this,n)},Na.prototype.onChildEvent=function(t,e,n){n=new Sa(t,e,n),ta(this.repo,this,n)},Na.prototype.off=function(t,e,n){M("Query.off",0,3,arguments.length),No("Query.off",1,t,!0),q("Query.off",2,e,!0),U("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new Ia(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new Sa(i,null,n||null)),i=this.repo,n=r,n=".info"===Ee((r=this).path)?Ki(i.infoSyncTree_,r,n):Ki(i.serverSyncTree_,r,n),qo(i.eventQueue_,r.path,n)},Na.prototype.get=function(){var t,e,n,r=this;return t=this.repo,e=this,(null!=(n=function(t,e){var n=e.path,r=null;t.syncPointTree_.foreachOnPath(n,(function(t,e){t=xe(t,n),r=r||Di(e,t)}));var i=t.syncPointTree_.get(n);i?r=r||Di(i,Ie()):(i=new Ai,t.syncPointTree_=t.syncPointTree_.set(n,i));var o,a=(o=null!=r)?new xr(r,!0,!1):null;return qr((o=Ri(i,e,ti(t.pendingWriteTree_,e.path),o?a.getNode():An.EMPTY_NODE,o)).viewCache_)}(t.serverSyncTree_,e))?Promise.resolve(n):t.server_.get(e).then((function(n){var r=Dn(n);return n=Hi(t.serverSyncTree_,e.path,r),qo(t.eventQueue_,e.path,n),Promise.resolve(r)}),(function(n){return na(t,"get for query "+P(e)+" failed: "+n),Promise.reject(new Error(n))}))).then((function(t){return new pa(t,r.getRef(),r.getQueryParams().getIndex())}))},Na.prototype.once=function(t,e,n,r){var i=this;M("Query.once",1,4,arguments.length),No("Query.once",1,t,!1),q("Query.once",2,e,!0);var o=Na.getCancelAndContextArgs_("Query.once",n,r),a=!0,s=new y;s.promise.catch((function(){}));var u=function(n){a&&(a=!1,i.off(t,u),e&&e.bind(o.context)(n),s.resolve(n))};return this.on(t,u,(function(e){i.off(t,u),o.cancel&&o.cancel.bind(o.context)(e),s.reject(e)})),s.promise},Na.prototype.limitToFirst=function(t){if(M("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Na(this.database,this.path,(t=t,(e=(e=this.queryParams_).copy()).limitSet_=!0,e.limit_=t,e.viewFrom_="l",e),this.orderByCalled_);var e},Na.prototype.limitToLast=function(t){if(M("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Na(this.database,this.path,(t=t,(e=(e=this.queryParams_).copy()).limitSet_=!0,e.limit_=t,e.viewFrom_="r",e),this.orderByCalled_);var e},Na.prototype.orderByChild=function(t){if(M("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');if(Ao("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild"),Ae(t=new be(t)))throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");return t=new Mn(t),t=sr(this.queryParams_,t),Na.validateQueryEndpoints_(t),new Na(this.database,this.path,t,!0)},Na.prototype.orderByKey=function(){M("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=sr(this.queryParams_,Je);return Na.validateQueryEndpoints_(t),new Na(this.database,this.path,t,!0)},Na.prototype.orderByPriority=function(){M("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=sr(this.queryParams_,_n);return Na.validateQueryEndpoints_(t),new Na(this.database,this.path,t,!0)},Na.prototype.orderByValue=function(){M("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=sr(this.queryParams_,Hn);return Na.validateQueryEndpoints_(t),new Na(this.database,this.path,t,!0)},Na.prototype.startAt=function(t,e){void 0===t&&(t=null),M("Query.startAt",0,2,arguments.length),So("Query.startAt",1,t,this.path,!0),Po("Query.startAt",2,e,!0);var n=or(this.queryParams_,t,e);if(Na.validateLimit_(n),Na.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(e=t=null),new Na(this.database,this.path,n,this.orderByCalled_)},Na.prototype.startAfter=function(t,e){var n;if(void 0===t&&(t=null),M("Query.startAfter",0,2,arguments.length),So("Query.startAfter",1,t,this.path,!1),Po("Query.startAfter",2,e,!0),t=t,e=e,(e=(n=this.queryParams_).index_===Je?or(n,t="string"==typeof t?Un(t):t,e):or(n,t,null==e?Ct:Un(e))).startAfterSet_=!0,e=e,Na.validateLimit_(e),Na.validateQueryEndpoints_(e),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new Na(this.database,this.path,e,this.orderByCalled_)},Na.prototype.endAt=function(t,e){if(void 0===t&&(t=null),M("Query.endAt",0,2,arguments.length),So("Query.endAt",1,t,this.path,!0),Po("Query.endAt",2,e,!0),e=ar(this.queryParams_,t,e),Na.validateLimit_(e),Na.validateQueryEndpoints_(e),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new Na(this.database,this.path,e,this.orderByCalled_)},Na.prototype.endBefore=function(t,e){var n;if(void 0===t&&(t=null),M("Query.endBefore",0,2,arguments.length),So("Query.endBefore",1,t,this.path,!1),Po("Query.endBefore",2,e,!0),t=t,e=e,(e=(n=this.queryParams_).index_===Je?ar(n,t="string"==typeof t?Vn(t):t,e):ar(n,t,null==e?St:Vn(e))).endBeforeSet_=!0,e=e,Na.validateLimit_(e),Na.validateQueryEndpoints_(e),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new Na(this.database,this.path,e,this.orderByCalled_)},Na.prototype.equalTo=function(t,e){if(M("Query.equalTo",1,2,arguments.length),So("Query.equalTo",1,t,this.path,!1),Po("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(t,e).endAt(t,e)},Na.prototype.toString=function(){return M("Query.toString",0,0,arguments.length),this.repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this.path)},Na.prototype.toJSON=function(){return M("Query.toJSON",0,1,arguments.length),this.toString()},Na.prototype.queryObject=function(){return n={},(t=this.queryParams_).startSet_&&(n.sp=t.indexStartValue_,t.startNameSet_&&(n.sn=t.indexStartName_)),t.endSet_&&(n.ep=t.indexEndValue_,t.endNameSet_&&(n.en=t.indexEndName_)),t.limitSet_&&(n.l=t.limit_,""===(e=t.viewFrom_)&&(e=t.isViewFromLeft()?"l":"r"),n.vf=e),t.index_!==_n&&(n.i=t.index_.toString()),n;var t,e,n},Na.prototype.queryIdentifier=function(){var t=this.queryObject();return"{}"===(t=Nt(t))?"default":t},Na.prototype.isEqual=function(t){if(M("Query.isEqual",1,1,arguments.length),!(t instanceof Na))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var e=this.repo===t.repo,n=Oe(this.path,t.path);return t=this.queryIdentifier()===t.queryIdentifier(),e&&n&&t},Na.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,q(t,3,r.cancel,!0),r.context=n,U(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(F(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(Na.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),Na);function Na(t,e,n,r){this.database=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r,this.repo=t.repo_}var Pa=(Aa.prototype.toJSON=function(){return M("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},Aa);function Aa(t,e){this.committed=t,this.snapshot=e}var xa,Ra,Oa=(r(Da,xa=ka),Da.prototype.getKey=function(){return M("Reference.key",0,0,arguments.length),Ae(this.path)?null:Ce(this.path)},Da.prototype.child=function(t){var e,n,r;return M("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof be||(null===Ee(this.path)?(r=!(e=1),Ao("Reference.child",e,n=(n=t)&&n.replace(/^\/*\.info(\/|$)/,"/"),r)):Ao("Reference.child",1,t,!1)),new Da(this.database,Pe(this.path,t))},Da.prototype.getParent=function(){M("Reference.parent",0,0,arguments.length);var t=Ne(this.path);return null===t?null:new Da(this.database,t)},Da.prototype.getRoot=function(){M("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},Da.prototype.set=function(t,e){M("Reference.set",1,2,arguments.length),xo("Reference.set",this.path),So("Reference.set",1,t,this.path,!1),q("Reference.set",2,e,!0);var n=new y;return Xo(this.repo,this.path,t,null,n.wrapCallback(e)),n.promise},Da.prototype.update=function(t,e){if(M("Reference.update",1,2,arguments.length),xo("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Tt("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Co("Reference.update",1,t,this.path,!1),q("Reference.update",2,e,!0);var i=new y;return function(t,e,n,r){na(t,"update",{path:e.toString(),value:n});var i,o,a=!0,s=zo(t),u={};Pt(n,(function(n,r){a=!1,u[n]=lo(Pe(e,n),Dn(r),t.serverSyncTree_,s)})),a?(wt("update() called with empty data.  Don't do anything."),ra(0,r,"ok",void 0)):(i=$o(t),o=Wi(t.serverSyncTree_,e,u,i),Fo(t.eventQueue_,o),t.server_.merge(e.toString(),n,(function(n,o){(s="ok"===n)||Tt("update at "+e+" failed: "+n);var a=Bi(t.serverSyncTree_,i,!s),s=0<a.length?aa(t,e):e;Uo(t.eventQueue_,s,a),ra(0,r,n,o)})),Pt(n,(function(n){n=la(t,Pe(e,n)),aa(t,n)})),Uo(t.eventQueue_,e,[]))}(this.repo,this.path,t,i.wrapCallback(e)),i.promise},Da.prototype.setWithPriority=function(t,e,n){if(M("Reference.setWithPriority",2,3,arguments.length),xo("Reference.setWithPriority",this.path),So("Reference.setWithPriority",1,t,this.path,!1),ko("Reference.setWithPriority",2,e,!1),q("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new y;return Xo(this.repo,this.path,t,e,r.wrapCallback(n)),r.promise},Da.prototype.remove=function(t){return M("Reference.remove",0,1,arguments.length),xo("Reference.remove",this.path),q("Reference.remove",1,t,!0),this.set(null,t)},Da.prototype.transaction=function(t,e,n){var r=this;if(M("Reference.transaction",1,3,arguments.length),xo("Reference.transaction",this.path),q("Reference.transaction",1,t,!1),q("Reference.transaction",2,e,!0),function(t,e,n,r){if(void 0!==n&&"boolean"!=typeof n)throw new Error(F("Reference.transaction",3,true)+"must be a boolean.")}(0,0,n),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var i=new y;function o(){}"function"==typeof e&&i.promise.catch((function(){}));var a=new Da(this.database,this.path);return a.on("value",o),function(t,e,n,r,i,o){na(t,"transaction on "+e);var a={path:e,update:n,onComplete:r,status:null,order:mt(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null};n=ia(t,e,void 0),a.currentInputSnapshot=n,void 0===(r=a.update(n.val()))?(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot)):(Lo("transaction failed: Data returned ",r,a.path),a.status=0,(i=go(o=vo(t.transactionQueueTree_,e))||[]).push(a),mo(o,i),o=void 0,"object"==typeof r&&null!==r&&x(r,".priority")?(o=R(r,".priority"),p(To(o),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):o=(Gi(t.serverSyncTree_,e)||An.EMPTY_NODE).getPriority().val(),i=zo(t),o=Dn(r,o),i=ho(o,n,i),a.currentOutputSnapshotRaw=o,a.currentOutputSnapshotResolved=i,a.currentWriteId=$o(t),a=Vi(t.serverSyncTree_,e,i,a.currentWriteId,a.applyLocally),Uo(t.eventQueue_,e,a),oa(t,t.transactionQueueTree_))}(this.repo,this.path,t,(function(t,n,o){t?(i.reject(t),"function"==typeof e&&e(t,n,null)):(o=new pa(o,new Da(r.database,r.path),_n),i.resolve(new Pa(n,o)),"function"==typeof e&&e(null,n,o))}),(function(){a.off("value",o)}),n),i.promise},Da.prototype.setPriority=function(t,e){M("Reference.setPriority",1,2,arguments.length),xo("Reference.setPriority",this.path),ko("Reference.setPriority",1,t,!1),q("Reference.setPriority",2,e,!0);var n=new y;return Xo(this.repo,Pe(this.path,".priority"),t,null,n.wrapCallback(e)),n.promise},Da.prototype.push=function(t,e){M("Reference.push",0,2,arguments.length),xo("Reference.push",this.path),So("Reference.push",1,t,this.path,!0),q("Reference.push",2,e,!0);var n=Ko(this.repo),r=zn(n),i=(n=this.child(r),this.child(r));return t=null!=t?n.set(t,e).then((function(){return i})):Promise.resolve(i),n.then=t.then.bind(t),n.catch=t.then.bind(t,void 0),"function"==typeof e&&t.catch((function(){})),n},Da.prototype.onDisconnect=function(){return xo("Reference.onDisconnect",this.path),new ga(this.repo,this.path)},Object.defineProperty(Da.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(Da.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(Da.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),Da);function Da(t,e){return xa.call(this,t,e,new rr,!1)||this}ka.__referenceConstructor=Oa,Ra=Oa,p(!Ei,"__referenceConstructor has already been defined"),Ei=Ra;var La={},ja=!1;function Ma(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||Et("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),wt("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,a=da(i,r),s=a.repoInfo;return n=void 0,(n="undefined"!=typeof process?process.env.FIREBASE_DATABASE_EMULATOR_HOST:n)?(o=!0,i="http://"+n+"?ns="+s.namespace,s=(a=da(i,r)).repoInfo):o=!a.repoInfo.secure,e=r&&o?new qt:new Mt(t,e),jo("Invalid Firebase Database URL",1,a),Ae(a.path)||Et("Database URL must point to the root of a Firebase Database (not including a child path)."),e=function(t,e,n){var r=R(La,e.name);r||(r={},La[e.name]=r);var i=R(r,t.toURLString());return i&&Et("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Bo(t,ja,e,n),r[t.toURLString()]=i}(s,t,e),new Fa(e)}var Fa=(Object.defineProperty(qa.prototype,"repo_",{get:function(){return this.instanceStarted_||(function(t){if(t.stats_=Xt(t.repoInfo_),t.forceRestClient_||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))t.server_=new lr(t.repoInfo_,(function(e,n,r,i){Go(t,e,n,r,i)}),t.authTokenProvider_),setTimeout((function(){return Qo(t,!0)}),0);else{var e=t.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{P(e)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}t.persistentConnection_=new Be(t.repoInfo_,t.app.options.appId,(function(e,n,r,i){Go(t,e,n,r,i)}),(function(e){Qo(t,e)}),(function(e){var n;n=t,Pt(e,(function(t,e){Yo(n,t,e)}))}),t.authTokenProvider_,e),t.server_=t.persistentConnection_}var n,r;t.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),t.statsReporter_=(r=function(){return new br(t.stats_,t.server_)},n=(n=t.repoInfo_).toString(),$t[n]||($t[n]=r()),$t[n]),t.infoData_=new dr,t.infoSyncTree_=new Ui({startListening:function(e,n,r,i){var o=[],a=t.infoData_.getNode(e.path);return a.isEmpty()||(o=Hi(t.infoSyncTree_,e.path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),Yo(t,"connected",!1),t.serverSyncTree_=new Ui({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){r=i(n,r),Uo(t.eventQueue_,e.path,r)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this.repoInternal_),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(qa.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new Oa(this,Ie())),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(qa.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),qa.prototype.useEmulator=function(t,e){var n;this.checkDeleted_("useEmulator"),this.instanceStarted_?Et("Cannot call useEmulator() after instance has already been initialized."):(t=t,e=e,(n=this.repoInternal_).repoInfo_=new Ht(t+":"+e,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),n.repoInfo_.nodeAdmin&&(n.authTokenProvider_=new qt))},qa.prototype.ref=function(t){return this.checkDeleted_("ref"),M("database.ref",0,1,arguments.length),t instanceof Oa?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},qa.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),M(e,1,1,arguments.length);var n=da(t,this.repo_.repoInfo_.nodeAdmin);return jo(e,1,n),t=n.repoInfo,this.repo_.repoInfo_.isCustomHost()||t.host===this.repo_.repoInfo_.host||Et(e+": Host name does not match the current database: (found "+t.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},qa.prototype.checkDeleted_=function(t){null===this.repoInternal_&&Et("Cannot call "+t+" on a deleted database.")},qa.prototype.goOffline=function(){M("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),ea(this.repo_)},qa.prototype.goOnline=function(){var t;M("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),(t=this.repo_).persistentConnection_&&t.persistentConnection_.resume(Wo)},qa.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},qa);function qa(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return o(e,void 0,void 0,(function(){return a(this,(function(t){var e,n;return this.checkDeleted_("delete"),e=this.repo_,(n=R(La,e.app.name))&&R(n,e.key)===e||Et("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),ea(e),delete n[e.key],this.repoInternal_=null,this.rootInternal_=null,[2]}))}))}},t instanceof Bo||Et("Don't call new Database() directly - please use firebase.database().")}var Ua=Object.freeze({__proto__:null,forceLongPolling:function(){se.forceDisallow(),te.forceAllow()},forceWebSockets:function(){te.forceDisallow()},isWebSocketsAvailable:function(){return se.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){var n;t=t.repo,void 0===(e=e)&&(e=!1),"undefined"!=typeof console&&(t=e?(t.statsListener_||(t.statsListener_=new mr(t.stats_)),t.statsListener_.get()):t.stats_.get(),n=Object.keys(t).reduce((function(t,e){return Math.max(e.length,t)}),0),Pt(t,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)})))},statsIncrementCounter:function(t,e){e=e,(t=t.repo).stats_.incrementCounter(e),e=e,(t=t.statsReporter_).statsToReport_[e]=!0},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){e=e,(t=t.repo).interceptServerDataCallback_=e},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace;return t=void 0!==(t=t.nodeAdmin)&&t,oe(r),(r=new K("auth-internal",new Q("database-standalone"))).setComponent(new W("auth-internal",(function(){return i}),"PRIVATE")),{instance:Ma(e,r,n,t),namespace:o}}});fe=Be,Be.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Be.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Va,Wa=Object.freeze({__proto__:null,DataConnection:fe,RealTimeConnection:he,hijackHash:function(t){var e=Be.prototype.put;return Be.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Be.prototype.put=e}},ConnectionTarget:Ht,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){ja=t}}),Ba=Fa.ServerValue;oe((Va=e.default).SDK_VERSION),Va.INTERNAL.registerComponent(new W("database",(function(t,e){return e=e.instanceIdentifier,Ma(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),e,void 0)}),"PUBLIC").setServiceProps({Reference:Oa,Query:ka,Database:Fa,DataSnapshot:pa,enableLogging:st,INTERNAL:Ua,ServerValue:Ba,TEST_ACCESS:Wa}).setMultipleInstances(!0)),Va.registerVersion("@firebase/database","0.9.7")}).apply(this,arguments)}catch(t){throw console.error(t),new Error("Cannot instantiate firebase-database.js - be sure to load firebase-app.js first.")}}(n(198))},379:(t,e,n)=>{"use strict";var r,i=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),o=[];function a(t){for(var e=-1,n=0;n<o.length;n++)if(o[n].identifier===t){e=n;break}return e}function s(t,e){for(var n={},r=[],i=0;i<t.length;i++){var s=t[i],u=e.base?s[0]+e.base:s[0],c=n[u]||0,l="".concat(u," ").concat(c);n[u]=c+1;var h=a(l),d={css:s[1],media:s[2],sourceMap:s[3]};-1!==h?(o[h].references++,o[h].updater(d)):o.push({identifier:l,updater:v(d,e),references:1}),r.push(l)}return r}function u(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(t){e.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(e);else{var a=i(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var c,l=(c=[],function(t,e){return c[t]=e,c.filter(Boolean).join("\n")});function h(t,e,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=l(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function d(t,e,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?t.setAttribute("media",i):t.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var f=null,p=0;function v(t,e){var n,r,i;if(e.singleton){var o=p++;n=f||(f=u(e)),r=h.bind(null,n,o,!1),i=h.bind(null,n,o,!0)}else n=u(e),r=d.bind(null,n,e),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=s(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<n.length;r++){var i=a(n[r]);o[i].references--}for(var u=s(t,e),c=0;c<n.length;c++){var l=a(n[c]);0===o[l].references&&(o[l].updater(),o.splice(l,1))}n=u}}}},208:(t,e,n)=>{"use strict";t.exports=n.p+"a5d7c9b8eb33e3a5879e.svg"},31:(t,e,n)=>{"use strict";t.exports=n.p+"e474c95b51f5c8e367c2.svg"},795:(t,e,n)=>{"use strict";t.exports=n.p+"d23429471aac27e44ee8.svg"},436:(t,e,n)=>{"use strict";t.exports=n.p+"6e0ab799d3edbc542a5b.ico"},590:(t,e,n)=>{"use strict";t.exports=n.p+"b1a54f96c7d0056cab80.svg"},241:(t,e,n)=>{"use strict";t.exports=n.p+"5ec960f2ea5f3fd95d41.svg"},843:(t,e,n)=>{"use strict";t.exports=n.p+"4662b43c381dcf9daa7c.svg"},457:(t,e,n)=>{"use strict";t.exports=n.p+"db4554a0adc563ebda4a.svg"},308:(t,e,n)=>{"use strict";t.exports=n.p+"9bec78a86fdfd993989d.svg"}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),(()=>{"use strict";var t=n(379),e=n.n(t),r=n(426);e()(r.Z,{insert:"head",singleton:!1}),r.Z.locals;var i=n(198);i.default.registerVersion("firebase","8.3.2","app"),function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},r=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,t];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}return globalThis}(this);function o(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function a(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:o(t)}}!function(t,n){if(n){var i=r;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in i||(i[a]={}),i=i[a]}(n=n(o=i[t=t[t.length-1]]))!=o&&null!=n&&e(i,t,{configurable:!0,writable:!0,value:n})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function i(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var o=r.setTimeout;n.prototype.c=function(t){o(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new n;return e.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Qa(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=i,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=a(t),o=r.next();!o.done;o=r.next())i(o.value).Qa(e,n)}))},e.all=function(t){var n=a(t),r=n.next();return r.done?i([]):new e((function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,i(r.value).Qa(o(a.length-1),e),r=n.next()}while(!r.done)}))},e}));var s=s||{},u=this||self,c=/^[\w+/_-]+[=]{0,2}$/,l=null;function h(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&c.test(t)?t:""}function d(){}function f(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function p(t){var e=f(t);return"array"==e||"object"==e&&"number"==typeof t.length}function v(t){return"function"==f(t)}function g(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function m(t){return Object.prototype.hasOwnProperty.call(t,y)&&t[y]||(t[y]=++_)}var y="closure_uid_"+(1e9*Math.random()>>>0),_=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function w(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function I(t,e,n){return(I=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:w).apply(null,arguments)}function E(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var T=Date.now;function S(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function C(t){return t}function k(t,e,n){this.code=A+t,this.message=e||x[t]||"",this.a=n||null}function N(t){var e=t&&t.code;return e?new k(e.substring(A.length),t.message,t.serverResponse):null}S(k,Error),k.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},k.prototype.toJSON=function(){return this.w()};var P,A="auth/",x={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},R={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function O(t){for(var e in R)if(R[e].id===t)return{firebaseEndpoint:(t=R[e]).Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function D(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function L(t){if(Error.captureStackTrace)Error.captureStackTrace(this,L);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function j(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");L.call(this,n+t[r])}function M(t,e){throw new j("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function F(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function q(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function U(){this.b=this.a=null}P=O("__EID__")?"__EID__":void 0,S(L,Error),L.prototype.name="CustomError",S(j,L),j.prototype.name="AssertionError",F.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var V=new F((function(){return new B}),(function(t){t.reset()}));function W(){var t=be,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function B(){this.next=this.b=this.a=null}U.prototype.add=function(t,e){var n=V.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},B.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},B.prototype.reset=function(){this.next=this.b=this.a=null};var H=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},K=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},z=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},G=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},Q=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function Y(t,e){return 0<=H(t,e)}function $(t,e){var n;return(n=0<=(e=H(t,e)))&&Array.prototype.splice.call(t,e,1),n}function X(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1).length}))}function J(t){return Array.prototype.concat.apply([],arguments)}function Z(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var tt,et=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},nt=/&/g,rt=/</g,it=/>/g,ot=/"/g,at=/'/g,st=/\x00/g,ut=/[\x00&<>"']/;function ct(t,e){return-1!=t.indexOf(e)}function lt(t,e){return t<e?-1:t>e?1:0}t:{var ht=u.navigator;if(ht){var dt=ht.userAgent;if(dt){tt=dt;break t}}tt=""}function ft(t){return ct(tt,t)}function pt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function vt(t){for(var e in t)return!1;return!0}function gt(t){var e,n={};for(e in t)n[e]=t[e];return n}var mt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<mt.length;o++)n=mt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function _t(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||u).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(g(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;M("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function bt(t,e){this.a=t===Tt&&e||"",this.b=Et}function wt(t){return t instanceof bt&&t.constructor===bt&&t.b===Et?t.a:(M("expected object of type Const, got '"+t+"'"),"type_error:Const")}bt.prototype.sa=!0,bt.prototype.ra=function(){return this.a},bt.prototype.toString=function(){return"Const{"+this.a+"}"};var It,Et={},Tt={};function St(){if(void 0===It){var t=null,e=u.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:C,createScript:C,createScriptURL:C})}catch(t){u.console&&u.console.error(t.message)}It=t}else It=t}return It}function Ct(t,e){this.a=e===xt?t:""}function kt(t){return t instanceof Ct&&t.constructor===Ct?t.a:(M("expected object of type TrustedResourceUrl, got '"+t+"' of type "+f(t)),"type_error:TrustedResourceUrl")}function Nt(t,e){var n=wt(t);if(!At.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=St();return new Ct(t=e?e.createScriptURL(t):t,xt)}(t=n.replace(Pt,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof bt?wt(t):encodeURIComponent(String(t))})))}Ct.prototype.sa=!0,Ct.prototype.ra=function(){return this.a.toString()},Ct.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Pt=/%{(\w+)}/g,At=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,xt={};function Rt(t,e){this.a=e===qt?t:""}function Ot(t){return t instanceof Rt&&t.constructor===Rt?t.a:(M("expected object of type SafeUrl, got '"+t+"' of type "+f(t)),"type_error:SafeUrl")}Rt.prototype.sa=!0,Rt.prototype.ra=function(){return this.a.toString()},Rt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Dt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Lt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,jt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Mt(t){if(t instanceof Rt)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),jt.test(t))t=new Rt(t,qt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Lt);t=e&&Dt.test(e[1])?new Rt(t,qt):null}return t}function Ft(t){return t instanceof Rt?t:(t="object"==typeof t&&t.sa?t.ra():String(t),jt.test(t)||(t="about:invalid#zClosurez"),new Rt(t,qt))}var qt={},Ut=new Rt("about:invalid#zClosurez",qt);function Vt(t,e,n){this.a=n===Wt?t:""}Vt.prototype.sa=!0,Vt.prototype.ra=function(){return this.a.toString()},Vt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Wt={};function Bt(t,e,n,r){return t=t instanceof Rt?t:Ft(t),e=e||u,n=n instanceof bt?wt(n):n||"",e.open(Ot(t),n,r,void 0)}function Ht(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Kt(t){return ut.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(nt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(rt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(it,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(ot,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(at,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(st,"&#0;"))),t}function zt(t){return zt[" "](t),t}zt[" "]=d;var Gt,Qt,Yt=ft("Opera"),$t=ft("Trident")||ft("MSIE"),Xt=ft("Edge"),Jt=Xt||$t,Zt=ft("Gecko")&&!(ct(tt.toLowerCase(),"webkit")&&!ft("Edge"))&&!(ft("Trident")||ft("MSIE"))&&!ft("Edge"),te=ct(tt.toLowerCase(),"webkit")&&!ft("Edge");function ee(){var t=u.document;return t?t.documentMode:void 0}t:{var ne="",re=(Qt=tt,Zt?/rv:([^\);]+)(\)|;)/.exec(Qt):Xt?/Edge\/([\d\.]+)/.exec(Qt):$t?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Qt):te?/WebKit\/(\S+)/.exec(Qt):Yt?/(?:Version)[ \/]?(\S+)/.exec(Qt):void 0);if(re&&(ne=re?re[1]:""),$t){var ie=ee();if(null!=ie&&ie>parseFloat(ne)){Gt=String(ie);break t}}Gt=ne}var oe,ae={};function se(t){return function(t,e){var n=ae;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=et(String(Gt)).split("."),r=et(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=lt(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||lt(0==a[2].length,0==s[2].length)||lt(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}u.document&&$t?oe=ee()||parseInt(Gt,10)||void 0:oe=void 0;var ue=oe;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Qt){}var ce=!$t||9<=Number(ue);function le(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function he(t,e){pt(e,(function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:pe.hasOwnProperty(n)?t.setAttribute(pe[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var de,fe,pe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ve(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!p(o)||g(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(g(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(v(o)){a="function"==typeof o.item;break t}}a=!1}K(a?Z(o):o,r)}}}function ge(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function me(t){u.setTimeout((function(){throw t}),0)}function ye(t,e){fe||function(){if(u.Promise&&u.Promise.resolve){var t=u.Promise.resolve(void 0);fe=function(){t.then(we)}}else fe=function(){var t=we;!v(u.setImmediate)||u.Window&&u.Window.prototype&&!ft("Edge")&&u.Window.prototype.setImmediate==u.setImmediate?(de||(de=function(){var t=u.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ft("Presto")&&(t=function(){var t=ge(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=I((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ft("Trident")&&!ft("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Gb;n.Gb=null,t()}},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}return function(t){u.setTimeout(t,0)}}()),de(t)):u.setImmediate(t)}}(),_e||(fe(),_e=!0),be.add(t,e)}var _e=!1,be=new U;function we(){for(var t;t=W();){try{t.a.call(t.b)}catch(t){me(t)}q(V,t)}_e=!1}function Ie(t,e){if(this.a=Ee,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=d)try{var n=this;t.call(e,(function(t){je(n,Te,t)}),(function(t){if(!(t instanceof Be))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}je(n,Se,t)}))}catch(t){je(this,Se,t)}}var Ee=0,Te=2,Se=3;function Ce(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ce.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var ke=new F((function(){return new Ce}),(function(t){t.reset()}));function Ne(t,e,n){var r=ke.get();return r.g=t,r.b=e,r.f=n,r}function Pe(t){if(t instanceof Ie)return t;var e=new Ie(d);return je(e,Te,t),e}function Ae(t){return new Ie((function(e,n){n(t)}))}function xe(t,e,n){Me(t,e,n,null)||ye(E(e,t))}function Re(t){return new Ie((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)xe(t[o],E(i,o,!0),E(i,o,!1));else e(r)}))}function Oe(t,e){if(t.a==Ee)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==t&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==Ee&&1==r?Oe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):qe(n),Ue(n,i,Se,e)))}t.c=null}else je(t,Se,e)}function De(t,e){t.b||t.a!=Te&&t.a!=Se||Fe(t),t.f?t.f.next=e:t.b=e,t.f=e}function Le(t,e,n,r){var i=Ne(null,null,null);return i.a=new Ie((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Be?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,De(t,i),i.a}function je(t,e,n){t.a==Ee&&(t===n&&(e=Se,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Me(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Fe(t),e!=Se||n instanceof Be||function(t,e){t.g=!0,ye((function(){t.g&&We.call(null,e)}))}(t,n)))}function Me(t,e,n,r){if(t instanceof Ie)return De(t,Ne(e||d,n||null,r)),!0;if(D(t))return t.then(e,n,r),!0;if(g(t))try{var i=t.then;if(v(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,(function(t){a||(a=!0,n.call(i,t))}),o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Fe(t){t.h||(t.h=!0,ye(t.gc,t))}function qe(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Ue(t,e,n,r){if(n==Se&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ve(e,n,r);else try{e.c?e.g.call(e.f):Ve(e,n,r)}catch(t){We.call(null,t)}q(ke,e)}function Ve(t,e,n){e==Te?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}Ie.prototype.then=function(t,e,n){return Le(this,v(t)?t:null,v(e)?e:null,n)},Ie.prototype.$goog_Thenable=!0,(t=Ie.prototype).oa=function(t,e){return(t=Ne(t,t,e)).c=!0,De(this,t),this},t.o=function(t,e){return Le(this,null,t,e)},t.cancel=function(t){if(this.a==Ee){var e=new Be(t);ye((function(){Oe(this,e)}),this)}},t.$c=function(t){this.a=Ee,je(this,Te,t)},t.ad=function(t){this.a=Ee,je(this,Se,t)},t.gc=function(){for(var t;t=qe(this);)Ue(this,t,this.a,this.i);this.h=!1};var We=me;function Be(t){L.call(this,t)}function He(){0!=Ke&&(ze[m(this)]=this),this.xa=this.xa,this.pa=this.pa}S(Be,L),Be.prototype.name="cancel";var Ke=0,ze={};function Ge(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=Ke)){var e=m(t);if(0!=Ke&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete ze[e]}}He.prototype.xa=!1,He.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Qe=Object.freeze||function(t){return t},Ye=!$t||9<=Number(ue),$e=$t&&!se("9"),Xe=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{u.addEventListener("test",d,e),u.removeEventListener("test",d,e)}catch(t){}return t}();function Je(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ze(t,e){if(Je.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Zt){t:{try{zt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:tn[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Je.prototype.preventDefault=function(){this.defaultPrevented=!0},S(Ze,Je);var tn=Qe({2:"touch",3:"pen",4:"mouse"});Ze.prototype.preventDefault=function(){Ze.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,$e)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Ze.prototype.g=function(){return this.a};var en="closure_listenable_"+(1e6*Math.random()|0),nn=0;function rn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++nn,this.va=this.Pa=!1}function on(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function an(t){this.src=t,this.a={},this.b=0}function sn(t,e){var n=e.type;n in t.a&&$(t.a[n],e)&&(on(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function un(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}an.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=un(t,e,r,i);return-1<a?(e=t[a],n||(e.Pa=!1)):((e=new rn(e,this.src,o,!!r,i)).Pa=n,t.push(e)),e};var cn="closure_lm_"+(1e6*Math.random()|0),ln={};function hn(t,e,n,r,i){if(r&&r.once)fn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else n=In(n),t&&t[en]?Tn(t,e,n,g(r)?!!r.capture:!!r,i):dn(t,e,n,!1,r,i)}function dn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=g(i)?!!i.capture:!!i,s=bn(t);if(s||(t[cn]=s=new an(t)),!(n=s.add(e,n,r,a,o)).proxy)if(r=function(){var t=_n,e=Ye?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Xe||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(gn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function fn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)fn(t,e[o],n,r,i);else n=In(n),t&&t[en]?Sn(t,e,n,g(r)?!!r.capture:!!r,i):dn(t,e,n,!0,r,i)}function pn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)pn(t,e[o],n,r,i);else r=g(r)?!!r.capture:!!r,n=In(n),t&&t[en]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=un(o=t.a[e],n,r,i))&&(on(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=bn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=un(e,n,r,i)),(n=-1<t?e[t]:null)&&vn(n))}function vn(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[en])sn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(gn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=bn(e))?(sn(n,t),0==n.b&&(n.src=null,e[cn]=null)):on(t)}}}function gn(t){return t in ln?ln[t]:ln[t]="on"+t}function mn(t,e,n,r){var i=!0;if((t=bn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=yn(o,r),i=i&&!1!==o)}return i}function yn(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&vn(t),n.call(r,e)}function _n(t,e){if(t.va)return!0;if(!Ye){if(!e)t:{e=["window","event"];for(var n=u,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ze(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=mn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=mn(r[i],t,!1,e),n=n&&o}return n}return yn(t,new Ze(e,this))}function bn(t){return(t=t[cn])instanceof an?t:null}var wn="__closure_events_fn_"+(1e9*Math.random()>>>0);function In(t){return v(t)?t:(t[wn]||(t[wn]=function(e){return t.handleEvent(e)}),t[wn])}function En(){He.call(this),this.v=new an(this),this.ac=this,this.gb=null}function Tn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function Sn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function Cn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.va&&a.capture==n){var s=a.listener,u=a.Va||a.src;a.Pa&&sn(t.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function kn(t,e,n){if(v(t))n&&(t=I(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=I(t.handleEvent,t)}return 2147483647<Number(e)?-1:u.setTimeout(t,e||0)}function Nn(t){var e=null;return new Ie((function(n,r){-1==(e=kn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw u.clearTimeout(e),t}))}function Pn(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"==typeof t)return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function An(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(p(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function xn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof xn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Rn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];On(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)On(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function On(t,e){return Object.prototype.hasOwnProperty.call(t,e)}S(En,He),En.prototype[en]=!0,En.prototype.addEventListener=function(t,e,n,r){hn(this,t,e,n,r)},En.prototype.removeEventListener=function(t,e,n,r){pn(this,t,e,n,r)},En.prototype.dispatchEvent=function(t){var e,n=this.gb;if(n)for(e=[];n;n=n.gb)e.push(n);n=this.ac;var r=t.type||t;if("string"==typeof t)t=new Je(t,n);else if(t instanceof Je)t.target=t.target||n;else{var i=t;yt(t=new Je(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=Cn(a,r,!0,t)&&i}if(i=Cn(a=t.b=n,r,!0,t)&&i,i=Cn(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Cn(a=t.b=e[o],r,!1,t)&&i;return i},En.prototype.Da=function(){if(En.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)on(n[r]);delete e.a[t],e.b--}}this.gb=null},(t=xn.prototype).W=function(){Rn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return Rn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return On(this.b,t)?this.b[t]:e},t.set=function(t,e){On(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Dn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ln(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Ln?(this.i=void 0!==e?e:t.i,jn(this,t.c),this.l=t.l,this.a=t.a,Mn(this,t.g),this.f=t.f,Fn(this,rr(t.b)),this.h=t.h):t&&(n=String(t).match(Dn))?(this.i=!!e,jn(this,n[1]||"",!0),this.l=Bn(n[2]||""),this.a=Bn(n[3]||"",!0),Mn(this,n[4]),this.f=Bn(n[5]||"",!0),Fn(this,n[6]||"",!0),this.h=Bn(n[7]||"")):(this.i=!!e,this.b=new Xn(null,this.i))}function jn(t,e,n){t.c=n?Bn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Mn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Fn(t,e,n){e instanceof Xn?(t.b=e,function(t,e){e&&!t.f&&(Jn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(tr(this,e),nr(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=Hn(e,Yn)),t.b=new Xn(e,t.i))}function qn(t,e,n){t.b.set(e,n)}function Un(t,e){return t.b.get(e)}function Vn(t){return t instanceof Ln?new Ln(t):new Ln(t,void 0)}function Wn(t,e,n,r){var i=new Ln(null,void 0);return t&&jn(i,t),e&&(i.a=e),n&&Mn(i,n),r&&(i.f=r),i}function Bn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Hn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Kn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Kn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ln.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Hn(e,zn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Hn(e,zn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Hn(n,"/"==n.charAt(0)?Qn:Gn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Hn(n,$n)),t.join("")},Ln.prototype.resolve=function(t){var e=new Ln(this),n=!!t.c;n?jn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Mn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ct(i,"./")||ct(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Fn(e,rr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var zn=/[#\/\?@]/g,Gn=/[#\?:]/g,Qn=/[#\?]/g,Yn=/[#\?@]/g,$n=/#/g;function Xn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Jn(t){t.a||(t.a=new xn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Zn(t){var e=An(t);if(void 0===e)throw Error("Keys are undefined");var n=new Xn(null,void 0);t=Pn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?nr(n,i,o):n.add(i,o)}return n}function tr(t,e){Jn(t),e=ir(t,e),On(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,On((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Rn(t)))}function er(t,e){return Jn(t),e=ir(t,e),On(t.a.b,e)}function nr(t,e,n){tr(t,e),0<n.length&&(t.c=null,t.a.set(ir(t,e),Z(n)),t.b+=n.length)}function rr(t){var e=new Xn;return e.c=t.c,t.a&&(e.a=new xn(t.a),e.b=t.b),e}function ir(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function or(t){var e=[];return sr(new ar,t,e),e.join("")}function ar(){}function sr(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),sr(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof(o=e[r])&&(n.push(i),lr(r,n),n.push(":"),sr(t,o,n),i=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":lr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Xn.prototype).add=function(t,e){Jn(this),this.c=null,t=ir(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Jn(this),this.a.forEach((function(n,r){K(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Jn(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.W=function(t){Jn(this);var e=[];if("string"==typeof t)er(this,t)&&(e=J(e,this.a.get(ir(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=J(e,t[n])}return e},t.set=function(t,e){return Jn(this),this.c=null,er(this,t=ir(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.W(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var ur={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},cr=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function lr(t,e){e.push('"',t.replace(cr,(function(t){var e=ur[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),ur[t]=e),e})),'"')}function hr(){var t=xr();return $t&&!!ue&&11==ue||/Edge\/\d+/.test(t)}function dr(){return u.window&&u.window.location.href||self&&self.location&&self.location.href||""}function fr(t,e){e=e||u.window;var n="about:blank";t&&(n=Ot(Mt(t)||Ut)),e.location.href=n}function pr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<pr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function vr(t){return!!((t=(t||xr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function gr(t){t=t||u.window;try{t.close()}catch(t){}}function mr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=xr().toLowerCase(),r&&(e.target=r,ct(n,"crios/")&&(e.target="_blank")),Nr(xr())==Cr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Rt?n:Mt(void 0!==n.href?n.href:String(n))||Ut,n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((ft("iPhone")&&!ft("iPod")&&!ft("iPad")||ft("iPad")||ft("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(_t(a=ge(document,"A"),"HTMLAnchorElement"),e=e instanceof Rt?e:Ft(e),a.href=Ot(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=Bt("",r,n,a),t=Ot(e),a&&(Jt&&ct(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Kt(t)+'">',t=new Vt(t=(r=St())?r.createHTML(t):t,null,Wt),r=a.document)&&(r.write(function(t){return t instanceof Vt&&t.constructor===Vt?t.a:(M("expected object of type SafeHtml, got '"+t+"' of type "+f(t)),"type_error:SafeHtml")}(t)),r.close())):(a=Bt(e,r,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var yr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_r=/^[^@]+@[^@]+$/;function br(){var t=null;return new Ie((function(e){"complete"==u.document.readyState?e():(t=function(){e()},fn(window,"load",t))})).o((function(e){throw pn(window,"load",t),e}))}function wr(t){return t=t||xr(),!("file:"!==jr()&&"ionic:"!==jr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ir(){var t=u.window;try{return!(!t||t==t.top)}catch(t){return!1}}function Er(){return void 0!==u.WorkerGlobalScope&&"function"==typeof u.importScripts}function Tr(){return i.default.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":i.default.INTERNAL.hasOwnProperty("node")?"Node":Er()?"Worker":"Browser"}function Sr(){var t=Tr();return"ReactNative"===t||"Node"===t}var Cr="Firefox",kr="Chrome";function Nr(t){var e=t.toLowerCase();return ct(e,"opera/")||ct(e,"opr/")||ct(e,"opios/")?"Opera":ct(e,"iemobile")?"IEMobile":ct(e,"msie")||ct(e,"trident/")?"IE":ct(e,"edge/")?"Edge":ct(e,"firefox/")?Cr:ct(e,"silk/")?"Silk":ct(e,"blackberry")?"Blackberry":ct(e,"webos")?"Webos":!ct(e,"safari/")||ct(e,"chrome/")||ct(e,"crios/")||ct(e,"android")?!ct(e,"chrome/")&&!ct(e,"crios/")||ct(e,"edge/")?ct(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":kr:"Safari"}var Pr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Ar(t,e){e=e||[];var n,r=[],i={};for(n in Pr)i[Pr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Tr())?r=Nr(i=xr()):"Worker"===r&&(r=Nr(i=xr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function xr(){return u.navigator&&u.navigator.userAgent||""}function Rr(t,e){t=t.split("."),e=e||u;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Or(){try{var t=u.localStorage,e=Vr();if(t)return t.setItem(e,"1"),t.removeItem(e),!hr()||!!u.indexedDB}catch(t){return Er()&&!!u.indexedDB}return!1}function Dr(){return(Lr()||"chrome-extension:"===jr()||wr())&&!Sr()&&Or()&&!Er()}function Lr(){return"http:"===jr()||"https:"===jr()}function jr(){return u.location&&u.location.protocol||null}function Mr(t){return!vr(t=t||xr())&&Nr(t)!=Cr}function Fr(t){return void 0===t?null:or(t)}function qr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Ur(t){if(null!==t)return JSON.parse(t)}function Vr(t){return t||Math.floor(1e9*Math.random()).toString()}function Wr(t){return"Safari"!=Nr(t=t||xr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Br(){var t=u.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Hr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=xr(),e=Tr(),this.b=vr(t)||"ReactNative"===e}function Kr(){var t=u.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function zr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Gr(){return!(!Rr("fireauth.oauthhelper",u)&&!Rr("fireauth.iframe",u))}Hr.prototype.get=function(){var t=u.navigator;return!t||"boolean"!=typeof t.onLine||!Lr()&&"chrome-extension:"!==jr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Qr,Yr={};function $r(t){Yr[t]||(Yr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Xr={};Object.defineProperty(Xr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Xr,"abcd",{configurable:!0,enumerable:!0,value:2}),Qr=2==Xr.abcd}catch(Qt){Qr=!1}function Jr(t,e,n){Qr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Zr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Jr(t,n,e[n])}function ti(t){var e={};return Zr(e,t),e}function ei(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Jr(e,n,ei(t[n]));return e}function ni(t){var e=t&&(t[si]?"phone":null);if(!(e&&t&&t[ai]))throw new k("internal-error","Internal assert: invalid MultiFactorInfo object");Jr(this,"uid",t[ai]),Jr(this,"displayName",t[ii]||null);var n=null;t[oi]&&(n=new Date(t[oi]).toUTCString()),Jr(this,"enrollmentTime",n),Jr(this,"factorId",e)}function ri(t){try{var e=new ui(t)}catch(t){e=null}return e}ni.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ii="displayName",oi="enrolledAt",ai="mfaEnrollmentId",si="phoneInfo";function ui(t){ni.call(this,t),Jr(this,"phoneNumber",t[si])}function ci(t){var e={},n=t[fi],r=t[vi],i=t[gi];if(t=ri(t[pi]),!i||i!=hi&&i!=di&&!n||i==di&&!r||i==li&&!t)throw Error("Invalid checkActionCode response!");i==di?(e[yi]=n||null,e[bi]=n||null,e[mi]=r):(e[yi]=r||null,e[bi]=r||null,e[mi]=n||null),e[_i]=t||null,Jr(this,Ii,i),Jr(this,wi,ei(e))}S(ui,ni),ui.prototype.w=function(){var t=ui.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var li="REVERT_SECOND_FACTOR_ADDITION",hi="EMAIL_SIGNIN",di="VERIFY_AND_CHANGE_EMAIL",fi="email",pi="mfaInfo",vi="newEmail",gi="requestType",mi="email",yi="fromEmail",_i="multiFactorInfo",bi="previousEmail",wi="data",Ii="operation";function Ei(t){var e=Un(t=Vn(t),Ti)||null,n=Un(t,Si)||null,r=Un(t,Ni)||null;if(r=r&&Ai[r]||null,!e||!n||!r)throw new k("argument-error",Ti+", "+Si+"and "+Ni+" are required in a valid action code URL.");Zr(this,{apiKey:e,operation:r,code:n,continueUrl:Un(t,Ci)||null,languageCode:Un(t,ki)||null,tenantId:Un(t,Pi)||null})}var Ti="apiKey",Si="oobCode",Ci="continueUrl",ki="languageCode",Ni="mode",Pi="tenantId",Ai={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:li,signIn:hi,verifyAndChangeEmail:di,verifyEmail:"VERIFY_EMAIL"};function xi(t){try{return new Ei(t)}catch(t){return null}}function Ri(t){var e=t[Mi];if(void 0===e)throw new k("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new k("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Oi];if(n&&"object"==typeof n){e=n[Ui];var r=n[Fi];if(n=n[qi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new k("argument-error",Fi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new k("argument-error",qi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new k("argument-error",Ui+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new k("missing-android-pkg-name")}}else if(void 0!==n)throw new k("argument-error",Oi+" property must be a non null object when specified.");if(this.f=null,(e=t[ji])&&"object"==typeof e){if("string"==typeof(e=e[Vi])&&e.length)this.f=e;else if(void 0!==e)throw new k("argument-error",Vi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new k("argument-error",ji+" property must be a non null object when specified.");if(void 0!==(e=t[Li])&&"boolean"!=typeof e)throw new k("argument-error",Li+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Di])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new k("argument-error",Di+" property must be a non empty string when specified.");this.i=t||null}var Oi="android",Di="dynamicLinkDomain",Li="handleCodeInApp",ji="iOS",Mi="url",Fi="installApp",qi="minimumVersion",Ui="packageName",Vi="bundleId";function Wi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Bi=null;function Hi(t){var e=zi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Ki(t){try{return new Hi(t)}catch(t){return null}}function zi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=function(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Bi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Bi){Bi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Bi[o]&&(Bi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e.push(t)})),e}(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var a=r[e++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else o=r[e++],a=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(t.join(""))}catch(t){}return null}Hi.prototype.T=function(){return this.f},Hi.prototype.l=function(){return this.c},Hi.prototype.toString=function(){return this.h};var Gi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Qi=["client_id","response_type","scope","redirect_uri","state"],Yi={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Qi},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Qi},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Qi},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Gi},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function $i(t){for(var e in Yi)if(Yi[e].fa==t)return Yi[e];return null}function Xi(t){var e={};e["facebook.com"]=no,e["google.com"]=io,e["github.com"]=ro,e["twitter.com"]=oo;var n=t&&t[Zi];try{if(n)return e[n]?new e[n](t):new eo(t);if(void 0!==t[Ji])return new to(t)}catch(t){}return null}var Ji="idToken",Zi="providerId";function to(t){var e=t[Zi];if(!e&&t[Ji]){var n=Ki(t[Ji]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Jr(this,"providerId",e),Jr(this,"isNewUser",n)}function eo(t){to.call(this,t),Jr(this,"profile",ei((t=Ur(t.rawUserInfo||"{}"))||{}))}function no(t){if(eo.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function ro(t){if(eo.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Jr(this,"username",this.profile&&this.profile.login||null)}function io(t){if(eo.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function oo(t){if(eo.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Jr(this,"username",t.screenName||null)}function ao(t){var e=Vn(t),n=Un(e,"link"),r=Un(Vn(n),"link");return e=Un(e,"deep_link_id"),Un(Vn(e),"link")||e||r||n||t}function so(t,e){if(!t&&!e)throw new k("internal-error","Internal assert: no raw session string available");if(t&&e)throw new k("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?uo:co}S(eo,to),S(no,eo),S(ro,eo),S(io,eo),S(oo,eo);var uo="enroll",co="signin";function lo(){}function ho(t,e){return t.then((function(t){if(t[Za]){var n=Ki(t[Za]);if(!n||e!=n.i)throw new k("user-mismatch");return t}throw new k("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==A+"user-not-found"?new k("user-mismatch"):t}))}function fo(t,e){if(!e)throw new k("internal-error","failed to construct a credential");this.a=e,Jr(this,"providerId",t),Jr(this,"signInMethod",t)}function po(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function vo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new fo(t.providerId,t.pendingToken)}catch(t){}return null}function go(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Jr(this,"idToken",e.idToken),e.accessToken&&Jr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Jr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new k("internal-error","failed to construct a credential");Jr(this,"accessToken",e.oauthToken),Jr(this,"secret",e.oauthTokenSecret)}Jr(this,"providerId",t),Jr(this,"signInMethod",n)}function mo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Zn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function yo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new go(t.providerId,e,t.signInMethod)}catch(t){}}return null}function _o(t,e){this.Qc=e||[],Zr(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=($i(t)||{}).Ja||null,this.ob=null}function bo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new k("argument-error",'SAML provider IDs must be prefixed with "saml."');_o.call(this,t,[])}function wo(t){_o.call(this,t,Qi),this.a=[]}function Io(){wo.call(this,"facebook.com")}function Eo(t){if(!t)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new Io).credential({accessToken:e})}function To(){wo.call(this,"github.com")}function So(t){if(!t)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new To).credential({accessToken:e})}function Co(){wo.call(this,"google.com"),this.Ca("profile")}function ko(t,e){var n=t;return g(t)&&(n=t.idToken,e=t.accessToken),(new Co).credential({idToken:n,accessToken:e})}function No(){_o.call(this,"twitter.com",Gi)}function Po(t,e){var n=t;if(g(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new k("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new go("twitter.com",n,"twitter.com")}function Ao(t,e,n){this.a=t,this.f=e,Jr(this,"providerId","password"),Jr(this,"signInMethod",n===Ro.EMAIL_LINK_SIGN_IN_METHOD?Ro.EMAIL_LINK_SIGN_IN_METHOD:Ro.EMAIL_PASSWORD_SIGN_IN_METHOD)}function xo(t){return t&&t.email&&t.password?new Ao(t.email,t.password,t.signInMethod):null}function Ro(){Zr(this,{providerId:"password",isOAuthProvider:!1})}function Oo(t,e){if(!(e=Do(e)))throw new k("argument-error","Invalid email link!");return new Ao(t,e.code,Ro.EMAIL_LINK_SIGN_IN_METHOD)}function Do(t){return(t=xi(t=ao(t)))&&t.operation===hi?t:null}function Lo(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new k("internal-error");this.a=t,Jr(this,"providerId","phone"),this.fa="phone",Jr(this,"signInMethod","phone")}function jo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return K(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Lo(e)}return null}function Mo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function Fo(t){try{this.a=t||i.default.auth()}catch(t){throw new k("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Zr(this,{providerId:"phone",isOAuthProvider:!1})}function qo(t,e){if(!t)throw new k("missing-verification-id");if(!e)throw new k("missing-verification-code");return new Lo({eb:t,cb:e})}function Uo(t){if(t.temporaryProof&&t.phoneNumber)return new Lo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return ko(o,n);case"facebook.com":return Eo(n);case"github.com":return So(n);case"twitter.com":return Po(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new fo(e,a):new go(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new wo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Vo(t){if(!t.isOAuthProvider)throw new k("invalid-oauth-provider")}function Wo(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new k("invalid-auth-event");if(this.g&&this.a)throw new k("invalid-auth-event");if(this.g&&!this.f)throw new k("invalid-auth-event")}function Bo(t){return(t=t||{}).type?new Wo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&N(t.error),t.postBody,t.tenantId):null}function Ho(){this.b=null,this.a=[]}so.prototype.Ha=function(){return this.a?Pe(this.a):Pe(this.b)},so.prototype.w=function(){return this.type==uo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},lo.prototype.ka=function(){},lo.prototype.b=function(){},lo.prototype.c=function(){},lo.prototype.w=function(){},fo.prototype.ka=function(t){return bs(t,po(this))},fo.prototype.b=function(t,e){var n=po(this);return n.idToken=e,ws(t,n)},fo.prototype.c=function(t,e){return ho(Is(t,po(this)),e)},fo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},go.prototype.ka=function(t){return bs(t,mo(this))},go.prototype.b=function(t,e){var n=mo(this);return n.idToken=e,ws(t,n)},go.prototype.c=function(t,e){return ho(Is(t,mo(this)),e)},go.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},_o.prototype.Ka=function(t){return this.Ib=gt(t),this},S(bo,_o),S(wo,_o),wo.prototype.Ca=function(t){return Y(this.a,t)||this.a.push(t),this},wo.prototype.Qb=function(){return Z(this.a)},wo.prototype.credential=function(t,e){var n;if(!(n=g(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new k("argument-error","credential failed: must provide the ID token and/or the access token.");return new go(this.providerId,n,this.providerId)},S(Io,wo),Jr(Io,"PROVIDER_ID","facebook.com"),Jr(Io,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),S(To,wo),Jr(To,"PROVIDER_ID","github.com"),Jr(To,"GITHUB_SIGN_IN_METHOD","github.com"),S(Co,wo),Jr(Co,"PROVIDER_ID","google.com"),Jr(Co,"GOOGLE_SIGN_IN_METHOD","google.com"),S(No,_o),Jr(No,"PROVIDER_ID","twitter.com"),Jr(No,"TWITTER_SIGN_IN_METHOD","twitter.com"),Ao.prototype.ka=function(t){return this.signInMethod==Ro.EMAIL_LINK_SIGN_IN_METHOD?ru(t,As,{email:this.a,oobCode:this.f}):ru(t,Js,{email:this.a,password:this.f})},Ao.prototype.b=function(t,e){return this.signInMethod==Ro.EMAIL_LINK_SIGN_IN_METHOD?ru(t,xs,{idToken:e,email:this.a,oobCode:this.f}):ru(t,Hs,{idToken:e,email:this.a,password:this.f})},Ao.prototype.c=function(t,e){return ho(this.ka(t),e)},Ao.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Zr(Ro,{PROVIDER_ID:"password"}),Zr(Ro,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Zr(Ro,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Lo.prototype.ka=function(t){return t.fb(Mo(this))},Lo.prototype.b=function(t,e){var n=Mo(this);return n.idToken=e,ru(t,tu,n)},Lo.prototype.c=function(t,e){var n=Mo(this);return n.operation="REAUTH",ho(t=ru(t,eu,n),e)},Lo.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Fo.prototype.fb=function(t,e){var n=this.a.a;return Pe(e.verify()).then((function(r){if("string"!=typeof r)throw new k("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=g(t)?t.session:null,o=g(t)?t.phoneNumber:t;return(i&&i.type==uo?i.Ha().then((function(t){return function(t,e){return ru(t,zs,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==co?i.Ha().then((function(e){return function(t,e){return ru(t,Gs,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return ru(t,Ws,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new k("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Zr(Fo,{PROVIDER_ID:"phone"}),Zr(Fo,{PHONE_SIGN_IN_METHOD:"phone"}),Wo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Wo.prototype.T=function(){return this.h},Wo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Ko,zo=null;function Go(t){var e="unauthorized-domain",n=void 0,r=Vn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Ht("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Ht("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",k.call(this,e,n)}function Qo(t,e,n){k.call(this,t,n),(t=e||{}).Jb&&Jr(this,"email",t.Jb),t.ea&&Jr(this,"phoneNumber",t.ea),t.credential&&Jr(this,"credential",t.credential),t.Zb&&Jr(this,"tenantId",t.Zb)}function Yo(t){if(t.code){var e=t.code||"";0==e.indexOf(A)&&(e=e.substring(A.length));var n={credential:Uo(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new k(e,t.message||void 0);return new Qo(e,n,t.message)}return null}function $o(){}function Xo(t){return t.c||(t.c=t.b())}function Jo(){}function Zo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function ta(){}function ea(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=I(this.qc,this),this.a.onerror=I(this.Sb,this),this.a.onprogress=I(this.rc,this),this.a.ontimeout=I(this.vc,this)}function na(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function ra(t,e,n){this.reset(t,e,n,void 0,void 0)}function ia(t){this.f=t,this.b=this.c=this.a=null}function oa(t,e){this.name=t,this.value=e}S(Go,k),S(Qo,k),Qo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&yt(t,e),t},Qo.prototype.toJSON=function(){return this.w()},$o.prototype.c=null,S(Jo,$o),Jo.prototype.a=function(){var t=Zo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Jo.prototype.b=function(){var t={};return Zo(this)&&(t[0]=!0,t[1]=!0),t},Ko=new Jo,S(ta,$o),ta.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new ea;throw Error("Unsupported browser")},ta.prototype.b=function(){return{}},(t=ea.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,na(this,4)},t.Sb=function(){this.status=500,this.response=this.responseText="",na(this,4)},t.vc=function(){this.Sb()},t.rc=function(){this.status=200,na(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ra.prototype.a=null,ra.prototype.reset=function(t,e,n,r,i){r||T(),delete this.a},oa.prototype.toString=function(){return this.name};var aa=new oa("SEVERE",1e3),sa=new oa("WARNING",900),ua=new oa("CONFIG",700),ca=new oa("FINE",500);function la(t){return t.c?t.c:t.a?la(t.a):(M("Root logger has no level set."),null)}ia.prototype.log=function(t,e,n){if(t.value>=la(this).value)for(v(e)&&(e=e()),t=new ra(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var ha={},da=null;function fa(t){var e;if(da||(da=new ia(""),ha[""]=da,da.c=ua),!(e=ha[t])){e=new ia(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=fa(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,ha[t]=e}return e}function pa(t,e){t&&t.log(ca,e,void 0)}function va(t){this.f=t}function ga(t){En.call(this),this.u=t,this.h=void 0,this.readyState=ma,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=fa("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}S(va,$o),va.prototype.a=function(){return new ga(this.f)},va.prototype.b=function(t){return function(){return t}}({}),S(ga,En);var ma=0;function ya(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function _a(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ba(t)}function ba(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function wa(t){En.call(this),this.headers=new xn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=Ia,this.u=this.S=!1}(t=ga.prototype).open=function(t,e){if(this.readyState!=ma)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ba(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,_a(this)),this.readyState=ma},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ba(this)),this.a&&(this.readyState=3,ba(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==u.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ya(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?_a(this):ba(this),3==this.readyState&&ya(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,_a(this))},t.sc=function(t){this.a&&(this.response=t,_a(this))},t.Ua=function(t){var e=this.i;e&&e.log(sa,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&_a(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(sa,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(sa,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ga.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),S(wa,En);var Ia="";wa.prototype.b=fa("goog.net.XhrIo");var Ea=/^https?$/i,Ta=["POST","PUT"];function Sa(t){return"content-type"==t.toLowerCase()}function Ca(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,ka(t),Pa(t)}function ka(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Na(t){if(t.c&&void 0!==s)if(t.C[1]&&4==xa(t)&&2==Ra(t))pa(t.b,Oa(t,"Local request error detected and ignored"));else if(t.i&&4==xa(t))kn(t.Vb,0,t);else if(t.dispatchEvent("readystatechange"),4==xa(t)){pa(t.b,Oa(t,"Request complete")),t.c=!1;try{var e,n=Ra(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(Dn)[1]||null;if(!o&&u.self&&u.self.location){var a=u.self.location.protocol;o=a.substr(0,a.length-1)}i=!Ea.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<xa(t)?t.a.statusText:""}catch(e){pa(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+Ra(t)+"]",ka(t)}}finally{Pa(t)}}}function Pa(t,e){if(t.a){Aa(t);var n=t.a,r=t.C[0]?d:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(aa,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Aa(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(u.clearTimeout(t.s),t.s=null)}function xa(t){return t.a?t.a.readyState:0}function Ra(t){try{return 2<xa(t)?t.a.status:-1}catch(t){return-1}}function Oa(t,e){return e+" ["+t.R+" "+t.l+" "+Ra(t)+"]"}function Da(t){var e=Ka;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function La(t,e,n){t.a=!0,t.c=n,t.f=!e,qa(t)}function ja(t){if(t.a){if(!t.v)throw new Ua(t);t.v=!1}}function Ma(t,e,n,r){t.g.push([e,n,r]),t.a&&qa(t)}function Fa(t){return Q(t.g,(function(t){return v(t[1])}))}function qa(t){if(t.h&&t.a&&Fa(t)){var e=t.h,n=Ba[e];n&&(u.clearTimeout(n.a),delete Ba[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var s=o.call(i||t.s,e);void 0!==s&&(t.f=t.f&&(s==e||s instanceof Error),t.c=e=s),(D(e)||"function"==typeof u.Promise&&e instanceof u.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Fa(t)||(n=!0)}}t.c=e,r&&(s=I(t.m,t,!0),r=I(t.m,t,!1),e instanceof Da?(Ma(e,s,r),e.C=!0):e.then(s,r)),n&&(e=new Wa(e),Ba[e.a]=e,t.h=e.a)}function Ua(){L.call(this)}function Va(){L.call(this)}function Wa(t){this.a=u.setTimeout(I(this.c,this),0),this.b=t}(t=wa.prototype).Ma=function(){void 0!==s&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",pa(this.b,Oa(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(pa(this.b,Oa(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Pa(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Pa(this,!0)),wa.ab.Da.call(this)},t.Vb=function(){this.xa||(this.O||this.i||this.f?Na(this):this.Jc())},t.Jc=function(){Na(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Ia:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(aa,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return pa(this.b,"Can not get response: "+t.message),null}},Da.prototype.cancel=function(t){if(this.a)this.c instanceof Da&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Va(this),ja(this),La(this,!1,t))}},Da.prototype.m=function(t,e){this.i=!1,La(this,t,e)},Da.prototype.then=function(t,e,n){var r,i,o=new Ie((function(t,e){r=t,i=e}));return Ma(this,r,(function(t){t instanceof Va?o.cancel():i(t)})),o.then(t,e,n)},Da.prototype.$goog_Thenable=!0,S(Ua,L),Ua.prototype.message="Deferred has already fired",Ua.prototype.name="AlreadyCalledError",S(Va,L),Va.prototype.message="Deferred was canceled",Va.prototype.name="CanceledError",Wa.prototype.c=function(){throw delete Ba[this.a],this.b};var Ba={};function Ha(t){var e={},n=e.document||document,r=kt(t).toString(),i=ge(document,"SCRIPT"),o={Wb:i,Ma:void 0},a=new Da(o),s=null,c=null!=e.timeout?e.timeout:5e3;return 0<c&&(s=window.setTimeout((function(){za(i,!0);var t=new Ya(Qa,"Timeout reached for loading script "+r);ja(a),La(a,!1,t)}),c),o.Ma=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(za(i,e.xd||!1,s),ja(a),La(a,!0,null))},i.onerror=function(){za(i,!0,s);var t=new Ya(Ga,"Error while loading script "+r);ja(a),La(a,!1,t)},yt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),he(i,o),function(t,e){_t(t,"HTMLScriptElement"),t.src=kt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=u?e=h(e.document):(null===l&&(l=h(u.document)),e=l),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function Ka(){if(this&&this.Wb){var t=this.Wb;t&&"SCRIPT"==t.tagName&&za(t,!0,this.Ma)}}function za(t,e,n){null!=n&&u.clearTimeout(n),t.onload=d,t.onerror=d,t.onreadystatechange=d,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Ga=0,Qa=1;function Ya(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),L.call(this,n),this.code=t}function $a(t){this.f=t}function Xa(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||ts,this.g=gt(t.secureTokenHeaders||es),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||ns,this.a=gt(t.firebaseHeaders||rs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Tr(),!(n=u.XMLHttpRequest||n&&i.default.INTERNAL.node&&i.default.INTERNAL.node.XMLHttpRequest)&&!Er())throw new k("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Er()?this.f=new va(self):Sr()?this.f=new $a(n):this.f=new ta,this.b=null}S(Ya,L),S($a,$o),$a.prototype.a=function(){return new this.f},$a.prototype.b=function(){return{}};var Ja,Za="idToken",ts=new Hr(3e4,6e4),es={"Content-Type":"application/x-www-form-urlencoded"},ns=new Hr(3e4,6e4),rs={"Content-Type":"application/json"};function is(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function os(t,e){e&&(t.l=as("https://securetoken.googleapis.com/v1/token",e),t.h=as("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=as("https://identitytoolkit.googleapis.com/v2/",e))}function as(t,e){return t=Vn(t),e=Vn(e.url),t.f=t.a+t.f,jn(t,e.c),t.a=e.a,Mn(t,e.g),t.toString()}function ss(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function us(t,e,n,r,i,o,a){(function(){var t=xr();return!((t=Nr(t)!=kr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||$t&&ue&&!(9<ue))})()||Er()?t=I(t.u,t):(Ja||(Ja=new Ie((function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(u[ls]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ma(t,null,e,void 0)}(Ha(Nt(cs,{onload:ls})),(function(){e(Error("CORS_UNSUPPORTED"))})))}(t,e)}))),t=I(t.s,t)),t(e,n,r,i,o,a)}Xa.prototype.T=function(){return this.b},Xa.prototype.u=function(t,e,n,r,i,o){if(Er()&&(void 0===u.fetch||void 0===u.Headers||void 0===u.Request))throw new k("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new wa(this.f);if(o){a.g=Math.max(0,o);var s=setTimeout((function(){a.dispatchEvent("timeout")}),o)}Tn(a,"complete",(function(){s&&clearTimeout(s);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return pa(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),Sn(a,"ready",(function(){s&&clearTimeout(s),Ge(this)})),Sn(a,"timeout",(function(){s&&clearTimeout(s),Ge(this),e&&e(null)})),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.R=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Ko.a(),t.C=t.D?Xo(t.D):Xo(Ko),t.a.onreadystatechange=I(t.Vb,t);try{pa(t.b,Oa(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(e){return pa(t.b,Oa(t,"Error opening Xhr: "+e.message)),void Ca(t,e)}e=r||"";var o=new xn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||"string"==typeof t)K(t,e,void 0);else for(var n=An(t),r=Pn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Sa,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=u.FormData&&e instanceof u.FormData,!Y(Ta,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{Aa(t),0<t.g&&(t.u=function(t){return $t&&se(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),pa(t.b,Oa(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=I(t.Ma,t)):t.s=kn(t.Ma,t.g,t)),pa(t.b,Oa(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){pa(t.b,Oa(t,"Send error: "+e.message)),Ca(t,e)}}(a,t,n,r,i)};var cs=new bt(Tt,"https://apis.google.com/js/client.js?onload=%{onload}"),ls="__fcb"+Math.floor(1e6*Math.random()).toString();function hs(t){if("string"!=typeof(t=t.email)||!_r.test(t))throw new k("invalid-email")}function ds(t){"email"in t&&hs(t)}function fs(t){if(!t[Za]){if(t.mfaPendingCredential)throw new k("multi-factor-auth-required",null,gt(t));throw new k("internal-error")}}function ps(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new k("internal-error")}else{if(!t.sessionInfo)throw new k("missing-verification-id");if(!t.code)throw new k("missing-verification-code")}}Xa.prototype.s=function(t,e,n,r,i){var o=this;Ja.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Xa.prototype.zb=function(){return ru(this,Ks,{})},Xa.prototype.Bb=function(t,e){return ru(this,Bs,{idToken:t,email:e})},Xa.prototype.Cb=function(t,e){return ru(this,Hs,{idToken:t,password:e})};var vs={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function gs(t){if(!t.phoneVerificationInfo)throw new k("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new k("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new k("missing-verification-code")}function ms(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new k("internal-error")}function ys(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&er(t=new Xn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function _s(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Yo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Yo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Yo(t)):t.errorMessage&&(e=iu(t.errorMessage)),e)throw e;fs(t)}function bs(t,e){return e.returnIdpCredential=!0,ru(t,Qs,e)}function ws(t,e){return e.returnIdpCredential=!0,ru(t,$s,e)}function Is(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,ru(t,Ys,e)}function Es(t){if(!t.oobCode)throw new k("invalid-action-code")}(t=Xa.prototype).Db=function(t,e){var n={idToken:t},r=[];return pt(vs,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),ru(this,Bs,n)},t.vb=function(t,e){return yt(t={requestType:"PASSWORD_RESET",email:t},e),ru(this,Fs,t)},t.wb=function(t,e){return yt(t={requestType:"EMAIL_SIGNIN",email:t},e),ru(this,Ls,t)},t.ub=function(t,e){return yt(t={requestType:"VERIFY_EMAIL",idToken:t},e),ru(this,js,t)},t.Eb=function(t,e,n){return yt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),ru(this,Ms,t)},t.fb=function(t){return ru(this,Zs,t)},t.nb=function(t,e){return ru(this,Vs,{oobCode:t,newPassword:e})},t.Ra=function(t){return ru(this,Ss,{oobCode:t})},t.jb=function(t){return ru(this,Ts,{oobCode:t})};var Ts={endpoint:"setAccountInfo",A:Es,Z:"email",B:!0},Ss={endpoint:"resetPassword",A:Es,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new k("internal-error")},B:!0},Cs={endpoint:"signupNewUser",A:function(t){if(hs(t),!t.password)throw new k("weak-password")},G:fs,V:!0,B:!0},ks={endpoint:"createAuthUri",B:!0},Ns={endpoint:"deleteAccount",N:["idToken"]},Ps={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new k("internal-error")}},As={endpoint:"emailLinkSignin",N:["email","oobCode"],A:hs,G:fs,V:!0,B:!0},xs={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:hs,G:fs,V:!0},Rs={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:gs,G:fs,B:!0,Na:!0},Os={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:gs,G:fs,B:!0,Na:!0},Ds={endpoint:"getAccountInfo"},Ls={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new k("internal-error");hs(t)},Z:"email",B:!0},js={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new k("internal-error")},Z:"email",B:!0},Ms={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new k("internal-error")},Z:"email",B:!0},Fs={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new k("internal-error");hs(t)},Z:"email",B:!0},qs={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},Us={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new k("internal-error")}},Vs={endpoint:"resetPassword",A:Es,Z:"email",B:!0},Ws={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Bs={endpoint:"setAccountInfo",N:["idToken"],A:ds,V:!0},Hs={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(ds(t),!t.password)throw new k("weak-password")},G:fs,V:!0},Ks={endpoint:"signupNewUser",G:fs,V:!0,B:!0},zs={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new k("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new k("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new k("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new k("internal-error")},B:!0,Na:!0},Gs={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new k("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new k("internal-error")},B:!0,Na:!0},Qs={endpoint:"verifyAssertion",A:ms,Ya:ys,G:_s,V:!0,B:!0},Ys={endpoint:"verifyAssertion",A:ms,Ya:ys,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new k("user-not-found");if(t.errorMessage)throw iu(t.errorMessage);fs(t)},V:!0,B:!0},$s={endpoint:"verifyAssertion",A:function(t){if(ms(t),!t.idToken)throw new k("internal-error")},Ya:ys,G:_s,V:!0},Xs={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new k("invalid-custom-token")},G:fs,V:!0,B:!0},Js={endpoint:"verifyPassword",A:function(t){if(hs(t),!t.password)throw new k("wrong-password")},G:fs,V:!0,B:!0},Zs={endpoint:"verifyPhoneNumber",A:ps,G:fs,B:!0},tu={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new k("internal-error");ps(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Yo(t);fs(t)}},eu={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ps,G:fs,B:!0},nu={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Za]^!!t.refreshToken)throw new k("internal-error")},B:!0,Na:!0};function ru(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.N))return Ae(new k("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return Pe(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,a){var s=Vn(e+n);qn(s,"key",t.c),a&&qn(s,"cb",T().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&qn(s,c,i[c]);return new Ie((function(e,n){us(t,s.toString(),(function(t){t?t.error?n(ou(t,o||{})):e(t):n(new k("network-request-failed"))}),r,u?void 0:or(qr(i)),t.a,t.v.get())}))}(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)})).then((function(t){return r=t,e.Ya?e.Ya(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new k("internal-error");return r[e.Z]}))}function iu(t){return ou({error:{errors:[{message:t}],code:400,message:t}})}function ou(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new k(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",yt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new k(r[i],e);return!e&&t&&(e=Fr(t)),new k("internal-error",e)}function au(t){this.b=t,this.a=null,this.rb=function(t){return(lu||(lu=new Ie((function(t,e){function n(){Br(),Rr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Br(),e(Error("Network Error"))},timeout:uu.get()})}if(Rr("gapi.iframes.Iframe"))t();else if(Rr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();u[r]=function(){Rr("gapi.load")?n():e(Error("Network Error"))},Pe(Ha(r=Nt(su,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw lu=null,t})))).then((function(){return new Ie((function(e,n){Rr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),cu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var su=new bt(Tt,"https://apis.google.com/js/api.js?onload=%{onload}"),uu=new Hr(3e4,6e4),cu=new Hr(5e3,15e3),lu=null;function hu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?Wn((t=Vn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):Wn("https",this.l,null,"/__/auth/iframe"),this.a=t,qn(this.a,"apiKey",this.h),qn(this.a,"appName",this.i),this.b=null,this.c=[]}function du(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function fu(t){try{return i.default.app(t).auth().Ga()}catch(t){return[]}}function pu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function vu(t){var e=dr();return function(t){return ru(t,qs,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Vn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=Vn(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:yr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Go(dr())}))}function gu(t){return t.m||(t.m=br().then((function(){if(!t.u){var e=t.c,n=t.i,r=fu(t.b),i=new hu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=Z(r||[]),t.u=i.toString()}t.v=new au(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.rb.then((function(){t.a.register("authEvent",e,Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Bo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Pe(n)}return n.status="ERROR",Pe(n)}))}(t)}))),t.m}function mu(t){return t.l||(t.C=t.c?Ar(t.c,fu(t.b)):null,t.l=new Xa(t.g,O(t.i),t.C),t.f&&os(t.l,t.f)),t.l}function yu(t,e,n,r,i,o,a,s,u,c,l,h){return(t=new du(t,e,n,r,i,h)).l=o,t.g=a,t.i=s,t.b=gt(u||null),t.f=c,t.yb(l).toString()}function _u(t){if(this.a=t||i.default.INTERNAL.reactNative&&i.default.INTERNAL.reactNative.AsyncStorage,!this.a)throw new k("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function bu(t){this.b=t,this.a={},this.f=I(this.c,this)}hu.prototype.toString=function(){return this.f?qn(this.a,"v",this.f):tr(this.a.b,"v"),this.b?qn(this.a,"eid",this.b):tr(this.a.b,"eid"),this.c.length?qn(this.a,"fw",this.c.join(",")):tr(this.a.b,"fw"),this.a.toString()},du.prototype.yb=function(t){return this.h=t,this},du.prototype.toString=function(){if(this.v){var t=Vn(this.v.url);t=Wn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Wn("https",this.u,null,"/__/auth/handler");if(qn(t,"apiKey",this.s),qn(t,"appName",this.c),qn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=i.default.app(this.c).auth().la()}catch(t){n=null}for(var r in e.ob=n,qn(t,"providerId",this.a.providerId),e=qr((n=this.a).Ib))e[r]=e[r].toString();r=n.Qc,e=gt(e);for(var o=0;o<r.length;o++){var a=r[o];a in e&&delete e[a]}n.pb&&n.ob&&!e[n.pb]&&(e[n.pb]=n.ob),vt(e)||qn(t,"customParameters",Fr(e))}if("function"==typeof this.a.Qb&&(n=this.a.Qb()).length&&qn(t,"scopes",n.join(",")),this.l?qn(t,"redirectUrl",this.l):tr(t.b,"redirectUrl"),this.g?qn(t,"eventId",this.g):tr(t.b,"eventId"),this.i?qn(t,"v",this.i):tr(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Un(t,s)&&qn(t,s,this.b[s]);return this.h?qn(t,"tid",this.h):tr(t.b,"tid"),this.f?qn(t,"eid",this.f):tr(t.b,"eid"),(s=fu(this.c)).length&&qn(t,"fw",s.join(",")),t.toString()},(t=pu.prototype).Ob=function(t,e,n){var r=new k("popup-closed-by-user"),i=new k("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return gu(t).then((function(){return function(t,e){return t.rb.then((function(){return new Ie((function(n){t.a.send(e.type,e,n,Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&gr(t),e(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(t){return new Ie((function(e){return function n(){Nn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!a)return Nn(n).then((function(){e(r)}))}))},t.Xb=function(){var t=xr();return!Mr(t)&&!Wr(t)},t.Tb=function(){return!1},t.Mb=function(t,e,n,r,i,o,a,s){if(!t)return Ae(new k("popup-blocked"));if(a&&!Mr())return this.ma().o((function(e){gr(t),i(e)})),r(),Pe();this.a||(this.a=vu(mu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw gr(t),i(e),e}));return r(),e})).then((function(){Vo(n),a||fr(yu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,s,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Nb=function(t,e,n,r){this.a||(this.a=vu(mu(this)));var i=this;return this.a.then((function(){Vo(e),fr(yu(i.s,i.g,i.b,t,e,dr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return gu(this).then((function(){return t.v.rb})).o((function(){throw t.a=null,new k("network-request-failed")}))},t.$b=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Sa=function(t){X(this.h,(function(e){return e==t}))},(t=_u.prototype).get=function(t){return Pe(this.a.getItem(t)).then((function(t){return t&&Ur(t)}))},t.set=function(t,e){return Pe(this.a.setItem(t,Fr(e)))},t.U=function(t){return Pe(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var wu,Iu=[];function Eu(t,e,n){vt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Tu(t){this.a=t}function Su(t){this.c=t,this.b=!1,this.a=[]}function Cu(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return Ae(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Ie((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),l),c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},t.a.push(c),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(e){return ku(t,c),e})).o((function(e){throw ku(t,c),e}))}function ku(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),X(t.a,(function(t){return t==e}))}}function Nu(){if(!Ru())throw new k("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=u.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;Er()&&self?(this.v=function(){var t=Er()?self:null;if(K(Iu,(function(n){n.b==t&&(e=n)})),!e){var e=new bu(t);Iu.push(e)}return e}(),Eu(this.v,"keyChanged",(function(e,n){return Mu(t).then((function(e){return 0<e.length&&K(t.a,(function(t){t(e)})),{keyProcessed:Y(e,n.key)}}))})),Eu(this.v,"ping",(function(){return Pe(["keyChanged"])}))):function(){var t=u.navigator;return t&&t.serviceWorker?Pe().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Pe(null)}().then((function(e){(t.h=e)&&(t.g=new Su(new Tu(e)),Cu(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&Y(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Pu(t){return new Ie((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new Ie((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Pu(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Au(t){return t.i||(t.i=Pu(t)),t.i}function xu(t,e){var n=0;return new Ie((function r(i,o){Au(t).then(e).then(i).o((function(e){if(!(3<++n))return Au(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Ru(){try{return!!u.indexedDB}catch(t){return!1}}function Ou(t){return t.objectStore("firebaseLocalStorage")}function Du(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Lu(t){return new Ie((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function ju(t,e){return t.g&&t.h&&function(){var t=u.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Cu(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Pe()}function Mu(t){return Au(t).then((function(t){var e=Ou(Du(t,!1));return e.getAll?Lu(e.getAll()):new Ie((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=pr(t.c,n),t.c=n}return r}))}function Fu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function qu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Pe().then((function(){if(Ru()){var t=Vr(),r="__sak"+t;return wu||(wu=new Nu),(n=wu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){K(e.a,(function(e){e(t)}))})),t}))}function Uu(){this.a={},this.type="inMemory"}function Vu(){if(!function(){var t="Node"==Tr();if(!(t=Wu()||t&&i.default.INTERNAL.node&&i.default.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Tr())throw new k("internal-error","The LocalStorage compatibility library was not found.");throw new k("web-storage-unsupported")}this.a=Wu()||i.default.INTERNAL.node.localStorage,this.type="localStorage"}function Wu(){try{var t=u.localStorage,e=Vr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Bu(){this.type="nullStorage"}function Hu(){if(!function(){var t="Node"==Tr();if(!(t=Ku()||t&&i.default.INTERNAL.node&&i.default.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Tr())throw new k("internal-error","The SessionStorage compatibility library was not found.");throw new k("web-storage-unsupported")}this.a=Ku()||i.default.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Ku(){try{var t=u.sessionStorage,e=Vr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function zu(){var t={};t.Browser=Yu,t.Node=$u,t.ReactNative=Xu,t.Worker=Ju,this.a=t[Tr()]}bu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];K(r,(function(e){i.push(Pe().then((function(){return e(t.origin,t.data.data)})))})),Re(i).then((function(r){var i=[];K(r,(function(t){i.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})})),K(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Tu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Su.prototype.close=function(){for(;0<this.a.length;)ku(this,this.a[0]);this.b=!0},(t=Nu.prototype).set=function(t,e){var n=this,r=!1;return xu(this,(function(e){return Lu((e=Ou(Du(e,!0))).get(t))})).then((function(i){return xu(n,(function(o){if(o=Ou(Du(o,!0)),i)return i.value=e,Lu(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=t,a.value=e,Lu(o.add(a))}))})).then((function(){return n.c[t]=e,ju(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return xu(this,(function(e){return Lu(Ou(Du(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return xu(this,(function(r){return n=!0,e.b++,Lu(Ou(Du(r,!0)).delete(t))})).then((function(){return delete e.c[t],ju(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){Fu(t),function e(){t.f=setTimeout((function(){t.l=Mu(t).then((function(e){0<e.length&&K(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},t.ia=function(t){X(this.a,(function(e){return e==t})),0==this.a.length&&Fu(this)},(t=qu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){X(this.a,(function(e){return e==t}))},(t=Uu.prototype).get=function(t){return Pe(this.a[t])},t.set=function(t,e){return this.a[t]=e,Pe()},t.U=function(t){return delete this.a[t],Pe()},t.ca=function(){},t.ia=function(){},(t=Vu.prototype).get=function(t){var e=this;return Pe().then((function(){return Ur(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Pe().then((function(){var r=Fr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Pe().then((function(){e.a.removeItem(t)}))},t.ca=function(t){u.window&&hn(u.window,"storage",t)},t.ia=function(t){u.window&&pn(u.window,"storage",t)},(t=Bu.prototype).get=function(){return Pe(null)},t.set=function(){return Pe()},t.U=function(){return Pe()},t.ca=function(){},t.ia=function(){},(t=Hu.prototype).get=function(t){var e=this;return Pe().then((function(){return Ur(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Pe().then((function(){var r=Fr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Pe().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Gu,Qu,Yu={F:Vu,bb:Hu},$u={F:Vu,bb:Hu},Xu={F:_u,bb:Bu},Ju={F:Vu,bb:Bu},Zu={rd:"local",NONE:"none",td:"session"};function tc(){var t=!(Wr(xr())||!Ir()),e=Mr(),n=Or();this.m=t,this.h=e,this.l=n,this.a={},Gu||(Gu=new zu),t=Gu;try{this.g=!hr()&&Gr()||!u.indexedDB?new t.a.F:new qu(Er()?new Uu:new t.a.F)}catch(t){this.g=new Uu,this.h=!0}try{this.i=new t.a.bb}catch(t){this.i=new Uu}this.v=new Uu,this.f=I(this.Yb,this),this.b={}}function ec(){return Qu||(Qu=new tc),Qu}function nc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function rc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ic(t,e,n){return n=rc(e,n),"local"==e.F&&(t.b[n]=null),nc(t,e.F).U(n)}function oc(t){t.c&&(clearInterval(t.c),t.c=null)}function ac(t){this.a=t,this.b=ec()}(t=tc.prototype).get=function(t,e){return nc(this,t.F).get(rc(t,e))},t.set=function(t,e,n){var r=rc(t,n),i=this,o=nc(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=rc(t,e),this.l&&(this.b[t]=u.localStorage.getItem(t)),vt(this.a)&&(nc(this,"local").ca(this.f),this.h||(hr()||!Gr())&&u.indexedDB||!this.l||function(t){oc(t),t.c=setInterval((function(){for(var e in t.a){var n=u.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Ze({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Yb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=rc(t,e),this.a[t]&&(X(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),vt(this.a)&&(nc(this,"local").ia(this.f),oc(this))},t.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=u.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?nc(this,"local").ia(this.f):oc(this),this.m)if(n=u.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?u.localStorage.setItem(e,r):u.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===u.localStorage.getItem(e)||(o.b[e]=u.localStorage.getItem(e),o.mb(e))},$t&&ue&&10==ue&&u.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else K(t,I(this.mb,this))},t.mb=function(t){this.a[t]&&K(this.a[t],(function(t){t()}))};var sc,uc={name:"authEvent",F:"local"};function cc(){this.a=ec()}function lc(t,e){this.b=hc,this.f=u.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=u.Int32Array?new Int32Array(64):Array(64),void 0===sc&&(sc=u.Int32Array?new Int32Array(yc):yc),this.reset()}S(lc,(function(){this.b=-1}));for(var hc=64,dc=hc-1,fc=[],pc=0;pc<dc;pc++)fc[pc]=0;var vc=J(128,fc);function gc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var d=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|sc[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+d|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function mc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(gc(t),i=0);else{if(!p(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(gc(t),i=0)}}t.c=i,t.g+=n}lc.prototype.reset=function(){this.g=this.c=0,this.a=u.Int32Array?new Int32Array(this.h):Z(this.h)};var yc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function _c(){lc.call(this,8,bc)}S(_c,lc);var bc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function wc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new cc,this.g=new ac(this.h),this.f=null,this.b=[],this.a=this.c=null}function Ic(t){return new k("invalid-cordova-configuration",t)}function Ec(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Tc(t){return t.f||(t.f=t.ma().then((function(){return new Ie((function(e){t.Ea((function n(r){return e(r),t.Sa(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Sc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=ao(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Ur(Un(o=Vn(i),"firebaseError")||null))?N(o):null)?new Wo(r.c,r.b,null,null,o,null,r.T()):new Wo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Ec(t,i)}))}var n=new Wo("unknown",null,null,null,new k("no-auth-event")),r=!1,i=Nn(500).then((function(){return Sc(t).then((function(){r||Ec(t,n)}))})),o=u.handleOpenURL;u.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Rr("BuildInfo.packageName",u).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},zo||(zo=new Ho),function(t){var e=zo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Rr("universalLinks.subscribe",u))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Sc(t){var e=null;return function(t){return t.b.get(uc,t.a).then((function(t){return Bo(t)}))}(t.g).then((function(n){return e=n,ic((n=t.g).b,uc,n.a)})).then((function(){return e}))}function Cc(t){this.a=t,this.b=ec()}(t=wc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(wr(void 0)?br().then((function(){return new Ie((function(t,e){var n=u.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Ae(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Rr("universalLinks.subscribe",u))throw Ic("cordova-universal-links-plugin-fix is not installed");if(void 0===Rr("BuildInfo.packageName",u))throw Ic("cordova-plugin-buildinfo is not installed");if("function"!=typeof Rr("cordova.plugins.browsertab.openUrl",u))throw Ic("cordova-plugin-browsertab is not installed");if("function"!=typeof Rr("cordova.InAppBrowser.open",u))throw Ic("cordova-plugin-inappbrowser is not installed")}),(function(){throw new k("cordova-not-ready")}))},t.Ob=function(t,e){return e(new k("operation-not-supported-in-this-environment")),Pe()},t.Mb=function(){return Ae(new k("operation-not-supported-in-this-environment"))},t.$b=function(){return!1},t.Xb=function(){return!0},t.Tb=function(){return!0},t.Nb=function(t,e,n,r){if(this.c)return Ae(new k("redirect-operation-pending"));var i=this,o=u.document,a=null,s=null,c=null,l=null;return this.c=Pe().then((function(){return Vo(e),Tc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new Wo(e,r,null,o,new k("no-auth-event"),null,i),s=Rr("BuildInfo.packageName",u);if("string"!=typeof s)throw new k("invalid-cordova-configuration");var c=Rr("BuildInfo.displayName",u),l={};if(xr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=s;else{if(!xr().toLowerCase().match(/android/))return Ae(new k("operation-not-supported-in-this-environment"));l.apn=s}c&&(l.appDisplayName=c),o=function(t){var e=new _c;mc(e,t),t=[];var n=8*e.g;56>e.c?mc(e,vc,56-e.c):mc(e,vc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(gc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return G(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}(o),l.sessionId=o;var h=yu(t.v,t.i,t.l,e,n,null,r,t.m,l,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(uc,a.w(),e)})).then((function(){var e=Rr("cordova.plugins.browsertab.isAvailable",u);if("function"!=typeof e)throw new k("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Rr("cordova.plugins.browsertab.openUrl",u)))throw new k("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=Rr("cordova.InAppBrowser.open",u)))throw new k("invalid-cordova-configuration");e=xr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new Ie((function(t,e){s=function(){var e=Rr("cordova.plugins.browsertab.close",u);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(s),c=function(){a||(a=Nn(2e3).then((function(){e(new k("redirect-cancelled-by-user"))})))},l=function(){Kr()&&c()},o.addEventListener("resume",c,!1),xr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).o((function(t){return Sc(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),s&&i.Sa(s),i.c=null}))},t.Ea=function(t){this.b.push(t),Tc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Wo("unknown",null,null,null,new k("no-auth-event")),t(e))}))},t.Sa=function(t){X(this.b,(function(e){return e==t}))};var kc={name:"pendingRedirect",F:"session"};function Nc(t){return ic(t.b,kc,t.a)}function Pc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=I(this.s,this),this.b=new Hc,this.C=new Yc,this.g=new Cc(Wc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Ac(this.D,this.v,this.m,P,this.J)}function Ac(t,e,n,r,o){var a=i.default.SDK_VERSION||null;return wr()?new wc(t,e,n,a,r,o):new pu(t,e,n,a,r,o)}function xc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Rc(t){t.a.Xb()&&xc(t).o((function(e){var n=new Wo("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));Fc(e)&&t.s(n)})),t.a.Tb()||Kc(t.b)}function Oc(t,e){Y(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(kc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Nc(t.g).then((function(){xc(t).o((function(e){var n=new Wo("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));Fc(e)&&t.s(n)}))})):Rc(t)})).o((function(){Rc(t)}))}function Dc(t,e){X(t.h,(function(t){return t==e}))}Pc.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=Ac(this.D,this.v,this.m,null,this.J),this.i={}},Pc.prototype.s=function(t){if(!t)throw new k("invalid-auth-event");if(6e5<=T()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=T())),e=!0;break}}return Kc(this.b),e};var Lc=new Hr(2e3,1e4),jc=new Hr(3e4,6e4);function Mc(t,e,n,r,i,o,a){return t.a.Mb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,a)}function Fc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function qc(t,e,n,r,i){var o;return function(t){return t.b.set(kc,"pending",t.a)}(t.g).then((function(){return t.a.Nb(e,n,r,i).o((function(e){if(Fc(e))throw new k("operation-not-supported-in-this-environment");return o=e,Nc(t.g).then((function(){throw o}))})).then((function(){return t.a.$b()?new Ie((function(){})):Nc(t.g).then((function(){return t.qa()})).then((function(){})).o((function(){}))}))}))}function Uc(t,e,n,r,i){return t.a.Ob(r,(function(t){e.na(n,null,t,i)}),Lc.get())}Pc.prototype.qa=function(){return this.b.qa()};var Vc={};function Wc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Bc(t,e,n,r){var i=Wc(e,n,r);return Vc[i]||(Vc[i]=new Pc(t,e,n,r)),Vc[i]}function Hc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Kc(t){t.g||(t.g=!0,Qc(t,!1,null,null))}function zc(t){t.g&&!t.i&&Qc(t,!1,null,null)}function Gc(t,e){if(t.b=function(){return Pe(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Qc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Ae(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Gc(t,n):Gc(t,{user:null}),t.f=[],t.c=[]}function Yc(){}function $c(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function Xc(t,e){this.a=e,Jr(this,"verificationId",t)}function Jc(t,e,n,r){return new Fo(t).fb(e,n).then((function(t){return new Xc(t,r)}))}function Zc(t){var e=zi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new k("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Zr(this,{token:t,expirationTime:zr(1e3*e.exp),authTime:zr(1e3*e.auth_time),issuedAtTime:zr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function tl(t,e,n){var r=e&&e[nl];if(!r)throw new k("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=gt(e),this.g=n,this.c=new so(null,r),this.b=[];var i=this;K(e[el]||[],(function(t){(t=ri(t))&&i.b.push(t)})),Jr(this,"auth",this.a),Jr(this,"session",this.c),Jr(this,"hints",this.b)}Hc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Hc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Qc(this,!0,null,t.a),Pe()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.T(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){Qc(t,s,e,null)})).o((function(e){Qc(t,s,null,e)}))}(this,t,e):Ae(new k("invalid-auth-event")):(Qc(this,!1,null,null),Pe())}else Ae(new k("invalid-auth-event"))},Hc.prototype.qa=function(){var t=this;return new Ie((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new k("timeout");t.a&&t.a.cancel(),t.a=Nn(jc.get()).then((function(){t.b||(t.g=!0,Qc(t,!0,null,e))}))}(t))}))},Yc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Pe()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):Ae(new k("invalid-auth-event"))}else Ae(new k("invalid-auth-event"))},Xc.prototype.confirm=function(t){return t=qo(this.verificationId,t),this.a(t)};var el="mfaInfo",nl="mfaPendingCredential";function rl(t,e,n,r){k.call(this,"multi-factor-auth-required",r,e),this.b=new tl(t,e,n),Jr(this,"resolver",this.b)}function il(t,e,n){if(t&&g(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new rl(e,t.serverResponse,n,t.message)}catch(t){}return null}function ol(){}function al(t){Jr(this,"factorId",t.fa),this.a=t}function sl(t){if(al.call(this,t),this.a.fa!=Fo.PROVIDER_ID)throw new k("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function ul(t,e){for(var n in Je.call(this,t),e)this[n]=e[n]}function cl(t,e){this.a=t,this.b=[],this.c=I(this.yc,this),hn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&K(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ai]=t.uid),t.displayName&&(r[ii]=t.displayName),t.enrollmentTime&&(r[oi]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[si]=t.phoneNumber);try{e=new ui(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),ll(this,n)}function ll(t,e){t.b=e,Jr(t,"enrolledFactors",e)}function hl(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function dl(t,e){t.stop(),t.b=Nn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=u.document,e=null;return Kr()||!t?Pe():new Ie((function(n){e=function(){Kr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){dl(t,!0)})).o((function(e){t.i(e)&&dl(t,!1)}))}function fl(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function pl(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function vl(t,e){t.b=Ki(e[Za]||""),t.a=e.refreshToken,pl(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function gl(t,e){this.a=t||null,this.b=e||null,Zr(this,{lastSignInTime:zr(e||null),creationTime:zr(t||null)})}function ml(t,e,n,r,i,o){Zr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function yl(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=i.default.SDK_VERSION?Ar(i.default.SDK_VERSION):null;this.a=new Xa(this.l,O(P),r),t.emulatorConfig&&os(this.a,t.emulatorConfig),this.b=new fl(this.a),Cl(this,e[Za]),vl(this.b,e),Jr(this,"refreshToken",this.b.a),Pl(this,n||{}),En.call(this),this.R=!1,this.s&&Dr()&&(this.i=Bc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=function(t){return new hl((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.b.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.aa=I(this.hb,this);var o=this;this.ya=null,this.Oa=function(t){o.wa(t.h)},this.ja=null,this.Aa=function(t){os(o.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){wl(o,t.f)},this.ba=null,this.O=new cl(this,n),Jr(this,"multiFactor",this.O)}function _l(t,e){t.ja&&pn(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&hn(e,"languageCodeChanged",t.Oa)}function bl(t,e){t.X&&pn(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&hn(e,"emulatorConfigChanged",t.Aa)}function wl(t,e){t.$=e,ss(t.a,i.default.SDK_VERSION?Ar(i.default.SDK_VERSION,t.$):null)}function Il(t,e){t.ba&&pn(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&hn(e,"frameworkChanged",t.Ba)}function El(t){try{return i.default.app(t.m).auth()}catch(e){throw new k("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Tl(t){t.D||t.u.b||(t.u.start(),pn(t,"tokenChanged",t.aa),hn(t,"tokenChanged",t.aa))}function Sl(t){pn(t,"tokenChanged",t.aa),t.u.stop()}function Cl(t,e){t.za=e,Jr(t,"_lat",e)}function kl(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return Re(e).then((function(){return t}))}function Nl(t){t.i&&!t.R&&(t.R=!0,Oc(t.i,t))}function Pl(t,e){Zr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new gl(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Al(){}function xl(t){return Pe().then((function(){if(t.D)throw new k("app-deleted")}))}function Rl(t){return G(t.providerData,(function(t){return t.providerId}))}function Ol(t,e){e&&(Dl(t,e.providerId),t.providerData.push(e))}function Dl(t,e){X(t.providerData,(function(t){return t.providerId==e}))}function Ll(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Jr(t,e,n)}function jl(t,e){t!=e&&(Zr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Jr(t,"metadata",function(t){return new gl(t.a,t.b)}(e.metadata)):Jr(t,"metadata",new gl),K(e.providerData,(function(e){Ol(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),Jr(t,"refreshToken",t.b.a),ll(t.O,e.O.b))}function Ml(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return ru(t.a,Ds,{idToken:e}).then(I(t.Kc,t))}(t,e).then((function(){return n||Ll(t,"isAnonymous",!1),e}))}))}function Fl(t,e){e[Za]&&t.za!=e[Za]&&(vl(t.b,e),t.dispatchEvent(new ul("tokenChanged")),Cl(t,e[Za]),Ll(t,"refreshToken",t.b.a))}function ql(t,e){return Ml(t).then((function(){if(Y(Rl(t),e))return kl(t).then((function(){throw new k("provider-already-linked")}))}))}function Ul(t,e,n){return ti({user:t,credential:Uo(e),additionalUserInfo:e=Xi(e),operationType:n})}function Vl(t,e){return Fl(t,e),t.reload().then((function(){return t}))}function Wl(t,e,n,r,o){if(!Dr())return Ae(new k("operation-not-supported-in-this-environment"));if(t.h&&!o)return Ae(t.h);var a=$i(n.providerId),s=Vr(t.uid+":::"),u=null;(!Mr()||Ir())&&t.s&&n.isOAuthProvider&&(u=yu(t.s,t.l,t.m,e,n,null,s,i.default.SDK_VERSION||null,null,null,t.tenantId));var c=mr(u,a&&a.ua,a&&a.ta);return r=r().then((function(){if(Hl(t),!o)return t.I().then((function(){}))})).then((function(){return Mc(t.i,c,e,n,s,!!u,t.tenantId)})).then((function(){return new Ie((function(n,r){t.na(e,null,new k("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=s,t.c=Uc(t.i,t,e,c,s)}))})).then((function(t){return c&&gr(c),t?ti(t):null})).o((function(t){throw c&&gr(c),t})),Kl(t,r,o)}function Bl(t,e,n,r,i){if(!Dr())return Ae(new k("operation-not-supported-in-this-environment"));if(t.h&&!i)return Ae(t.h);var o=null,a=Vr(t.uid+":::");return r=r().then((function(){if(Hl(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=a,kl(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Ql,t.w(),e.a)),e})).then((function(){return qc(t.i,e,n,a,t.tenantId)})).o((function(e){if(o=e,t.ha)return Yl(t.ha);throw o})).then((function(){if(o)throw o})),Kl(t,r,i)}function Hl(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new k("internal-error");throw new k("auth-domain-config-required")}}function Kl(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),Ae(t.h)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new ul("userInvalidated")),t.h=e),e}))}(t,e,n);return t.J.push(r),r.oa((function(){$(t.J,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=il(e.w(),El(t),I(t.jc,t))),n||e}))}function zl(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Za]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new yl(e,n,t);return t.providerData&&K(t.providerData,(function(t){t&&Ol(i,ti(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Gl(t){this.a=t,this.b=ec()}tl.prototype.Rc=function(t){var e=this;return t.sb(this.a.a,this.c).then((function(t){var n=gt(e.f);return delete n[el],delete n[nl],yt(n,t),e.g(n)}))},S(rl,k),ol.prototype.sb=function(t,e,n){return e.type==uo?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),yt(n,{phoneVerificationInfo:Mo(t.a)}),ru(e,Rs,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return yt(n={mfaPendingCredential:n},{phoneVerificationInfo:Mo(t.a)}),ru(e,Os,n)}))}(this,t,e)},S(al,ol),S(sl,al),S(ul,Je),(t=cl.prototype).yc=function(t){ll(this,function(t){var e=[];return K(t.mfaInfo||[],(function(t){(t=ri(t))&&e.push(t)})),e}(t.hd))},t.Rb=function(){return this.a.I().then((function(t){return new so(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Rb().then((function(n){return t.sb(r,n,e)})).then((function(t){return Fl(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return ru(r,nu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=z(e.b,(function(t){return t.uid!=n}));return ll(e,r),Fl(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:G(this.b,(function(t){return t.w()}))}}},hl.prototype.start=function(){this.a=this.c,dl(this,!0)},hl.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},fl.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},fl.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Ae(new k("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?function(t,e){return function(t,e){return new Ie((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?us(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(ou(t)):t.access_token&&t.refresh_token?n(t):r(new k("internal-error")):r(new k("network-request-failed"))}),"POST",Zn(e).toString(),t.g,t.m.get()):r(new k("internal-error"))}))}(t.f,e).then((function(e){return t.b=Ki(e.access_token),t.a=e.refresh_token,pl(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):Pe(null):Pe({accessToken:this.b.toString(),refreshToken:this.a})},gl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},S(yl,En),yl.prototype.wa=function(t){this.ya=t,is(this.a,t)},yl.prototype.la=function(){return this.ya},yl.prototype.Ga=function(){return Z(this.$)},yl.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},Jr(yl.prototype,"providerId","firebase"),(t=yl.prototype).reload=function(){var t=this;return Kl(this,xl(this).then((function(){return Ml(t).then((function(){return kl(t)})).then(Al)})))},t.oc=function(t){return this.I(t).then((function(t){return new Zc(t)}))},t.I=function(t){var e=this;return Kl(this,xl(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new k("internal-error");return t.accessToken!=e.za&&(Cl(e,t.accessToken),e.dispatchEvent(new ul("tokenChanged"))),Ll(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new k("internal-error");Pl(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?G(t,(function(t){return new ml(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Ol(this,e[n]);Ll(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new ul("userReloaded",{hd:t}))},t.Lc=function(t){return $r("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},t.tb=function(t){var e=this,n=null;return Kl(this,t.c(this.a,this.uid).then((function(t){return Fl(e,t),n=Ul(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return $r("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},t.qb=function(t){var e=this,n=null;return Kl(this,ql(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Ul(e,t,"link"),Vl(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return Kl(this,ql(this,"phone").then((function(){return Jc(El(n),t,e,I(n.qb,n))})))},t.Mc=function(t,e){var n=this;return Kl(this,Pe().then((function(){return Jc(El(n),t,e,I(n.tb,n))})),!0)},t.Bb=function(t){var e=this;return Kl(this,this.I().then((function(n){return e.a.Bb(n,t)})).then((function(t){return Fl(e,t),e.reload()})))},t.ed=function(t){var e=this;return Kl(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Fl(e,t),e.reload()})))},t.Cb=function(t){var e=this;return Kl(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return Fl(e,t),e.reload()})))},t.Db=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return xl(this);var e=this;return Kl(this,this.I().then((function(n){return e.a.Db(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Fl(e,t),Ll(e,"displayName",t.displayName||null),Ll(e,"photoURL",t.photoUrl||null),K(e.providerData,(function(t){"password"===t.providerId&&(Jr(t,"displayName",e.displayName),Jr(t,"photoURL",e.photoURL))})),kl(e)})).then(Al))},t.cd=function(t){var e=this;return Kl(this,Ml(this).then((function(n){return Y(Rl(e),t)?function(t,e,n){return ru(t,Ps,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return K(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),K(Rl(e),(function(t){n[t]||Dl(e,t)})),n[Fo.PROVIDER_ID]||Jr(e,"phoneNumber",null),kl(e)})):kl(e).then((function(){throw new k("no-such-provider")}))})))},t.delete=function(){var t=this;return Kl(this,this.I().then((function(e){return ru(t.a,Ns,{idToken:e})})).then((function(){t.dispatchEvent(new ul("userDeleted"))}))).then((function(){for(var e=0;e<t.J.length;e++)t.J[e].cancel("app-deleted");_l(t,null),bl(t,null),Il(t,null),t.J=[],t.D=!0,Sl(t),Jr(t,"refreshToken",null),t.i&&Dc(t.i,t)}))},t.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?I(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?I(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?I(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?I(this.Lb,this):null},t.Ec=function(t){var e=this;return Wl(this,"linkViaPopup",t,(function(){return ql(e,t.providerId).then((function(){return kl(e)}))}),!1)},t.Nc=function(t){return Wl(this,"reauthViaPopup",t,(function(){return Pe()}),!0)},t.Fc=function(t){var e=this;return Bl(this,"linkViaRedirect",t,(function(){return ql(e,t.providerId)}),!1)},t.Oc=function(t){return Bl(this,"reauthViaRedirect",t,(function(){return Pe()}),!0)},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Kl(this,this.I().then((function(n){return ws(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Ul(i,t,"link"),Vl(i,t)})).then((function(){return o})))},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Kl(this,Pe().then((function(){return ho(Is(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Ul(i,t,"reauthenticate"),Fl(i,t),i.h=null,i.reload()})).then((function(){return o})),!0)},t.ub=function(t){var e=this,n=null;return Kl(this,this.I().then((function(e){return n=e,void 0===t||vt(t)?{}:Wi(new Ri(t))})).then((function(t){return e.a.ub(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Eb=function(t,e){var n=this,r=null;return Kl(this,this.I().then((function(t){return r=t,void 0===e||vt(e)?{}:Wi(new Ri(e))})).then((function(e){return n.a.Eb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return Kl(this,t=ho(Pe(t),n.uid).then((function(t){return e=Ul(n,t,"reauthenticate"),Fl(n,t),n.h=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&yt(t,this.metadata.w()),K(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),yt(t,this.O.w()),t};var Ql={name:"redirectUser",F:"session"};function Yl(t){return ic(t.b,Ql,t.a)}function $l(t){this.a=t,this.b=ec(),this.c=null,this.f=function(t){var e=Zl("local"),n=Zl("session"),r=Zl("none");return function(t,e,n){var r=rc(e,n),i=nc(t,e.F);return t.get(e,n).then((function(o){var a=null;try{a=Ur(u.localStorage.getItem(r))}catch(t){}if(a&&!o)return u.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&u.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(Jl,t.a).then((function(t){return t?Zl(t):e}))}))}))})).then((function(e){return t.c=e,Xl(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(Zl("local"),this.a,I(this.g,this))}function Xl(t,e){var n,r=[];for(n in Zu)Zu[n]!==e&&r.push(ic(t.b,Zl(Zu[n]),t.a));return r.push(ic(t.b,Jl,t.a)),function(t){return new Ie((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)xe(t[s],E(o,s),a);else e(i)}))}(r)}$l.prototype.g=function(){var t=this,e=Zl("local");rh(this,(function(){return Pe().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return Xl(t,"local").then((function(){t.c=e}))}))}))};var Jl={name:"persistence",F:"session"};function Zl(t){return{name:"authUser",F:t}}function th(t,e){return rh(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function eh(t){return rh(t,(function(){return ic(t.b,t.c,t.a)}))}function nh(t,e,n){return rh(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),zl(t||{})}))}))}function rh(t,e){return t.f=t.f.then(e,e),t.f}function ih(t){if(this.l=!1,Jr(this,"settings",new $c),Jr(this,"app",t),!dh(this).options||!dh(this).options.apiKey)throw new k("invalid-api-key");t=i.default.SDK_VERSION?Ar(i.default.SDK_VERSION):null,this.a=new Xa(dh(this).options&&dh(this).options.apiKey,O(P),t),this.R=[],this.s=[],this.O=[],this.hb=i.default.INTERNAL.createSubscribe(I(this.zc,this)),this.X=void 0,this.bc=i.default.INTERNAL.createSubscribe(I(this.Ac,this)),lh(this,null),this.i=new $l(dh(this).options.apiKey+":"+dh(this).name),this.D=new Gl(dh(this).options.apiKey+":"+dh(this).name),this.$=gh(this,function(t){var e=dh(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Ql,t.a).then((function(t){return t&&e&&(t.authDomain=e),zl(t||{})}))}(t.D,dh(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),Yl(t.D)}));return gh(t,e)}(t).then((function(){return nh(t.i,e,t.P)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return th(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:eh(t.i)}))):null})).then((function(e){lh(t,e||null)}));return gh(t,n)}(this)),this.h=gh(this,function(t){return t.$.then((function(){return ch(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(Zl("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=I(this.Zc,this),this.Ba=I(this.da,this),this.ya=I(this.mc,this),this.za=I(this.wc,this),this.Aa=I(this.xc,this),this.b=null,function(t){var e=dh(t).options.authDomain,n=dh(t).options.apiKey;e&&Dr()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=Bc(e,n,dh(t).name,t.P),Oc(t.b,t),fh(t)&&Nl(fh(t)),t.m){Nl(t.m);var r=t.m;r.wa(t.la()),_l(r,t),wl(r=t.m,t.J),Il(r,t),os((r=t.m).a,t.P),bl(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=I(this.delete,this),this.INTERNAL.logFramework=I(this.Gc,this),this.u=0,En.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.P){var t=Vn(this.P.url);t=ti({protocol:t.c,host:t.a,port:t.g,options:ti({disableWarnings:this.P.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.P=null}function oh(t){Je.call(this,"languageCodeChanged"),this.h=t}function ah(t){Je.call(this,"emulatorConfigChanged"),this.c=t}function sh(t){Je.call(this,"frameworkChanged"),this.f=t}function uh(t){return t.Oa||Ae(new k("auth-domain-config-required"))}function ch(t){if(!Dr())return Ae(new k("operation-not-supported-in-this-environment"));var e=uh(t).then((function(){return t.b.qa()})).then((function(t){return t?ti(t):null}));return gh(t,e)}function lh(t,e){fh(t)&&(function(t,e){X(t.S,(function(t){return t==e}))}(fh(t),t.Ba),pn(fh(t),"tokenChanged",t.ya),pn(fh(t),"userDeleted",t.za),pn(fh(t),"userInvalidated",t.Aa),Sl(fh(t))),e&&(e.S.push(t.Ba),hn(e,"tokenChanged",t.ya),hn(e,"userDeleted",t.za),hn(e,"userInvalidated",t.Aa),0<t.u&&Tl(e)),Jr(t,"currentUser",e),e&&(e.wa(t.la()),_l(e,t),wl(e,t.J),Il(e,t),os(e.a,t.P),bl(e,t))}function hh(t,e){var n=null,r=null;return gh(t,e.then((function(e){return n=Uo(e),r=Xi(e),function(t,e){var n={};return n.apiKey=dh(t).options.apiKey,n.authDomain=dh(t).options.authDomain,n.appName=dh(t).name,t.P&&(n.emulatorConfig=t.P),t.$.then((function(){return function(t,e,n,r){var i=new yl(t,e);return n&&(i.ha=n),r&&wl(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return fh(t)&&e.uid==fh(t).uid?(jl(fh(t),e),t.da(e)):(lh(t,e),Nl(e),t.da(e))})).then((function(){vh(t)}))}(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=il(e.w(),t,I(t.kc,t))),n||e})).then((function(){return ti({user:fh(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function dh(t){return t.app}function fh(t){return t.currentUser}function ph(t){return fh(t)&&fh(t)._lat||null}function vh(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](ph(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](ph(t))}}function gh(t,e){return t.R.push(e),e.oa((function(){$(t.R,e)})),e}function mh(){}function yh(){this.a={},this.b=1e12}$l.prototype.xb=function(t){var e=null,n=this;return function(t){var e=new k("invalid-persistence-type"),n=new k("unsupported-persistence-type");t:{for(r in Zu)if(Zu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Tr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Ru()&&"none"!==t)throw n;break;default:if(!Or()&&"none"!==t)throw n}}(t),rh(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,Xl(n,t)})).then((function(){if(n.c=Zl(t),e)return n.b.set(n.c,e,n.a)})):Pe()}))},S(ih,En),S(oh,Je),S(ah,Je),S(sh,Je),(t=ih.prototype).xb=function(t){return gh(this,t=this.i.xb(t))},t.wa=function(t){this.aa===t||this.l||(this.aa=t,is(this.a,this.aa),this.dispatchEvent(new oh(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=u.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new k("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),u.document&&!t&&br().then((function(){var t=u.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),u.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.P={url:t,ec:e},this.settings.ib=!0,os(this.a,this.P),this.dispatchEvent(new ah(this.P))}},t.Gc=function(t){this.J.push(t),ss(this.a,i.default.SDK_VERSION?Ar(i.default.SDK_VERSION,this.J):null),this.dispatchEvent(new sh(this.J))},t.Ga=function(){return Z(this.J)},t.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:dh(this).options.apiKey,authDomain:dh(this).options.authDomain,appName:dh(this).name,currentUser:fh(this)&&fh(this).w()}},t.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?I(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return hh(i,bs(i.a,o))}))},t.Xc=function(t){if(!Dr())return Ae(new k("operation-not-supported-in-this-environment"));var e=this,n=$i(t.providerId),r=Vr(),o=null;(!Mr()||Ir())&&dh(this).options.authDomain&&t.isOAuthProvider&&(o=yu(dh(this).options.authDomain,dh(this).options.apiKey,dh(this).name,"signInViaPopup",t,null,r,i.default.SDK_VERSION||null,null,null,this.T(),this.P));var a=mr(o,n&&n.ua,n&&n.ta);return gh(this,n=uh(this).then((function(n){return Mc(n,a,"signInViaPopup",t,r,!!o,e.T())})).then((function(){return new Ie((function(t,n){e.na("signInViaPopup",null,new k("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=Uc(e.b,e,"signInViaPopup",a,r)}))})).then((function(t){return a&&gr(a),t?ti(t):null})).o((function(t){throw a&&gr(a),t})))},t.Yc=function(t){if(!Dr())return Ae(new k("operation-not-supported-in-this-environment"));var e=this;return gh(this,uh(this).then((function(){return function(t){return rh(t,(function(){return t.b.set(Jl,t.c.F,t.a)}))}(e.i)})).then((function(){return qc(e.b,"signInViaRedirect",t,void 0,e.T())})))},t.qa=function(){var t=this;return ch(this).then((function(e){return t.b&&zc(t.b.b),e})).o((function(e){throw t.b&&zc(t.b.b),e}))},t.dd=function(t){if(!t)return Ae(new k("null-user"));if(this.S!=t.tenantId)return Ae(new k("tenant-id-mismatch"));var e=this,n={};n.apiKey=dh(this).options.apiKey,n.authDomain=dh(this).options.authDomain,n.appName=dh(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Za]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new yl(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&wl(e,r),jl(e,t),e}(t,n,e.D,e.Ga());return gh(this,this.h.then((function(){if(dh(e).options.apiKey!=t.l)return r.reload()})).then((function(){return fh(e)&&t.uid==fh(e).uid?(jl(fh(e),t),e.da(t)):(lh(e,r),Nl(r),e.da(r))})).then((function(){vh(e)})))},t.Ab=function(){var t=this;return gh(this,this.h.then((function(){return t.b&&zc(t.b.b),fh(t)?(lh(t,null),eh(t.i).then((function(){vh(t)}))):Pe()})))},t.Zc=function(){var t=this;return nh(this.i,dh(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=fh(t)&&e){n=fh(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return jl(fh(t),e),fh(t).I();(fh(t)||e)&&(lh(t,e),e&&(Nl(e),e.ha=t.D),t.b&&Oc(t.b,t),vh(t))}}))},t.da=function(t){return th(this.i,t)},t.mc=function(){vh(this),this.da(fh(this))},t.wc=function(){this.Ab()},t.xc=function(){this.Ab()},t.kc=function(t){var e=this;return this.h.then((function(){return hh(e,Pe(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(fh(e))}))},t.Ac=function(t){var e=this;!function(t,e){t.O.push(e),gh(t,t.h.then((function(){!t.l&&Y(t.O,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(ph(t)))})))}(this,(function(){t.next(fh(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(fh(r)):"function"==typeof t.next&&t.next(fh(r))})),this.hb(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"==typeof t?t(fh(r)):"function"==typeof t.next&&t.next(fh(r))})),this.bc(t,e,n)},t.nc=function(t){var e=this;return gh(this,this.h.then((function(){return fh(e)?fh(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return hh(e,ru(e.a,Xs,{token:t}))})).then((function(t){var n=t.user;return Ll(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return hh(n,ru(n.a,Js,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return hh(n,ru(n.a,Cs,{email:t,password:e}))}))},t.$a=function(t){var e=this;return this.h.then((function(){return hh(e,t.ka(e.a))}))},t.Sc=function(t){return $r("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},t.zb=function(){var t=this;return this.h.then((function(){var e=fh(t);if(e&&e.isAnonymous){var n=ti({providerId:null,isNewUser:!1});return ti({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return hh(t,t.a.zb()).then((function(e){var n=e.user;return Ll(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return fh(this)&&fh(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&fh(this)&&Tl(fh(this))},t.Pc=function(t){var e=this;K(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&fh(this)&&Sl(fh(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),gh(this,this.h.then((function(){e.l||Y(e.s,t)&&t(ph(e))})))},t.removeAuthTokenListener=function(t){X(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener(Zl("local"),t.a,this.ja),this.b&&(Dc(this.b,this),zc(this.b.b)),Promise.resolve()},t.hc=function(t){return gh(this,function(t,e){return ru(t,ks,{identifier:e,continueUri:Lr()?dr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Bc=function(t){return!!Do(t)},t.wb=function(t,e){var n=this;return gh(this,Pe().then((function(){var t=new Ri(e);if(!t.c)throw new k("argument-error",Li+" must be true when sending sign in link to email");return Wi(t)})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.jd=function(t){return this.Ra(t).then((function(t){return t.data.email}))},t.nb=function(t,e){return gh(this,this.a.nb(t,e).then((function(){})))},t.Ra=function(t){return gh(this,this.a.Ra(t).then((function(t){return new ci(t)})))},t.jb=function(t){return gh(this,this.a.jb(t).then((function(){})))},t.vb=function(t,e){var n=this;return gh(this,Pe().then((function(){return void 0===e||vt(e)?{}:Wi(new Ri(e))})).then((function(e){return n.a.vb(t,e)})).then((function(){})))},t.Wc=function(t,e){return gh(this,Jc(this,t,e,I(this.$a,this)))},t.Vc=function(t,e){var n=this;return gh(this,Pe().then((function(){var r=e||dr(),i=Oo(t,r);if(!(r=Do(r)))throw new k("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new k("tenant-id-mismatch");return n.$a(i)})))},mh.prototype.render=function(){},mh.prototype.reset=function(){},mh.prototype.getResponse=function(){},mh.prototype.execute=function(){};var _h=null;function bh(t,e){return(e=wh(e))&&t.a[e]||null}function wh(t){return(t=void 0===t?1e12:t)?t.toString():null}function Ih(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=le(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():hn(this.f,"click",this.i)}function Eh(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Th(){}function Sh(){}yh.prototype.render=function(t,e){return this.a[this.b.toString()]=new Ih(t,e),this.b++},yh.prototype.reset=function(t){var e=bh(this,t);t=wh(t),e&&t&&(e.delete(),delete this.a[t])},yh.prototype.getResponse=function(t){return(t=bh(this,t))?t.getResponse():null},yh.prototype.execute=function(t){(t=bh(this,t))&&t.execute()},Ih.prototype.getResponse=function(){return Eh(this),this.b},Ih.prototype.execute=function(){Eh(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},Ih.prototype.delete=function(){Eh(this),this.g=!0,clearTimeout(this.a),this.a=null,pn(this.f,"click",this.i)},Jr(Th,"FACTOR_ID","phone"),Sh.prototype.g=function(){return _h||(_h=new yh),Pe(_h)},Sh.prototype.c=function(){};var Ch=null;function kh(){this.b=u.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Nh=new bt(Tt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Ph=new Hr(3e4,6e4);kh.prototype.g=function(t){var e=this;return new Ie((function(n,r){var i=setTimeout((function(){r(new k("network-request-failed"))}),Ph.get());!u.grecaptcha||t!==e.f&&!e.b?(u[e.a]=function(){if(u.grecaptcha){e.f=t;var o=u.grecaptcha.render;u.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(u.grecaptcha)}else clearTimeout(i),r(new k("internal-error"));delete u[e.a]},Pe(Ha(Nt(Nh,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new k("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(u.grecaptcha))}))},kh.prototype.c=function(){this.b--};var Ah=null;function xh(t,e,n,r,i,o,a){if(Jr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,a?(Ch||(Ch=new Sh),a=Ch):(Ah||(Ah=new kh),a=Ah),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Dh])throw new k("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Lh],!u.document)throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!le(e)||!this.i&&le(e).hasChildNodes())throw new k("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Xa(t,o||null,i||null),this.u=r||function(){return null};var s=this;this.l=[];var c=this.a[Rh];this.a[Rh]=function(t){if(jh(s,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Rr(c,u);"function"==typeof e&&e(t)}};var l=this.a[Oh];this.a[Oh]=function(){if(jh(s,null),"function"==typeof l)l();else if("string"==typeof l){var t=Rr(l,u);"function"==typeof t&&t()}}}var Rh="callback",Oh="expired-callback",Dh="sitekey",Lh="size";function jh(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Mh(t,e){return t.h.push(e),e.oa((function(){$(t.h,e)})),e}function Fh(t){if(t.D)throw new k("internal-error","RecaptchaVerifier instance has been destroyed.")}function qh(t,e,n){var r=!1;try{this.b=n||i.default.app()}catch(t){throw new k("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new k("invalid-api-key");n=this.b.options.apiKey;var o=this,a=null;try{a=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}a=i.default.SDK_VERSION?Ar(i.default.SDK_VERSION,a):null,xh.call(this,n,t,e,(function(){try{var t=o.b.auth().la()}catch(e){t=null}return t}),a,O(P),r)}function Uh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new k("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Vh.length)throw new k("internal-error","Argument validator received an unsupported number of arguments.");n=Vh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new k("argument-error",t+" failed: "+r)}(t=xh.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Mh(this,Pe().then((function(){if(Lr()&&!Er())return br();throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,ru(t.s,Us,{})})).then((function(e){t.a[Dh]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){Fh(this);var t=this;return Mh(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=le(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!ce&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Kt(a.name),'"'),a.type){o.push(' type="',Kt(a.type),'"');var s={};yt(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=ge(i,o),a&&("string"==typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):he(o,a)),2<r.length&&ve(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Fh(this);var t=this;return Mh(this,this.render().then((function(e){return new Ie((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){X(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Fh(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Fh(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=le(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},S(qh,xh);var Vh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Wh(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Bh(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Hh(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:g}}function Kh(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function zh(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Gh(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Qh(t,e){return g(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Yh(t){return g(t)&&"string"==typeof t.uid}function $h(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Xh(t,e){for(var n in e){var r=e[n].name;t[r]=td(r,t[n],e[n].j)}}function Jh(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:E((function(t){return this[t]}),n),set:E((function(t,e,n,r){Uh(t,[n],[r],!0),this[e]=r}),r,n,e[n].kb),enumerable:!0})}}function Zh(t,e,n,r){t[e]=td(e,n,r)}function td(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Uh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Xh(ih.prototype,{jb:{name:"applyActionCode",j:[Wh("code")]},Ra:{name:"checkActionCode",j:[Wh("code")]},nb:{name:"confirmPasswordReset",j:[Wh("code"),Wh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Wh("email"),Wh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Wh("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Wh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[$h(Hh(),Kh(),"nextOrObserver"),Kh("opt_error",!0),Kh("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[$h(Hh(),Kh(),"nextOrObserver"),Kh("opt_error",!0),Kh("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[Wh("email"),$h(Hh("opt_actionCodeSettings",!0),zh(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[Wh("email"),Hh("actionCodeSettings")]},xb:{name:"setPersistence",j:[Wh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Gh()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[Gh()]},Tc:{name:"signInWithCustomToken",j:[Wh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Wh("email"),Wh("password")]},Vc:{name:"signInWithEmailLink",j:[Wh("email"),Wh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Wh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[$h({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof yl)}},zh(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Wh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Wh("url"),Hh("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Wh("code")]}}),Jh(ih.prototype,{lc:{name:"languageCode",kb:$h(Wh(),zh(),"languageCode")},ti:{name:"tenantId",kb:$h(Wh(),zh(),"tenantId")}}),ih.Persistence=Zu,ih.Persistence.LOCAL="local",ih.Persistence.SESSION="session",ih.Persistence.NONE="none",Xh(yl.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Bh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Bh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Gh()]},qb:{name:"linkWithCredential",j:[Gh()]},Dc:{name:"linkWithPhoneNumber",j:[Wh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Gh()]},tb:{name:"reauthenticateWithCredential",j:[Gh()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Wh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[$h(Hh("opt_actionCodeSettings",!0),zh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Wh(null,!0)]},cd:{name:"unlink",j:[Wh("provider")]},Bb:{name:"updateEmail",j:[Wh("email")]},Cb:{name:"updatePassword",j:[Wh("password")]},ed:{name:"updatePhoneNumber",j:[Gh("phone")]},Db:{name:"updateProfile",j:[Hh("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[Wh("email"),$h(Hh("opt_actionCodeSettings",!0),zh(null,!0),"opt_actionCodeSettings",!0)]}}),Xh(yh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Xh(mh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Xh(Ie.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Jh($c.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Bh("appVerificationDisabledForTesting")}}),Xh(Xc.prototype,{confirm:{name:"confirm",j:[Wh("verificationCode")]}}),Zh(lo,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[yo,xo,jo,vo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[$h(Wh(),Hh(),"json")]),Zh(Ro,"credential",(function(t,e){return new Ao(t,e)}),[Wh("email"),Wh("password")]),Xh(Ao.prototype,{w:{name:"toJSON",j:[Wh(null,!0)]}}),Xh(Io.prototype,{Ca:{name:"addScope",j:[Wh("scope")]},Ka:{name:"setCustomParameters",j:[Hh("customOAuthParameters")]}}),Zh(Io,"credential",Eo,[$h(Wh(),Hh(),"token")]),Zh(Ro,"credentialWithLink",Oo,[Wh("email"),Wh("emailLink")]),Xh(To.prototype,{Ca:{name:"addScope",j:[Wh("scope")]},Ka:{name:"setCustomParameters",j:[Hh("customOAuthParameters")]}}),Zh(To,"credential",So,[$h(Wh(),Hh(),"token")]),Xh(Co.prototype,{Ca:{name:"addScope",j:[Wh("scope")]},Ka:{name:"setCustomParameters",j:[Hh("customOAuthParameters")]}}),Zh(Co,"credential",ko,[$h(Wh(),$h(Hh(),zh()),"idToken"),$h(Wh(),zh(),"accessToken",!0)]),Xh(No.prototype,{Ka:{name:"setCustomParameters",j:[Hh("customOAuthParameters")]}}),Zh(No,"credential",Po,[$h(Wh(),Hh(),"token"),Wh("secret",!0)]),Xh(wo.prototype,{Ca:{name:"addScope",j:[Wh("scope")]},credential:{name:"credential",j:[$h(Wh(),$h(Hh(),zh()),"optionsOrIdToken"),$h(Wh(),zh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Hh("customOAuthParameters")]}}),Xh(go.prototype,{w:{name:"toJSON",j:[Wh(null,!0)]}}),Xh(fo.prototype,{w:{name:"toJSON",j:[Wh(null,!0)]}}),Zh(Fo,"credential",qo,[Wh("verificationId"),Wh("verificationCode")]),Xh(Fo.prototype,{fb:{name:"verifyPhoneNumber",j:[$h(Wh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Qh(t.session,uo)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Qh(t.session,co)&&Yh(t.multiFactorHint):t.session&&t.multiFactorUid?Qh(t.session,co)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Xh(Lo.prototype,{w:{name:"toJSON",j:[Wh(null,!0)]}}),Xh(k.prototype,{toJSON:{name:"toJSON",j:[Wh(null,!0)]}}),Xh(Qo.prototype,{toJSON:{name:"toJSON",j:[Wh(null,!0)]}}),Xh(Go.prototype,{toJSON:{name:"toJSON",j:[Wh(null,!0)]}}),Xh(rl.prototype,{toJSON:{name:"toJSON",j:[Wh(null,!0)]}}),Xh(tl.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}]}}),Xh(cl.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}},Wh("displayName",!0)]},bd:{name:"unenroll",j:[$h({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Yh},Wh(),"multiFactorInfoIdentifier")]}}),Xh(qh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Zh(Ei,"parseLink",xi,[Wh("link")]),Zh(Th,"assertion",(function(t){return new sl(t)}),[Gh("phone")]),function(){if(void 0===i.default||!i.default.INTERNAL||!i.default.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:hi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:li,VERIFY_AND_CHANGE_EMAIL:di,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:ih,AuthCredential:lo,Error:k};Zh(t,"EmailAuthProvider",Ro,[]),Zh(t,"FacebookAuthProvider",Io,[]),Zh(t,"GithubAuthProvider",To,[]),Zh(t,"GoogleAuthProvider",Co,[]),Zh(t,"TwitterAuthProvider",No,[]),Zh(t,"OAuthProvider",wo,[Wh("providerId")]),Zh(t,"SAMLAuthProvider",bo,[Wh("providerId")]),Zh(t,"PhoneAuthProvider",Fo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof ih)}}]),Zh(t,"RecaptchaVerifier",qh,[$h(Wh(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Hh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof i.default.app.App)}}]),Zh(t,"ActionCodeURL",Ei,[]),Zh(t,"PhoneMultiFactorGenerator",Th,[]),i.default.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new ih(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),i.default.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:I((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:I(t.nc,t),addAuthTokenListener:I(t.cc,t),removeAuthTokenListener:I(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),i.default.registerVersion("@firebase/auth","0.16.4"),i.default.INTERNAL.extendNamespace({User:yl})}()}.apply(void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),n(562);const o=(()=>{const t={id:""};return{projects:[],userId:void 0,setActiveProject:e=>{t.id=e},getActiveProject:()=>t.id}})(),a=t=>!!localStorage.getItem(t),s=(t,e)=>{localStorage.setItem(t,JSON.stringify(e))},u=t=>{let e=localStorage.getItem(`${t}`);return JSON.parse(e)},c=(t,e,n=null,r="normal",i=0)=>{let a=t,s=e,u=n,c=i,l=r;const h=function(){if(o.projects.length<=1){if(o.projects[0].tasks.length<1)return 1;{let t=o.projects[0].tasks;return Math.max(...t.map((t=>t.getId())))+1}}if(_.lookupProject(_.getActiveProject()).tasks.length<1)return 1;{let t=_.lookupProject(_.getActiveProject()).tasks;return Math.max(...t.map((t=>t.getId())))+1}}();let d;return{editName:function(t){return a=t},editNotes:function(t){return s=t},editDue:function(t){return u=t},editPriority:function(t){return l=t},getName:function(){return a},getNotes:function(){return s},getDue:function(){return u},getPriority:function(){return l},getCompleted:function(){return c},getId:function(){return h},toggleCompleted:function(){c=0===c?1:0},toString:function(){return d={name:a,notes:s,due:u,priority:l,completed:c,id:h}}}},l=(t,e=null,n="normal",r=0)=>{let i=t,a=e;const s=[];let u=r,c=n;const l=function(){if(o.projects.length<1)return 1;{let t=o.projects;return Math.max(...t.map((t=>t.getId())))+1}}();function h(){let t=[];for(let e=0;e<s.length;e++){let n={name:s[e].getName(),notes:s[e].getNotes(),due:s[e].getDue(),priority:s[e].getPriority(),completed:s[e].getCompleted(),id:s[e].getId()};t.push(n)}return t}return{tasks:s,editDue:function(t){return a=t},editName:function(t){return i=t},editPriority:function(t){return c=t},getName:function(){return i},getDue:function(){return a},getPriority:function(){return c},getId:function(){return l},getProgress:function(){return function(){let t=s.length;if(0===t)return u=0;let e=0;for(let n=0;n<t;n++)1===s[n].getCompleted()&&e++;u=e/t*100}(),u},toString:function(){return{name:i,due:a,priority:c,completed:u,tasks:h()}},getTasks:h}};var h=n(308),d=n(795),f=n(31),p=n(843);n(457),n(241);const v=(()=>{function t(t){if(console.log(t),"normal"===t);else if("high"!==t)return p}return{projectPlaceholder:(e,n="",r,i)=>({tag:"div",classes:["project-placeholder"],dataProjectId:i,children:[{tag:"div",classes:["project-name-due"],children:[{tag:"div",classes:["project-name"],content:e},{tag:"div",classes:["project-due"],content:n}]},{tag:"div",classes:["project-priority"],children:[{tag:"img",classes:["project-priority-icon"],src:t(r)}]},{tag:"div",classes:["project-edit"],children:[{tag:"img",classes:["project-edit-icon"],src:d}]},{tag:"div",classes:["edit-delete-save"],children:[{tag:"div",classes:["edit-delete"],children:[{tag:"img",classes:["project-delete-icon"],src:f}]},{tag:"div",classes:["edit-save"],children:[{tag:"img",classes:["project-save-icon"],src:h}]}]}]}),taskPlaceholder:(e,n="",r,i,o,a)=>({tag:"div",classes:["task-placeholder"],dataTaskId:i,children:[{tag:"div",classes:["task-status"],children:[{tag:"input",classes:["task-completed"],type:"checkbox",completed:a}]},{tag:"div",classes:["task-name-due-notes"],children:[{tag:"div",classes:["task-name-due"],children:[{tag:"div",classes:["task-name"],content:e},{tag:"div",classes:["task-due"],content:n}]},{tag:"div",classes:["task-notes"],content:o}]},{tag:"div",classes:["task-priority"],children:[{tag:"img",classes:["task-priority-icon"],src:t(r)}]},{tag:"div",classes:["task-edit"],children:[{tag:"img",classes:["task-edit-icon"],src:d}]},{tag:"div",classes:["edit-delete-save"],children:[{tag:"div",classes:["edit-delete"],children:[{tag:"img",classes:["task-delete-icon"],src:f}]},{tag:"div",classes:["edit-save"],children:[{tag:"img",classes:["task-save-icon"],src:h}]}]}]}),project:{tag:"div",classes:["add-project-form"],children:[{tag:"form",classes:["project-form"],children:[{tag:"div",children:[{tag:"input",type:"text",name:"project-name",required:"required",placeholder:"Project Name"}]},{tag:"div",children:[{tag:"input",type:"date",name:"project-due",placeholder:"Due Date"}]},{tag:"div",children:[{tag:"select",name:"project-priority",children:[{tag:"option",value:"normal",content:"Normal Priority",selected:"true"},{tag:"option",value:"high",content:"High Priority"},{tag:"option",value:"low",content:"Low Priority"}]}]},{tag:"input",classes:["project-submit"],type:"submit",value:"submit"}]}]},task:{tag:"div",classes:["add-task-form"],children:[{tag:"form",classes:["task-form"],children:[{tag:"div",classes:["task-form-column-left"],children:[{tag:"div",children:[{tag:"input",type:"text",name:"task-name",required:"required",placeholder:"Task Name"}]},{tag:"div",children:[{tag:"input",type:"date",name:"task-due",required:"required",placeholder:"Due Date"}]},{tag:"select",name:"task-priority",children:[{tag:"option",value:"normal",content:"Normal Priority",selected:"true"},{tag:"option",value:"high",content:"High Priority"},{tag:"option",value:"low",content:"Low Priority"}]}]},{tag:"div",classes:["task-form-column-right"],children:[{tag:"div",children:[{tag:"textarea",name:"task-notes",placeholder:"Notes"}]}]},{tag:"input",classes:["task-submit"],type:"submit",value:"submit"}]}]}}})(),g=(()=>{const t=e=>{let n=document.createElement(e.tag);if(e.content&&(n.innerText=e.content),e.classes)for(let t of e.classes)n.classList.add(t);if(e.id&&(n.id=e.id),e.dataTaskId&&n.setAttribute("data-task-id",e.dataTaskId),e.dataProjectId&&n.setAttribute("data-project-id",e.dataProjectId),e.src&&(n.src=e.src),e.for&&(n.htmlFor=e.for),e.placeholder&&(n.placeholder=e.placeholder),e.tag&&(n.tag=e.tag),1===e.completed&&(n.checked="true"),e.type&&(n.type=e.type),e.name&&(n.name=e.name),e.value&&(n.value=e.value),e.rows&&(n.rows=e.rows),e.cols&&(n.cols=e.cols),e.selected&&(n.selected="true"),e.required&&(n.required=e.required),e.children)for(let r of e.children)t(r),n.append(t(r));return n};return{gen:t}})();var m=n(590);const y=(()=>{const t=document.querySelector(".project-view"),e=document.querySelector(".task-view"),n=document.querySelector(".project-view-list"),r=document.querySelector(".task-view-list"),i=document.querySelector(".add-project"),a=document.querySelector(".add-task"),s=i.querySelector("img"),u=a.querySelector("img"),c=document.querySelector(".login"),l=document.querySelector(".nav-about"),h=document.querySelector(".logout"),d=document.querySelector(".modal");function f(){r.innerText="Please add a project before adding individual tasks"}function p(t){let e=E("project",t.getName(),t.getDue(),t.getPriority(),t.getId());n.appendChild(e)}l.onclick=function(){d.style.display="block",d.addEventListener("click",(()=>{d.style.display="none"}))},h.onclick=function(){b.auth.signOut()},c.onclick=function(){b.auth.signInWithPopup(b.provider)};const y=t=>{r.innerHTML="",_.lookupProject(t).tasks.length<1&&(r.innerText="No tasks! Add your first :)"),_.lookupProject(t).tasks.forEach((t=>{let e=E("task",t.getName(),t.getDue(),t.getPriority(),t.getId(),t.getNotes(),t.getCompleted());r.appendChild(e),1===t.getCompleted()&&S(t.getId())}))};function w([...t]){for(let e=0;e<[...t].length;e++)void 0!==[...t][e]&&([...t][e].isContentEditable?[...t][e].setAttribute("contenteditable","false"):[...t][e].setAttribute("contenteditable","true"))}function I(t){let e=function(t){return t.target.classList.contains("project-edit-icon")?"project":"task"}(t),n=function(t,e){let n=t.target.parentNode.parentNode,r=t.target.parentNode.parentNode.querySelector(`.${e}-name`),i=function(t){if(t.target.parentNode.parentNode.querySelector(".task-notes")||t.target.parentNode.parentNode.querySelector(".task-notes-expanded")){let e=t.target.parentNode.parentNode.querySelector(".task-notes")||t.target.parentNode.parentNode.querySelector(".task-notes-expanded");return t.target.parentNode.parentNode.querySelector(".task-notes")&&(e.classList.toggle("task-notes-expanded"),e.classList.toggle("task-notes")),e}}(t),o=t.target.parentNode.parentNode.querySelector(`.${e}-due`),a=t.target.parentNode.parentNode.querySelector(`.${e}-priority-icon`),s=t.target.parentNode.parentNode.getAttribute(`data-${e}-id`);return{placeholder:n,name:r,notesDiv:i,dueDiv:o,priorityButton:a,deleteButton:t.target.parentNode.parentNode.querySelector(`.${e}-delete-icon`),saveButton:t.target.parentNode.parentNode.querySelector(`.${e}-save-icon`),id:s}}(t,e),r=n.dueDiv.innerText;n.dueDiv.innerHTML=`<input type="date" name="${e}-due" id="edit-date"> <button id="clear-date">X</button>`;let i=t.target.parentNode.parentNode.querySelector("#edit-date"),o=t.target.parentNode.parentNode.querySelector("#clear-date");i.value=r,n.notesDiv&&n.notesDiv.classList.remove("strikethrough"),n.placeholder.classList.toggle(`${e}-placeholder-edit`),w([n.name,n.notesDiv]);let a=function(t,e){if("project"===t)return _.lookupProject(e);{let t=_.lookupProject(_.getActiveProject());return _.lookupTask(t,e)}}(e,n.id),s=_.lookupProject(_.getActiveProject());o.onclick=function(){i.value=""},n.priorityButton.addEventListener("click",(()=>{_.priorityController(n.priorityButton,a)})),n.deleteButton.addEventListener("click",(()=>{_.deleteController(e,n.placeholder,s,n.id)})),n.saveButton.onclick=function(){n.dueDiv.innerText=i.value,w([n.name,n.notesDiv]),n.notesDiv&&n.name.classList.contains("strikethrough")&&(n.notesDiv.classList.remove("task-notes-expanded"),n.notesDiv.classList.add("task-notes"),n.notesDiv.classList.add("strikethrough")),n.notesDiv&&""==n.notesDiv.innerText&&n.notesDiv.classList.remove("task-notes-expanded"),n.placeholder.classList.toggle(`${e}-placeholder-edit`),_.saveChanges(a,n.name.innerText,i.value,n.notesDiv.innerText),n.priorityButton.removeEventListener("click",_.priorityController)}}function E(t,e,n,r,i,o,a){let s=v[`${t}Placeholder`](e,n,r,i,o,a);return g.gen(s)}function T(t){t.classList.toggle("project-placeholder-active"),t.classList.toggle("project-placeholder")}function S(t){let e=r.querySelector(`[data-task-id="${t}"]`);e.querySelector(".task-name").classList.toggle("strikethrough"),e.querySelector(".task-due")&&e.querySelector(".task-due").classList.toggle("strikethrough"),e.querySelector(".task-notes")&&e.querySelector(".task-notes").classList.toggle("strikethrough"),e.querySelector(".task-notes-expanded")&&e.querySelector(".task-notes-expanded").classList.toggle("strikethrough")}function C(t,e){let n=t,r=n.querySelector(`.${e}-edit-icon`),i=n.querySelector(`.${e}-priority-icon`);r.classList.add("icon-hover"),i.classList.add("icon-hover")}function k(t,e){let n=t,r=n.querySelector(`.${e}-edit-icon`),i=n.querySelector(`.${e}-priority-icon`);r.classList.remove("icon-hover"),i.classList.remove("icon-hover")}function N(t,e){let n=g.gen(v[`${t}`]);e.insertBefore(n,e.firstElementChild.nextSibling),function(t){document.querySelector(`.${t}-submit`).onclick=function(e){e.preventDefault(),_.addObjectController(t),document.querySelector(`.${t}-form`).reset()}}(t)}return n.onclick=function(t){if("project-name"===t.target.className||t.target.classList.contains("project-edit-icon")||"project-due"===t.target.className){let e=t.target.parentNode.parentNode,r=e.getAttribute("data-project-id");y(r),n.querySelector(".project-placeholder-active")&&function(){let t=n.querySelector(".project-placeholder-active");t.classList.toggle("project-placeholder-active"),t.classList.toggle("project-placeholder")}(),T(e),_.switchActiveProject(r),t.target.classList.contains("project-edit-icon")&&I(t)}},n.onmouseover=function(t){(t.target.classList.contains("project-placeholder")||t.target.classList.contains("project-placeholder-active")||t.target.classList.contains("project-placeholder-active"))&&C(t.target,"project"),(t.target.parentNode.classList.contains("project-placeholder")||t.target.parentNode.classList.contains("project-placeholder-active")||t.target.parentNode.classList.contains("project-placeholder-active"))&&C(t.target.parentNode,"project"),(t.target.parentNode.parentNode.classList.contains("project-placeholder")||t.target.parentNode.parentNode.classList.contains("project-placeholder-active"))&&C(t.target.parentNode.parentNode,"project")},n.onmouseout=function(t){(t.target.classList.contains("project-placeholder")||t.target.classList.contains("project-placeholder-active"))&&k(t.target,"project"),(t.target.parentNode.classList.contains("project-placeholder")||t.target.parentNode.classList.contains("project-placeholder-active"))&&k(t.target.parentNode,"project"),(t.target.parentNode.parentNode.classList.contains("project-placeholder")||t.target.parentNode.parentNode.classList.contains("project-placeholder-active"))&&k(t.target.parentNode.parentNode,"project")},r.onmouseover=function(t){"task-placeholder"===t.target.className&&C(t.target,"task"),"task-placeholder"===t.target.parentNode.className&&C(t.target.parentNode,"task"),"task-placeholder"===t.target.parentNode.parentNode.className&&C(t.target.parentNode.parentNode,"task")},r.onmouseout=function(t){"task-placeholder"===t.target.className&&k(t.target,"task"),"task-placeholder"===t.target.parentNode.className&&k(t.target.parentNode,"task"),"task-placeholder"===t.target.parentNode.parentNode.className&&k(t.target.parentNode.parentNode,"task")},r.onclick=function(t){if("task-notes"!==t.target.className&&"task-notes-expanded"!==t.target.className||t.target.parentNode.parentNode.classList.contains("task-placeholder-edit")){if(t.target.classList.contains("task-edit-icon"))I(t);else if("task-completed"===t.target.className){let e=t.target.parentNode.parentNode.getAttribute("data-task-id");_.completedController(e)}}else{let e=t.target;e.classList.toggle("task-notes-expanded"),e.classList.toggle("task-notes")}},i.onclick=function(){document.querySelector(".add-project-form")?(t.removeChild(document.querySelector(".add-project-form")),s.src="add.svg"):(s.src=m,N("project",t))},a.onclick=function(){document.querySelector(".add-task-form")?(e.removeChild(document.querySelector(".add-task-form")),u.src="add.svg"):(u.src=m,_.checkForProjects()>0?N("task",e):f())},{login:c,logout:h,clearLists:function(){n.textContent="",r.textContent=""},noProjectsWarning:f,clearNoTasksWarning:function(){r.innerText=""},displayAllProjects:()=>{o.projects.forEach((t=>{p(t)}))},displayProject:p,displayTasks:y,appendProject:function(t){n.appendChild(t)},appendTask:function(t){r.appendChild(t)},placeholderGen:E,getFormInput:function(t){let e,n,r=document.querySelector(`[name="${t}-name"]`).value;return""==r&&"project"===t?r="Untitled Project":""==r&&"task"===t&&(r="Untitled Task"),document.querySelector(`[name="${t}-notes"]`)&&(e=document.querySelector(`[name="${t}-notes"]`).value),n=document.querySelector(`[name="${t}-due"]`).value?document.querySelector(`[name="${t}-due"]`).value:null,{nameInput:r,notesInput:e,dueInput:n,priorityInput:document.querySelector(`[name="${t}-priority"]`).value}},progressPaint:function(t,e){n.querySelector(`[data-project-id="${t}"]`).style.background=`linear-gradient(135deg, rgba(232, 235, 241) ${e}%, rgba(238,238,238,0) ${e}%)`},setActive:T,strikeThroughCompleted:S}})(),_=(()=>{const t=()=>{let t=e();return r(o.projects,t),{dP:t,dT:n()}},e=()=>l("Default Project"),n=()=>c("Create your first project (or task!)","tasktemple lets you organise your to do list by groups - or projects. Set due date, priority, and add notes"),r=(t,e)=>{t.push(e)},i=t=>!!a(t),h=(t,e)=>{s(t,e)};function d(){null!==b.auth.currentUser?b.saveActive(b.auth.currentUser.uid,m()):h("activeproject",m())}function f(){null!==b.auth.currentUser?b.saveProjects(b.auth.currentUser.uid,S()):h("projects",S())}function p(t){let e=document.querySelector(`[data-project-id="${t}"]`);y.setActive(e)}const v=t=>{let e=m();for(let e=0;e<t.length;e++){let n=l(t[e].name,t[e].due,t[e].priority,t[e].completed);if(r(o.projects,n),g(e+1),t[e].tasks)for(let n=0;n<t[e].tasks.length;n++){let i=c(t[e].tasks[n].name,t[e].tasks[n].notes,t[e].tasks[n].due,t[e].tasks[n].priority,t[e].tasks[n].completed);r(o.projects[e].tasks,i)}y.displayProject(_(m())),C(_(m()))}o.projects.length>0&&y.displayTasks(e),g(e),p(e)};function g(t){o.setActiveProject(t)}function m(){return o.getActiveProject()}function _(t){return o.projects.find((e=>e.getId()==t))}function w(t){let e=parseInt(t,10);return o.projects.findIndex((t=>t.getId()===e))}function I(t,e){return t.tasks.find((t=>t.getId()==e))}function E(t,e){let n=parseInt(e,10);return t.tasks.findIndex((t=>t.getId()===n))}const T=(t,e)=>{let n=(r=t)[r.length-1];var r;let i,o=n.getName();"task"==e&&(i=n.getNotes());let a,s=n.getDue(),u=n.getPriority(),c=n.getId();return"project"==e?(a=y.placeholderGen(e,o,s,u,c),y.appendProject(a),c):(a=y.placeholderGen(e,o,s,u,c,i),y.appendTask(a),c)};function S(){let t=[];for(let e=0;e<o.projects.length;e++){let n=o.projects[e].toString();t.push(n)}return t}function C(t){let e=t.getProgress();y.progressPaint(m(),e)}return{genDefaultProject:e,genDefaultTask:n,localStorageLoader:function(e){if(i(e)){let t=(t=>u(t))(e);v(t)}else(()=>{let e=t();r(o.projects[0].tasks,e.dT),g(1),y.displayAllProjects(),y.displayTasks(1),p(1)})()},lsProjectSaver:h,lsStorageCheck:i,newObjectDisplayController:T,lookupProject:_,switchActiveProject:function(t){g(t),d()},setActiveProject:g,getActiveProject:m,lookupProjectIndex:w,lookupTask:I,lookupTaskIndex:E,deleteController:function(t,e,n,r){if("project"===t){let t=w(r);!function(t){let e=function(t){return 0===o.projects.length?0:1===o.projects.length?o.projects[0].getId():o.projects[t]==o.projects[0]?o.projects[1].getId():o.projects[t-1].getId()}(t);0!==e&&(g(e),d())}(t),y.displayTasks(m()),o.projects.splice(t,1)}else{let t=E(n,r);n.tasks.splice(t,1)}e.remove(),o.projects.length<1&&y.noProjectsWarning(),f()},completedController:function(t){let e=_(m());I(e,t).toggleCompleted(),y.strikeThroughCompleted(t),C(e),f()},projectProgressBar:C,addObjectController:function(t){let e,n=function(t){return y.getFormInput(t)}(t);if(document.querySelector(`[name="${t}-notes"]`)){let t=_(m());t.tasks.length<1&&y.clearNoTasksWarning(),e=((t,e="",n,r,i)=>c(t,e,n,r,void 0))(n.nameInput,n.notesInput,n.dueInput,n.priorityInput),r(t.tasks,e),T(t.tasks,"task"),C(t)}else{i=n.nameInput,a=n.dueInput,s=n.priorityInput,e=l(i,a,s,undefined),r(o.projects,e);let t=T(o.projects,"project");y.displayTasks(t)}var i,a,s;f()},projectsToString:S,checkForProjects:function(){return o.projects.length>0?1:0},restoreSavedObjects:v,priorityController:function(t,e){let n=(r=t.src).includes("normal")?"high":r.includes("high")?"low":r.includes("low")?"normal":void 0;var r;t.src=`${n}.svg`,e.editPriority(n),f()},saveChanges:function(t,e,n,r){t.editName(e),t.editDue(n),r&&t.editNotes(r),f()}}})(),b=(()=>{i.default.initializeApp({apiKey:"AIzaSyAsW_HADjTvTHAJ3i6dy0F2CpKC_MWETzs",authDomain:"tasktemple.firebaseapp.com",projectId:"tasktemple",storageBucket:"tasktemple.appspot.com",messagingSenderId:"525787043138",appId:"1:525787043138:web:52a4cd74410f00652c24db",measurementId:"G-V53NB69QCF",databaseURL:" https://tasktemple-default-rtdb.europe-west1.firebasedatabase.app"});let t=new i.default.auth.GoogleAuthProvider;const e=i.default.auth();return e.onAuthStateChanged((t=>{var e;t?(y.clearLists(),y.logout.classList.remove("hide"),y.login.classList.add("hide"),o.userId=i.default.auth().currentUser.uid,o.projects=[],localStorage.clear(),e=t.uid,i.default.database().ref().child("users").child(e).get().then((function(t){if(t.exists()){let e=t.val().active.active;_.setActiveProject(e),_.restoreSavedObjects(t.val().projects.projects)}else console.log("No data available")}))):(o.userId=void 0,console.log("not logged in"),y.logout.classList.add("hide"),y.login.classList.remove("hide"),y.clearLists(),o.projects=[],_.localStorageLoader("projects"))})),i.default.database().ref().child("projects"),{saveProjects:function(t,e){i.default.database().ref("users/"+t+"/projects").set({projects:e})},saveActive:function(t,e){i.default.database().ref("users/"+t+"/active").set({active:e})},auth:e,provider:t}})();n(208),n(436)})()})();